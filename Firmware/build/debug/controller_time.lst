ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"controller_time.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "controller/controller_time.c"
  20              		.section	.text.controller_time_start,"ax",%progbits
  21              		.align	1
  22              		.global	controller_time_start
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	controller_time_start:
  28              	.LVL0:
  29              	.LFB134:
   1:controller/controller_time.c **** #include "controller_time.h"
   2:controller/controller_time.c **** 
   3:controller/controller_time.c **** TIM_HandleTypeDef *timer = NULL;
   4:controller/controller_time.c **** 
   5:controller/controller_time.c **** void controller_time_start(TIM_HandleTypeDef *htim)
   6:controller/controller_time.c **** {
  30              		.loc 1 6 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
   7:controller/controller_time.c ****     if (htim == NULL)
  34              		.loc 1 7 5 view .LVU1
  35              		.loc 1 7 8 is_stmt 0 view .LVU2
  36 0000 78B1     		cbz	r0, .L4
   6:controller/controller_time.c ****     if (htim == NULL)
  37              		.loc 1 6 1 view .LVU3
  38 0002 10B5     		push	{r4, lr}
  39              		.cfi_def_cfa_offset 8
  40              		.cfi_offset 4, -8
  41              		.cfi_offset 14, -4
   8:controller/controller_time.c ****     {
   9:controller/controller_time.c ****         /**
  10:controller/controller_time.c ****          * @todo throw an error
  11:controller/controller_time.c ****          */
  12:controller/controller_time.c ****         return;
  13:controller/controller_time.c ****     }
  14:controller/controller_time.c ****     timer = htim;
  42              		.loc 1 14 5 is_stmt 1 view .LVU4
  43              		.loc 1 14 11 is_stmt 0 view .LVU5
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s 			page 2


  44 0004 074C     		ldr	r4, .L7
  45 0006 2060     		str	r0, [r4]
  15:controller/controller_time.c ****     /**
  16:controller/controller_time.c ****      * This assumes that sys clock is the same as timer clock
  17:controller/controller_time.c ****      */
  18:controller/controller_time.c ****     timer->Instance->PSC = HAL_RCC_GetSysClockFreq() / 1000000UL;
  46              		.loc 1 18 5 is_stmt 1 view .LVU6
  47              		.loc 1 18 28 is_stmt 0 view .LVU7
  48 0008 FFF7FEFF 		bl	HAL_RCC_GetSysClockFreq
  49              	.LVL1:
  50              		.loc 1 18 28 view .LVU8
  51 000c 0346     		mov	r3, r0
  52              		.loc 1 18 10 discriminator 1 view .LVU9
  53 000e 2068     		ldr	r0, [r4]
  54 0010 0168     		ldr	r1, [r0]
  55              		.loc 1 18 54 discriminator 1 view .LVU10
  56 0012 054A     		ldr	r2, .L7+4
  57 0014 A2FB0323 		umull	r2, r3, r2, r3
  58 0018 9B0C     		lsrs	r3, r3, #18
  59              		.loc 1 18 26 discriminator 1 view .LVU11
  60 001a 8B62     		str	r3, [r1, #40]
  19:controller/controller_time.c ****     HAL_TIM_Base_Start(timer);
  61              		.loc 1 19 5 is_stmt 1 view .LVU12
  62 001c FFF7FEFF 		bl	HAL_TIM_Base_Start
  63              	.LVL2:
  20:controller/controller_time.c **** }
  64              		.loc 1 20 1 is_stmt 0 view .LVU13
  65 0020 10BD     		pop	{r4, pc}
  66              	.LVL3:
  67              	.L4:
  68              		.cfi_def_cfa_offset 0
  69              		.cfi_restore 4
  70              		.cfi_restore 14
  71              		.loc 1 20 1 view .LVU14
  72 0022 7047     		bx	lr
  73              	.L8:
  74              		.align	2
  75              	.L7:
  76 0024 00000000 		.word	timer
  77 0028 83DE1B43 		.word	1125899907
  78              		.cfi_endproc
  79              	.LFE134:
  81              		.section	.text.get_time_us,"ax",%progbits
  82              		.align	1
  83              		.global	get_time_us
  84              		.syntax unified
  85              		.thumb
  86              		.thumb_func
  88              	get_time_us:
  89              	.LFB135:
  21:controller/controller_time.c **** 
  22:controller/controller_time.c **** 
  23:controller/controller_time.c **** controller_time_us_t get_time_us(void)
  24:controller/controller_time.c **** {
  90              		.loc 1 24 1 is_stmt 1 view -0
  91              		.cfi_startproc
  92              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s 			page 3


  93              		@ frame_needed = 0, uses_anonymous_args = 0
  94              		@ link register save eliminated.
  25:controller/controller_time.c ****     return timer->Instance->CNT;
  95              		.loc 1 25 5 view .LVU16
  96              		.loc 1 25 17 is_stmt 0 view .LVU17
  97 0000 024B     		ldr	r3, .L10
  98 0002 1B68     		ldr	r3, [r3]
  99 0004 1B68     		ldr	r3, [r3]
 100              		.loc 1 25 27 view .LVU18
 101 0006 586A     		ldr	r0, [r3, #36]
  26:controller/controller_time.c **** }
 102              		.loc 1 26 1 view .LVU19
 103 0008 7047     		bx	lr
 104              	.L11:
 105 000a 00BF     		.align	2
 106              	.L10:
 107 000c 00000000 		.word	timer
 108              		.cfi_endproc
 109              	.LFE135:
 111              		.section	.text.get_time_ms,"ax",%progbits
 112              		.align	1
 113              		.global	get_time_ms
 114              		.syntax unified
 115              		.thumb
 116              		.thumb_func
 118              	get_time_ms:
 119              	.LFB136:
  27:controller/controller_time.c **** 
  28:controller/controller_time.c **** controller_time_ms_t get_time_ms(void)
  29:controller/controller_time.c **** {
 120              		.loc 1 29 1 is_stmt 1 view -0
 121              		.cfi_startproc
 122              		@ args = 0, pretend = 0, frame = 0
 123              		@ frame_needed = 0, uses_anonymous_args = 0
 124              		@ link register save eliminated.
  30:controller/controller_time.c ****     return timer->Instance->CNT / 1000U;
 125              		.loc 1 30 5 view .LVU21
 126              		.loc 1 30 17 is_stmt 0 view .LVU22
 127 0000 044B     		ldr	r3, .L13
 128 0002 1B68     		ldr	r3, [r3]
 129 0004 1B68     		ldr	r3, [r3]
 130              		.loc 1 30 27 view .LVU23
 131 0006 586A     		ldr	r0, [r3, #36]
 132              		.loc 1 30 33 view .LVU24
 133 0008 034B     		ldr	r3, .L13+4
 134 000a A3FB0030 		umull	r3, r0, r3, r0
  31:controller/controller_time.c **** }
 135              		.loc 1 31 1 view .LVU25
 136 000e 8009     		lsrs	r0, r0, #6
 137 0010 7047     		bx	lr
 138              	.L14:
 139 0012 00BF     		.align	2
 140              	.L13:
 141 0014 00000000 		.word	timer
 142 0018 D34D6210 		.word	274877907
 143              		.cfi_endproc
 144              	.LFE136:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s 			page 4


 146              		.global	timer
 147              		.section	.bss.timer,"aw",%nobits
 148              		.align	2
 151              	timer:
 152 0000 00000000 		.space	4
 153              		.text
 154              	.Letext0:
 155              		.file 2 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 156              		.file 3 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 157              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xc.h"
 158              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 159              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 160              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 161              		.file 8 "controller/types.h"
 162              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_rcc.h"
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s 			page 5


DEFINED SYMBOLS
                            *ABS*:00000000 controller_time.c
C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s:21     .text.controller_time_start:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s:27     .text.controller_time_start:00000000 controller_time_start
C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s:76     .text.controller_time_start:00000024 $d
C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s:151    .bss.timer:00000000 timer
C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s:82     .text.get_time_us:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s:88     .text.get_time_us:00000000 get_time_us
C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s:107    .text.get_time_us:0000000c $d
C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s:112    .text.get_time_ms:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s:118    .text.get_time_ms:00000000 get_time_ms
C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s:141    .text.get_time_ms:00000014 $d
C:\Users\alireza\AppData\Local\Temp\ccahdxVc.s:148    .bss.timer:00000000 $d

UNDEFINED SYMBOLS
HAL_RCC_GetSysClockFreq
HAL_TIM_Base_Start
