ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"sensors.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "controller/IO/sensors.c"
  20              		.section	.rodata.sensor_tps_get.str1.4,"aMS",%progbits,1
  21              		.align	2
  22              	.LC3:
  23 0000 74707320 		.ascii	"tps is null\000"
  23      6973206E 
  23      756C6C00 
  24              		.align	2
  25              	.LC4:
  26 000c 74707320 		.ascii	"tps wrong sensor calib\000"
  26      77726F6E 
  26      67207365 
  26      6E736F72 
  26      2063616C 
  27              		.section	.text.sensor_tps_get,"ax",%progbits
  28              		.align	1
  29              		.global	sensor_tps_get
  30              		.syntax unified
  31              		.thumb
  32              		.thumb_func
  34              	sensor_tps_get:
  35              	.LVL0:
  36              	.LFB232:
   1:controller/IO/sensors.c **** #include "sensors.h"
   2:controller/IO/sensors.c **** 
   3:controller/IO/sensors.c **** static sensor_map_t *map_sensor = NULL;
   4:controller/IO/sensors.c **** static thermistor_t *sensor_iat = NULL;
   5:controller/IO/sensors.c **** static thermistor_t *sensor_clt = NULL;
   6:controller/IO/sensors.c **** static sensor_ops_t *sensor_ops = NULL;
   7:controller/IO/sensors.c **** 
   8:controller/IO/sensors.c **** percent_t sensor_tps_get(sensor_tps_t *sensor)
   9:controller/IO/sensors.c **** {
  37              		.loc 1 9 1 view -0
  38              		.cfi_startproc
  39              		@ args = 0, pretend = 0, frame = 0
  40              		@ frame_needed = 0, uses_anonymous_args = 0
  41              		.loc 1 9 1 is_stmt 0 view .LVU1
  42 0000 10B5     		push	{r4, lr}
  43              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 2


  44              		.cfi_offset 4, -8
  45              		.cfi_offset 14, -4
  10:controller/IO/sensors.c ****     if (sensor == NULL)
  46              		.loc 1 10 5 is_stmt 1 view .LVU2
  47              		.loc 1 10 8 is_stmt 0 view .LVU3
  48 0002 B0B3     		cbz	r0, .L14
  49 0004 0446     		mov	r4, r0
  11:controller/IO/sensors.c ****     {
  12:controller/IO/sensors.c ****         log_error("tps is null");
  13:controller/IO/sensors.c ****         return SENSOR_TPS_FAIL_SAFE;
  14:controller/IO/sensors.c ****     }
  15:controller/IO/sensors.c ****      if (sensor->wide_open_throttle_adc_value == 0 && sensor->closed_throttle_adc_value == 0)
  50              		.loc 1 15 6 is_stmt 1 view .LVU4
  51              		.loc 1 15 16 is_stmt 0 view .LVU5
  52 0006 0388     		ldrh	r3, [r0]
  53              		.loc 1 15 9 view .LVU6
  54 0008 0BB9     		cbnz	r3, .L4
  55              		.loc 1 15 61 discriminator 1 view .LVU7
  56 000a 4388     		ldrh	r3, [r0, #2]
  57              		.loc 1 15 52 discriminator 1 view .LVU8
  58 000c BBB3     		cbz	r3, .L15
  59              	.L4:
  16:controller/IO/sensors.c ****     {
  17:controller/IO/sensors.c ****         log_error("tps wrong sensor calib");
  18:controller/IO/sensors.c ****         return SENSOR_TPS_FAIL_SAFE;
  19:controller/IO/sensors.c ****     }
  20:controller/IO/sensors.c ****     percent_t result = 0;
  60              		.loc 1 20 5 is_stmt 1 view .LVU9
  61              	.LVL1:
  21:controller/IO/sensors.c ****     uint16_t raw_data = analog_inputs_get_data(sensor->analog_channel);
  62              		.loc 1 21 5 view .LVU10
  63              		.loc 1 21 25 is_stmt 0 view .LVU11
  64 000e 2079     		ldrb	r0, [r4, #4]	@ zero_extendqisi2
  65              	.LVL2:
  66              		.loc 1 21 25 view .LVU12
  67 0010 FFF7FEFF 		bl	analog_inputs_get_data
  68              	.LVL3:
  69 0014 07EE900A 		vmov	s15, r0	@ int
  70              	.LVL4:
  22:controller/IO/sensors.c ****     if (sensor->is_inverted)
  71              		.loc 1 22 5 is_stmt 1 view .LVU13
  72              		.loc 1 22 15 is_stmt 0 view .LVU14
  73 0018 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
  74              		.loc 1 22 8 view .LVU15
  75 001a B3B3     		cbz	r3, .L5
  23:controller/IO/sensors.c ****     {
  24:controller/IO/sensors.c ****         result = mapf((float)raw_data, (float)sensor->wide_open_throttle_adc_value, (float)sensor->
  76              		.loc 1 24 9 is_stmt 1 view .LVU16
  77              		.loc 1 24 18 is_stmt 0 view .LVU17
  78 001c F8EE677A 		vcvt.f32.u32	s15, s15
  79              	.LVL5:
  80              		.loc 1 24 53 view .LVU18
  81 0020 2288     		ldrh	r2, [r4]
  82              		.loc 1 24 18 view .LVU19
  83 0022 07EE102A 		vmov	s14, r2	@ int
  84 0026 F8EE476A 		vcvt.f32.u32	s13, s14
  85              		.loc 1 24 98 view .LVU20
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 3


  86 002a 6388     		ldrh	r3, [r4, #2]
  87              		.loc 1 24 18 view .LVU21
  88 002c 07EE103A 		vmov	s14, r3	@ int
  89 0030 B8EE477A 		vcvt.f32.u32	s14, s14
  90              	.LVL6:
  91              	.LBB8:
  92              	.LBI8:
  93              		.file 2 "controller/utils/utils.h"
   1:controller/utils/utils.h **** /**
   2:controller/utils/utils.h ****  * @file utils.h
   3:controller/utils/utils.h ****  * @brief Header file containing utility functions and definitions for the smart generator controll
   4:controller/utils/utils.h ****  *
   5:controller/utils/utils.h ****  * This file provides declarations for utility functions and macros that are
   6:controller/utils/utils.h ****  * used throughout the firmware to support various functionalities.
   7:controller/utils/utils.h ****  *
   8:controller/utils/utils.h ****  * @note Ensure that this file is included wherever utility functions are required.
   9:controller/utils/utils.h ****  */
  10:controller/utils/utils.h **** #ifndef UTILS_H
  11:controller/utils/utils.h **** #define UTILS_H
  12:controller/utils/utils.h **** 
  13:controller/utils/utils.h **** #include "types.h"
  14:controller/utils/utils.h **** #include "math.h"
  15:controller/utils/utils.h **** #define IS_IN_RANGE(value, min, max) ((value) >= (min) && (value) <= (max))
  16:controller/utils/utils.h **** #define ABS(value) ((value) < 0 ? -(value) : (value))
  17:controller/utils/utils.h **** #define CLAMP(value, min, max) ((value) < (min) ? (min) : ((value) > (max) ? (max) : (value)))
  18:controller/utils/utils.h **** 
  19:controller/utils/utils.h **** static inline void change_bit(uint32_t *var, uint8_t bit, bool state)
  20:controller/utils/utils.h **** {
  21:controller/utils/utils.h ****     if (bit > 31)
  22:controller/utils/utils.h ****     {
  23:controller/utils/utils.h ****         return;
  24:controller/utils/utils.h ****     }
  25:controller/utils/utils.h ****     if (state)
  26:controller/utils/utils.h ****     {
  27:controller/utils/utils.h ****         *var |= (1u << bit);
  28:controller/utils/utils.h ****     }
  29:controller/utils/utils.h ****     else
  30:controller/utils/utils.h ****     {
  31:controller/utils/utils.h ****         *var &= ~(1u << bit);
  32:controller/utils/utils.h ****     }
  33:controller/utils/utils.h **** }
  34:controller/utils/utils.h **** 
  35:controller/utils/utils.h **** static inline bool get_bit(uint32_t flags, uint8_t bit)
  36:controller/utils/utils.h **** {
  37:controller/utils/utils.h ****     if (bit < 32)
  38:controller/utils/utils.h ****     {
  39:controller/utils/utils.h ****         return (flags >> bit) & 1u;
  40:controller/utils/utils.h ****     }
  41:controller/utils/utils.h ****     return false;
  42:controller/utils/utils.h **** }
  43:controller/utils/utils.h **** 
  44:controller/utils/utils.h **** /**
  45:controller/utils/utils.h ****  * @brief Maps a value from one range to another.
  46:controller/utils/utils.h ****  *
  47:controller/utils/utils.h ****  * @param x The value to map.
  48:controller/utils/utils.h ****  * @param in_min The lower bound of the input range.
  49:controller/utils/utils.h ****  * @param in_max The upper bound of the input range.
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 4


  50:controller/utils/utils.h ****  * @param out_min The lower bound of the output range.
  51:controller/utils/utils.h ****  * @param out_max The upper bound of the output range.
  52:controller/utils/utils.h ****  * @return The mapped value in the output range.
  53:controller/utils/utils.h ****  */
  54:controller/utils/utils.h **** #define MAP(x, in_min, in_max, out_min, out_max) \
  55:controller/utils/utils.h ****     (((x) - (in_min)) * ((out_max) - (out_min)) / ((in_max) - (in_min)) + (out_min))
  56:controller/utils/utils.h **** 
  57:controller/utils/utils.h **** /**
  58:controller/utils/utils.h ****  * @brief Maps a uint16_t value from one range to another.
  59:controller/utils/utils.h ****  *
  60:controller/utils/utils.h ****  * @param x The value to map.
  61:controller/utils/utils.h ****  * @param in_min The lower bound of the input range.
  62:controller/utils/utils.h ****  * @param in_max The upper bound of the input range.
  63:controller/utils/utils.h ****  * @param out_min The lower bound of the output range.
  64:controller/utils/utils.h ****  * @param out_max The upper bound of the output range.
  65:controller/utils/utils.h ****  * @return The mapped value in the output range.
  66:controller/utils/utils.h ****  */
  67:controller/utils/utils.h **** static inline uint16_t map_uint16(uint16_t x, uint16_t in_min, uint16_t in_max, uint16_t out_min, u
  68:controller/utils/utils.h **** {
  69:controller/utils/utils.h ****     if (in_max == in_min)
  70:controller/utils/utils.h ****     {
  71:controller/utils/utils.h ****         return 0; // Avoid division by zero
  72:controller/utils/utils.h ****     }
  73:controller/utils/utils.h ****     return (uint16_t)((x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min);
  74:controller/utils/utils.h **** }
  75:controller/utils/utils.h **** 
  76:controller/utils/utils.h **** static inline float mapf(float x, float in_min, float in_max, float out_min, float out_max)
  94              		.loc 2 76 21 is_stmt 1 view .LVU22
  95              	.LBB9:
  77:controller/utils/utils.h **** {
  78:controller/utils/utils.h ****     if (in_max == in_min)
  96              		.loc 2 78 5 view .LVU23
  97              		.loc 2 78 8 is_stmt 0 view .LVU24
  98 0034 9A42     		cmp	r2, r3
  99 0036 45D0     		beq	.L9
  79:controller/utils/utils.h ****     {
  80:controller/utils/utils.h ****         return 0.0f; // Avoid division by zero
  81:controller/utils/utils.h ****     }
  82:controller/utils/utils.h ****     return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
 100              		.loc 2 82 5 is_stmt 1 view .LVU25
 101              		.loc 2 82 15 is_stmt 0 view .LVU26
 102 0038 77EEE67A 		vsub.f32	s15, s15, s13
 103              	.LVL7:
 104              		.loc 2 82 25 view .LVU27
 105 003c 9FED266A 		vldr.32	s12, .L17
 106 0040 67EE867A 		vmul.f32	s15, s15, s12
 107              		.loc 2 82 57 view .LVU28
 108 0044 37EE667A 		vsub.f32	s14, s14, s13
 109              	.LVL8:
 110              		.loc 2 82 47 view .LVU29
 111 0048 87EE870A 		vdiv.f32	s0, s15, s14
 112              		.loc 2 82 67 view .LVU30
 113 004c DFED237A 		vldr.32	s15, .L17+4
 114 0050 30EE270A 		vadd.f32	s0, s0, s15
 115              	.LVL9:
 116              	.L7:
 117              		.loc 2 82 67 view .LVU31
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 5


 118              	.LBE9:
 119              	.LBE8:
  25:controller/IO/sensors.c ****     }
  26:controller/IO/sensors.c ****     else
  27:controller/IO/sensors.c ****     {
  28:controller/IO/sensors.c ****         result = mapf((float)raw_data, (float)sensor->closed_throttle_adc_value, (float)sensor->wid
  29:controller/IO/sensors.c ****     }
  30:controller/IO/sensors.c ****     result = CLAMP(result, (percent_t)0, (percent_t)100);
 120              		.loc 1 30 5 is_stmt 1 view .LVU32
 121              		.loc 1 30 14 is_stmt 0 view .LVU33
 122 0054 B5EEC00A 		vcmpe.f32	s0, #0
 123 0058 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 124 005c 38D4     		bmi	.L16
 125              	.LVL10:
 126              	.L6:
 127              		.loc 1 30 14 discriminator 2 view .LVU34
 128 005e DFED1E7A 		vldr.32	s15, .L17
 129 0062 B4EEE70A 		vcmpe.f32	s0, s15
 130 0066 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 131 006a 01DD     		ble	.L1
 132              		.loc 1 30 14 discriminator 4 view .LVU35
 133 006c B0EE670A 		vmov.f32	s0, s15
 134              	.LVL11:
 135              	.L1:
  31:controller/IO/sensors.c ****     return result;
  32:controller/IO/sensors.c **** }
 136              		.loc 1 32 1 view .LVU36
 137 0070 10BD     		pop	{r4, pc}
 138              	.LVL12:
 139              	.L14:
  12:controller/IO/sensors.c ****         return SENSOR_TPS_FAIL_SAFE;
 140              		.loc 1 12 9 is_stmt 1 view .LVU37
 141 0072 1B48     		ldr	r0, .L17+8
 142              	.LVL13:
  12:controller/IO/sensors.c ****         return SENSOR_TPS_FAIL_SAFE;
 143              		.loc 1 12 9 is_stmt 0 view .LVU38
 144 0074 FFF7FEFF 		bl	log_error
 145              	.LVL14:
  13:controller/IO/sensors.c ****     }
 146              		.loc 1 13 9 is_stmt 1 view .LVU39
  13:controller/IO/sensors.c ****     }
 147              		.loc 1 13 16 is_stmt 0 view .LVU40
 148 0078 9FED1A0A 		vldr.32	s0, .L17+12
 149 007c F8E7     		b	.L1
 150              	.LVL15:
 151              	.L15:
  17:controller/IO/sensors.c ****         return SENSOR_TPS_FAIL_SAFE;
 152              		.loc 1 17 9 is_stmt 1 view .LVU41
 153 007e 1A48     		ldr	r0, .L17+16
 154              	.LVL16:
  17:controller/IO/sensors.c ****         return SENSOR_TPS_FAIL_SAFE;
 155              		.loc 1 17 9 is_stmt 0 view .LVU42
 156 0080 FFF7FEFF 		bl	log_error
 157              	.LVL17:
  18:controller/IO/sensors.c ****     }
 158              		.loc 1 18 9 is_stmt 1 view .LVU43
  18:controller/IO/sensors.c ****     }
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 6


 159              		.loc 1 18 16 is_stmt 0 view .LVU44
 160 0084 9FED170A 		vldr.32	s0, .L17+12
 161 0088 F2E7     		b	.L1
 162              	.LVL18:
 163              	.L5:
  28:controller/IO/sensors.c ****     }
 164              		.loc 1 28 9 is_stmt 1 view .LVU45
  28:controller/IO/sensors.c ****     }
 165              		.loc 1 28 18 is_stmt 0 view .LVU46
 166 008a F8EE677A 		vcvt.f32.u32	s15, s15
 167              	.LVL19:
  28:controller/IO/sensors.c ****     }
 168              		.loc 1 28 53 view .LVU47
 169 008e 6288     		ldrh	r2, [r4, #2]
  28:controller/IO/sensors.c ****     }
 170              		.loc 1 28 18 view .LVU48
 171 0090 07EE102A 		vmov	s14, r2	@ int
 172 0094 F8EE476A 		vcvt.f32.u32	s13, s14
  28:controller/IO/sensors.c ****     }
 173              		.loc 1 28 95 view .LVU49
 174 0098 2388     		ldrh	r3, [r4]
  28:controller/IO/sensors.c ****     }
 175              		.loc 1 28 18 view .LVU50
 176 009a 07EE103A 		vmov	s14, r3	@ int
 177 009e B8EE477A 		vcvt.f32.u32	s14, s14
 178              	.LVL20:
 179              	.LBB10:
 180              	.LBI10:
  76:controller/utils/utils.h **** {
 181              		.loc 2 76 21 is_stmt 1 view .LVU51
 182              	.LBB11:
  78:controller/utils/utils.h ****     {
 183              		.loc 2 78 5 view .LVU52
  78:controller/utils/utils.h ****     {
 184              		.loc 2 78 8 is_stmt 0 view .LVU53
 185 00a2 9A42     		cmp	r2, r3
 186 00a4 11D0     		beq	.L10
 187              		.loc 2 82 5 is_stmt 1 view .LVU54
 188              		.loc 2 82 15 is_stmt 0 view .LVU55
 189 00a6 77EEE67A 		vsub.f32	s15, s15, s13
 190              	.LVL21:
 191              		.loc 2 82 25 view .LVU56
 192 00aa 9FED0B6A 		vldr.32	s12, .L17
 193 00ae 67EE867A 		vmul.f32	s15, s15, s12
 194              		.loc 2 82 57 view .LVU57
 195 00b2 37EE667A 		vsub.f32	s14, s14, s13
 196              	.LVL22:
 197              		.loc 2 82 47 view .LVU58
 198 00b6 87EE870A 		vdiv.f32	s0, s15, s14
 199              		.loc 2 82 67 view .LVU59
 200 00ba DFED087A 		vldr.32	s15, .L17+4
 201 00be 30EE270A 		vadd.f32	s0, s0, s15
 202              	.LVL23:
 203              		.loc 2 82 67 view .LVU60
 204 00c2 C7E7     		b	.L7
 205              	.LVL24:
 206              	.L9:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 7


 207              		.loc 2 82 67 view .LVU61
 208              	.LBE11:
 209              	.LBE10:
  24:controller/IO/sensors.c ****     }
 210              		.loc 1 24 18 view .LVU62
 211 00c4 9FED050A 		vldr.32	s0, .L17+4
 212 00c8 C9E7     		b	.L6
 213              	.LVL25:
 214              	.L10:
  28:controller/IO/sensors.c ****     }
 215              		.loc 1 28 18 view .LVU63
 216 00ca 9FED040A 		vldr.32	s0, .L17+4
 217 00ce C6E7     		b	.L6
 218              	.LVL26:
 219              	.L16:
  30:controller/IO/sensors.c ****     return result;
 220              		.loc 1 30 14 discriminator 1 view .LVU64
 221 00d0 9FED020A 		vldr.32	s0, .L17+4
 222              	.LVL27:
  30:controller/IO/sensors.c ****     return result;
 223              		.loc 1 30 14 discriminator 1 view .LVU65
 224 00d4 CCE7     		b	.L1
 225              	.L18:
 226 00d6 00BF     		.align	2
 227              	.L17:
 228 00d8 0000C842 		.word	1120403456
 229 00dc 00000000 		.word	0
 230 00e0 00000000 		.word	.LC3
 231 00e4 0000C07F 		.word	2143289344
 232 00e8 0C000000 		.word	.LC4
 233              		.cfi_endproc
 234              	.LFE232:
 236              		.section	.rodata.sensor_map_init.str1.4,"aMS",%progbits,1
 237              		.align	2
 238              	.LC5:
 239 0000 6D617020 		.ascii	"map sensor is null\000"
 239      73656E73 
 239      6F722069 
 239      73206E75 
 239      6C6C00
 240 0013 00       		.align	2
 241              	.LC6:
 242 0014 6D617020 		.ascii	"map sensor type not configured!\000"
 242      73656E73 
 242      6F722074 
 242      79706520 
 242      6E6F7420 
 243              		.section	.text.sensor_map_init,"ax",%progbits
 244              		.align	1
 245              		.global	sensor_map_init
 246              		.syntax unified
 247              		.thumb
 248              		.thumb_func
 250              	sensor_map_init:
 251              	.LVL28:
 252              	.LFB233:
  33:controller/IO/sensors.c **** 
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 8


  34:controller/IO/sensors.c **** void sensor_map_init(sensor_map_t *sensor, sensor_map_type_t type)
  35:controller/IO/sensors.c **** {
 253              		.loc 1 35 1 is_stmt 1 view -0
 254              		.cfi_startproc
 255              		@ args = 0, pretend = 0, frame = 0
 256              		@ frame_needed = 0, uses_anonymous_args = 0
 257              		.loc 1 35 1 is_stmt 0 view .LVU67
 258 0000 10B5     		push	{r4, lr}
 259              		.cfi_def_cfa_offset 8
 260              		.cfi_offset 4, -8
 261              		.cfi_offset 14, -4
  36:controller/IO/sensors.c ****     if (sensor == NULL)
 262              		.loc 1 36 5 is_stmt 1 view .LVU68
 263              		.loc 1 36 8 is_stmt 0 view .LVU69
 264 0002 68B1     		cbz	r0, .L26
 265 0004 0446     		mov	r4, r0
  37:controller/IO/sensors.c ****     {
  38:controller/IO/sensors.c ****         log_error("map sensor is null");
  39:controller/IO/sensors.c ****         return;
  40:controller/IO/sensors.c ****     }
  41:controller/IO/sensors.c ****     switch (type)
 266              		.loc 1 41 5 is_stmt 1 view .LVU70
 267 0006 79B1     		cbz	r1, .L22
 268 0008 0129     		cmp	r1, #1
 269 000a 15D1     		bne	.L23
  42:controller/IO/sensors.c ****     {
  43:controller/IO/sensors.c ****     case SENSOR_MAP_TYPE_BOSCH_816:
  44:controller/IO/sensors.c ****         /**
  45:controller/IO/sensors.c ****          * a simple linear sensor
  46:controller/IO/sensors.c ****          */
  47:controller/IO/sensors.c ****         /**
  48:controller/IO/sensors.c ****          * @todo actually calculate these values!
  49:controller/IO/sensors.c ****          */
  50:controller/IO/sensors.c ****         sensor->adc_value_0_bar = 100;
 270              		.loc 1 50 9 view .LVU71
 271              		.loc 1 50 33 is_stmt 0 view .LVU72
 272 000c 6423     		movs	r3, #100
 273 000e 0380     		strh	r3, [r0]	@ movhi
  51:controller/IO/sensors.c ****         sensor->adc_value_1_bar = 3000;
 274              		.loc 1 51 9 is_stmt 1 view .LVU73
 275              		.loc 1 51 33 is_stmt 0 view .LVU74
 276 0010 40F6B833 		movw	r3, #3000
 277 0014 4380     		strh	r3, [r0, #2]	@ movhi
  52:controller/IO/sensors.c ****         sensor->analog_channel = ANALOG_INPUT_SENSOR_MAP_PIN;
 278              		.loc 1 52 9 is_stmt 1 view .LVU75
 279              		.loc 1 52 32 is_stmt 0 view .LVU76
 280 0016 0523     		movs	r3, #5
 281 0018 0371     		strb	r3, [r0, #4]
  53:controller/IO/sensors.c ****         break;
 282              		.loc 1 53 9 is_stmt 1 view .LVU77
 283              	.LVL29:
 284              	.L24:
  54:controller/IO/sensors.c ****     case SENSOR_MAP_TYPE_TEST:
  55:controller/IO/sensors.c ****         /**
  56:controller/IO/sensors.c ****          * a simple linear sensor
  57:controller/IO/sensors.c ****          */
  58:controller/IO/sensors.c ****         /**
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 9


  59:controller/IO/sensors.c ****          * @todo actually calculate these values!
  60:controller/IO/sensors.c ****          */
  61:controller/IO/sensors.c ****         sensor->adc_value_0_bar = 0;
  62:controller/IO/sensors.c ****         sensor->adc_value_1_bar = 4095;
  63:controller/IO/sensors.c ****         sensor->analog_channel = ANALOG_INPUT_SENSOR_MAP_PIN;
  64:controller/IO/sensors.c ****         break;
  65:controller/IO/sensors.c ****     
  66:controller/IO/sensors.c ****     default:
  67:controller/IO/sensors.c ****         log_error("map sensor type not configured!");
  68:controller/IO/sensors.c ****         break;
  69:controller/IO/sensors.c ****     }
  70:controller/IO/sensors.c ****     map_sensor = sensor;
 285              		.loc 1 70 5 view .LVU78
 286              		.loc 1 70 16 is_stmt 0 view .LVU79
 287 001a 094B     		ldr	r3, .L27
 288 001c 1C60     		str	r4, [r3]
 289              	.LVL30:
 290              	.L19:
  71:controller/IO/sensors.c **** }
 291              		.loc 1 71 1 view .LVU80
 292 001e 10BD     		pop	{r4, pc}
 293              	.LVL31:
 294              	.L26:
  38:controller/IO/sensors.c ****         return;
 295              		.loc 1 38 9 is_stmt 1 view .LVU81
 296 0020 0848     		ldr	r0, .L27+4
 297              	.LVL32:
  38:controller/IO/sensors.c ****         return;
 298              		.loc 1 38 9 is_stmt 0 view .LVU82
 299 0022 FFF7FEFF 		bl	log_error
 300              	.LVL33:
  39:controller/IO/sensors.c ****     }
 301              		.loc 1 39 9 is_stmt 1 view .LVU83
 302 0026 FAE7     		b	.L19
 303              	.LVL34:
 304              	.L22:
  61:controller/IO/sensors.c ****         sensor->adc_value_1_bar = 4095;
 305              		.loc 1 61 9 view .LVU84
  61:controller/IO/sensors.c ****         sensor->adc_value_1_bar = 4095;
 306              		.loc 1 61 33 is_stmt 0 view .LVU85
 307 0028 0023     		movs	r3, #0
 308 002a 0380     		strh	r3, [r0]	@ movhi
  62:controller/IO/sensors.c ****         sensor->analog_channel = ANALOG_INPUT_SENSOR_MAP_PIN;
 309              		.loc 1 62 9 is_stmt 1 view .LVU86
  62:controller/IO/sensors.c ****         sensor->analog_channel = ANALOG_INPUT_SENSOR_MAP_PIN;
 310              		.loc 1 62 33 is_stmt 0 view .LVU87
 311 002c 40F6FF73 		movw	r3, #4095
 312 0030 4380     		strh	r3, [r0, #2]	@ movhi
  63:controller/IO/sensors.c ****         break;
 313              		.loc 1 63 9 is_stmt 1 view .LVU88
  63:controller/IO/sensors.c ****         break;
 314              		.loc 1 63 32 is_stmt 0 view .LVU89
 315 0032 0523     		movs	r3, #5
 316 0034 0371     		strb	r3, [r0, #4]
  64:controller/IO/sensors.c ****     
 317              		.loc 1 64 9 is_stmt 1 view .LVU90
 318 0036 F0E7     		b	.L24
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 10


 319              	.L23:
  67:controller/IO/sensors.c ****         break;
 320              		.loc 1 67 9 view .LVU91
 321 0038 0348     		ldr	r0, .L27+8
 322              	.LVL35:
  67:controller/IO/sensors.c ****         break;
 323              		.loc 1 67 9 is_stmt 0 view .LVU92
 324 003a FFF7FEFF 		bl	log_error
 325              	.LVL36:
  68:controller/IO/sensors.c ****     }
 326              		.loc 1 68 9 is_stmt 1 view .LVU93
 327 003e ECE7     		b	.L24
 328              	.L28:
 329              		.align	2
 330              	.L27:
 331 0040 00000000 		.word	map_sensor
 332 0044 00000000 		.word	.LC5
 333 0048 14000000 		.word	.LC6
 334              		.cfi_endproc
 335              	.LFE233:
 337              		.section	.rodata.sensor_map_get.str1.4,"aMS",%progbits,1
 338              		.align	2
 339              	.LC7:
 340 0000 6D617020 		.ascii	"map sensor no init!\000"
 340      73656E73 
 340      6F72206E 
 340      6F20696E 
 340      69742100 
 341              		.align	2
 342              	.LC8:
 343 0014 6D617020 		.ascii	"map sensor out of range!\000"
 343      73656E73 
 343      6F72206F 
 343      7574206F 
 343      66207261 
 344              		.section	.text.sensor_map_get,"ax",%progbits
 345              		.align	1
 346              		.global	sensor_map_get
 347              		.syntax unified
 348              		.thumb
 349              		.thumb_func
 351              	sensor_map_get:
 352              	.LFB234:
  72:controller/IO/sensors.c **** 
  73:controller/IO/sensors.c **** 
  74:controller/IO/sensors.c **** pressure_t sensor_map_get()
  75:controller/IO/sensors.c **** {
 353              		.loc 1 75 1 view -0
 354              		.cfi_startproc
 355              		@ args = 0, pretend = 0, frame = 0
 356              		@ frame_needed = 0, uses_anonymous_args = 0
 357 0000 08B5     		push	{r3, lr}
 358              		.cfi_def_cfa_offset 8
 359              		.cfi_offset 3, -8
 360              		.cfi_offset 14, -4
  76:controller/IO/sensors.c ****     if (map_sensor->adc_value_0_bar == 0 && map_sensor->adc_value_1_bar == 0)
 361              		.loc 1 76 5 view .LVU95
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 11


 362              		.loc 1 76 19 is_stmt 0 view .LVU96
 363 0002 224B     		ldr	r3, .L38
 364 0004 1B68     		ldr	r3, [r3]
 365 0006 1A88     		ldrh	r2, [r3]
 366              		.loc 1 76 8 view .LVU97
 367 0008 0AB9     		cbnz	r2, .L30
 368              		.loc 1 76 55 discriminator 1 view .LVU98
 369 000a 5A88     		ldrh	r2, [r3, #2]
 370              		.loc 1 76 42 discriminator 1 view .LVU99
 371 000c 7AB3     		cbz	r2, .L37
 372              	.L30:
  77:controller/IO/sensors.c ****     {
  78:controller/IO/sensors.c ****         log_error("map sensor no init!");
  79:controller/IO/sensors.c ****         return SENSOR_MAP_FAIL_SAFE;
  80:controller/IO/sensors.c ****     }
  81:controller/IO/sensors.c ****     
  82:controller/IO/sensors.c ****     uint16_t raw_adc_value = 0;
 373              		.loc 1 82 5 is_stmt 1 view .LVU100
 374              	.LVL37:
  83:controller/IO/sensors.c ****     raw_adc_value = analog_inputs_get_data(map_sensor->analog_channel);
 375              		.loc 1 83 5 view .LVU101
 376              		.loc 1 83 21 is_stmt 0 view .LVU102
 377 000e 1879     		ldrb	r0, [r3, #4]	@ zero_extendqisi2
 378 0010 FFF7FEFF 		bl	analog_inputs_get_data
 379              	.LVL38:
 380 0014 07EE900A 		vmov	s15, r0	@ int
 381              	.LVL39:
  84:controller/IO/sensors.c **** 
  85:controller/IO/sensors.c ****     pressure_t result = SENSOR_MAP_FAIL_SAFE;
 382              		.loc 1 85 5 is_stmt 1 view .LVU103
  86:controller/IO/sensors.c **** 
  87:controller/IO/sensors.c ****     result = mapf((float)raw_adc_value, (float)map_sensor->adc_value_0_bar, (float)map_sensor->adc_
 383              		.loc 1 87 5 view .LVU104
 384              		.loc 1 87 14 is_stmt 0 view .LVU105
 385 0018 F8EE677A 		vcvt.f32.u32	s15, s15
 386              	.LVL40:
 387              		.loc 1 87 58 view .LVU106
 388 001c 1B4B     		ldr	r3, .L38
 389 001e 1B68     		ldr	r3, [r3]
 390 0020 1A88     		ldrh	r2, [r3]
 391              		.loc 1 87 14 view .LVU107
 392 0022 07EE102A 		vmov	s14, r2	@ int
 393 0026 F8EE476A 		vcvt.f32.u32	s13, s14
 394              		.loc 1 87 94 view .LVU108
 395 002a 5B88     		ldrh	r3, [r3, #2]
 396              		.loc 1 87 14 view .LVU109
 397 002c 07EE103A 		vmov	s14, r3	@ int
 398 0030 B8EE477A 		vcvt.f32.u32	s14, s14
 399              	.LVL41:
 400              	.LBB12:
 401              	.LBI12:
  76:controller/utils/utils.h **** {
 402              		.loc 2 76 21 is_stmt 1 view .LVU110
 403              	.LBB13:
  78:controller/utils/utils.h ****     {
 404              		.loc 2 78 5 view .LVU111
  78:controller/utils/utils.h ****     {
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 12


 405              		.loc 2 78 8 is_stmt 0 view .LVU112
 406 0034 9A42     		cmp	r2, r3
 407 0036 20D0     		beq	.L35
 408              		.loc 2 82 5 is_stmt 1 view .LVU113
 409              		.loc 2 82 15 is_stmt 0 view .LVU114
 410 0038 77EEE67A 		vsub.f32	s15, s15, s13
 411              	.LVL42:
 412              		.loc 2 82 25 view .LVU115
 413 003c 9FED146A 		vldr.32	s12, .L38+4
 414 0040 67EE867A 		vmul.f32	s15, s15, s12
 415              		.loc 2 82 57 view .LVU116
 416 0044 37EE667A 		vsub.f32	s14, s14, s13
 417              	.LVL43:
 418              		.loc 2 82 47 view .LVU117
 419 0048 87EE870A 		vdiv.f32	s0, s15, s14
 420              		.loc 2 82 67 view .LVU118
 421 004c DFED117A 		vldr.32	s15, .L38+8
 422 0050 30EE270A 		vadd.f32	s0, s0, s15
 423              	.LVL44:
 424              		.loc 2 82 67 view .LVU119
 425              	.LBE13:
 426              	.LBE12:
  88:controller/IO/sensors.c **** 
  89:controller/IO/sensors.c ****     if (!IS_IN_RANGE(result, (pressure_t)0, FIRMWARE_LIMIT_MAX_MAP))
 427              		.loc 1 89 5 is_stmt 1 view .LVU120
 428              		.loc 1 89 8 is_stmt 0 view .LVU121
 429 0054 B4EEE70A 		vcmpe.f32	s0, s15
 430 0058 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 431 005c 10DB     		blt	.L33
 432              	.LVL45:
 433              	.L32:
 434              		.loc 1 89 9 discriminator 1 view .LVU122
 435 005e DFED0E7A 		vldr.32	s15, .L38+12
 436 0062 B4EEE70A 		vcmpe.f32	s0, s15
 437 0066 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 438 006a 09D8     		bhi	.L33
 439              	.LVL46:
 440              	.L29:
  90:controller/IO/sensors.c ****     {
  91:controller/IO/sensors.c ****         log_error("map sensor out of range!");
  92:controller/IO/sensors.c ****         return SENSOR_MAP_FAIL_SAFE;
  93:controller/IO/sensors.c ****     }
  94:controller/IO/sensors.c ****     return result;
  95:controller/IO/sensors.c **** }
 441              		.loc 1 95 1 view .LVU123
 442 006c 08BD     		pop	{r3, pc}
 443              	.L37:
  78:controller/IO/sensors.c ****         return SENSOR_MAP_FAIL_SAFE;
 444              		.loc 1 78 9 is_stmt 1 view .LVU124
 445 006e 0B48     		ldr	r0, .L38+16
 446 0070 FFF7FEFF 		bl	log_error
 447              	.LVL47:
  79:controller/IO/sensors.c ****     }
 448              		.loc 1 79 9 view .LVU125
  79:controller/IO/sensors.c ****     }
 449              		.loc 1 79 16 is_stmt 0 view .LVU126
 450 0074 9FED070A 		vldr.32	s0, .L38+8
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 13


 451 0078 F8E7     		b	.L29
 452              	.LVL48:
 453              	.L35:
 454              	.LBB15:
 455              	.LBB14:
  80:controller/utils/utils.h ****     }
 456              		.loc 2 80 16 view .LVU127
 457 007a 9FED060A 		vldr.32	s0, .L38+8
 458 007e EEE7     		b	.L32
 459              	.LVL49:
 460              	.L33:
  80:controller/utils/utils.h ****     }
 461              		.loc 2 80 16 view .LVU128
 462              	.LBE14:
 463              	.LBE15:
  91:controller/IO/sensors.c ****         return SENSOR_MAP_FAIL_SAFE;
 464              		.loc 1 91 9 is_stmt 1 view .LVU129
 465 0080 0748     		ldr	r0, .L38+20
 466 0082 FFF7FEFF 		bl	log_error
 467              	.LVL50:
  92:controller/IO/sensors.c ****     }
 468              		.loc 1 92 9 view .LVU130
  92:controller/IO/sensors.c ****     }
 469              		.loc 1 92 16 is_stmt 0 view .LVU131
 470 0086 9FED030A 		vldr.32	s0, .L38+8
 471 008a EFE7     		b	.L29
 472              	.L39:
 473              		.align	2
 474              	.L38:
 475 008c 00000000 		.word	map_sensor
 476 0090 0000C842 		.word	1120403456
 477 0094 00000000 		.word	0
 478 0098 0000F042 		.word	1123024896
 479 009c 00000000 		.word	.LC7
 480 00a0 14000000 		.word	.LC8
 481              		.cfi_endproc
 482              	.LFE234:
 484              		.section	.rodata.sensor_iat_init.str1.4,"aMS",%progbits,1
 485              		.align	2
 486              	.LC9:
 487 0000 69617420 		.ascii	"iat sensor type not configured!\000"
 487      73656E73 
 487      6F722074 
 487      79706520 
 487      6E6F7420 
 488              		.section	.text.sensor_iat_init,"ax",%progbits
 489              		.align	1
 490              		.global	sensor_iat_init
 491              		.syntax unified
 492              		.thumb
 493              		.thumb_func
 495              	sensor_iat_init:
 496              	.LVL51:
 497              	.LFB235:
  96:controller/IO/sensors.c **** 
  97:controller/IO/sensors.c **** void sensor_iat_init(thermistor_t *sensor, sensor_iat_type_t type)
  98:controller/IO/sensors.c **** {
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 14


 498              		.loc 1 98 1 is_stmt 1 view -0
 499              		.cfi_startproc
 500              		@ args = 0, pretend = 0, frame = 24
 501              		@ frame_needed = 0, uses_anonymous_args = 0
 502              		.loc 1 98 1 is_stmt 0 view .LVU133
 503 0000 70B5     		push	{r4, r5, r6, lr}
 504              		.cfi_def_cfa_offset 16
 505              		.cfi_offset 4, -16
 506              		.cfi_offset 5, -12
 507              		.cfi_offset 6, -8
 508              		.cfi_offset 14, -4
 509 0002 8AB0     		sub	sp, sp, #40
 510              		.cfi_def_cfa_offset 56
 511 0004 0446     		mov	r4, r0
  99:controller/IO/sensors.c ****     switch (type)
 512              		.loc 1 99 5 is_stmt 1 view .LVU134
 513 0006 E9B1     		cbz	r1, .L41
 514 0008 0129     		cmp	r1, #1
 515 000a 38D1     		bne	.L42
 516              	.LBB16:
 100:controller/IO/sensors.c ****     {
 101:controller/IO/sensors.c ****         case SENSOR_IAT_TYPE_BOSCH_816:
 102:controller/IO/sensors.c ****             resistor_init(&sensor->resistor, 10000, RESISTOR_PULL_UP, ANALOG_INPUT_SENSOR_IAT_PIN);
 517              		.loc 1 102 13 view .LVU135
 518 000c 0622     		movs	r2, #6
 519 000e 0021     		movs	r1, #0
 520              	.LVL52:
 521              		.loc 1 102 13 is_stmt 0 view .LVU136
 522 0010 9FED1D0A 		vldr.32	s0, .L45
 523 0014 FFF7FEFF 		bl	resistor_init
 524              	.LVL53:
 103:controller/IO/sensors.c ****             thermistor_conf_t bosch_816_iat_conf = 
 525              		.loc 1 103 13 is_stmt 1 view .LVU137
 526              		.loc 1 103 31 is_stmt 0 view .LVU138
 527 0018 04AD     		add	r5, sp, #16
 528 001a 1C4E     		ldr	r6, .L45+4
 529 001c 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 530 001e 0FC5     		stmia	r5!, {r0, r1, r2, r3}
 531 0020 96E80300 		ldm	r6, {r0, r1}
 532 0024 85E80300 		stm	r5, {r0, r1}
 104:controller/IO/sensors.c ****             {
 105:controller/IO/sensors.c ****                 .resistance_1 = 9395.0f,
 106:controller/IO/sensors.c ****                 .resistance_2 = 2056.0f,
 107:controller/IO/sensors.c ****                 .resistance_3 = 322.5f,
 108:controller/IO/sensors.c ****                 .tempC_1 = -10.0f,
 109:controller/IO/sensors.c ****                 .tempC_2 = 25.0f,
 110:controller/IO/sensors.c ****                 .tempC_3 = 80.0f
 111:controller/IO/sensors.c ****             };
 112:controller/IO/sensors.c ****             thermistor_init(sensor, bosch_816_iat_conf);
 533              		.loc 1 112 13 is_stmt 1 view .LVU139
 534 0028 0AAB     		add	r3, sp, #40
 535 002a 13E90700 		ldmdb	r3, {r0, r1, r2}
 536 002e 8DE80700 		stm	sp, {r0, r1, r2}
 537 0032 04AB     		add	r3, sp, #16
 538 0034 0ECB     		ldm	r3, {r1, r2, r3}
 539 0036 2046     		mov	r0, r4
 540 0038 FFF7FEFF 		bl	thermistor_init
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 15


 541              	.LVL54:
 113:controller/IO/sensors.c ****             sensor_iat = sensor;
 542              		.loc 1 113 13 view .LVU140
 543              		.loc 1 113 24 is_stmt 0 view .LVU141
 544 003c 144B     		ldr	r3, .L45+8
 545 003e 1C60     		str	r4, [r3]
 114:controller/IO/sensors.c ****             break;
 546              		.loc 1 114 13 is_stmt 1 view .LVU142
 547              	.L40:
 548              		.loc 1 114 13 is_stmt 0 view .LVU143
 549              	.LBE16:
 115:controller/IO/sensors.c ****         case SENSOR_IAT_TYPE_TEST:
 116:controller/IO/sensors.c ****             resistor_init(&sensor->resistor, 4700, RESISTOR_PULL_UP, ANALOG_INPUT_SENSOR_IAT_PIN);
 117:controller/IO/sensors.c ****             thermistor_conf_t genric_5k =
 118:controller/IO/sensors.c ****             {
 119:controller/IO/sensors.c ****                 .resistance_1 = 22.263e3f,
 120:controller/IO/sensors.c ****                 .resistance_2 = 5e3f,
 121:controller/IO/sensors.c ****                 .resistance_3 = 588.0f,
 122:controller/IO/sensors.c ****                 .tempC_1 = -10.0f,
 123:controller/IO/sensors.c ****                 .tempC_2 = 25.0f,
 124:controller/IO/sensors.c ****                 .tempC_3 = 90.0f
 125:controller/IO/sensors.c ****             };
 126:controller/IO/sensors.c ****             thermistor_init(sensor, genric_5k);
 127:controller/IO/sensors.c ****             sensor_iat = sensor;
 128:controller/IO/sensors.c ****             break;
 129:controller/IO/sensors.c ****     default:
 130:controller/IO/sensors.c ****         log_error("iat sensor type not configured!");
 131:controller/IO/sensors.c ****         break;
 132:controller/IO/sensors.c ****     }
 133:controller/IO/sensors.c **** }
 550              		.loc 1 133 1 view .LVU144
 551 0040 0AB0     		add	sp, sp, #40
 552              		.cfi_remember_state
 553              		.cfi_def_cfa_offset 16
 554              		@ sp needed
 555 0042 70BD     		pop	{r4, r5, r6, pc}
 556              	.LVL55:
 557              	.L41:
 558              		.cfi_restore_state
 559              	.LBB17:
 116:controller/IO/sensors.c ****             thermistor_conf_t genric_5k =
 560              		.loc 1 116 13 is_stmt 1 view .LVU145
 561 0044 0622     		movs	r2, #6
 562 0046 0021     		movs	r1, #0
 563              	.LVL56:
 116:controller/IO/sensors.c ****             thermistor_conf_t genric_5k =
 564              		.loc 1 116 13 is_stmt 0 view .LVU146
 565 0048 9FED120A 		vldr.32	s0, .L45+12
 566 004c FFF7FEFF 		bl	resistor_init
 567              	.LVL57:
 117:controller/IO/sensors.c ****             {
 568              		.loc 1 117 13 is_stmt 1 view .LVU147
 117:controller/IO/sensors.c ****             {
 569              		.loc 1 117 31 is_stmt 0 view .LVU148
 570 0050 0DF1100C 		add	ip, sp, #16
 571 0054 104D     		ldr	r5, .L45+16
 572 0056 0FCD     		ldmia	r5!, {r0, r1, r2, r3}
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 16


 573 0058 ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 574 005c 95E80300 		ldm	r5, {r0, r1}
 575 0060 8CE80300 		stm	ip, {r0, r1}
 126:controller/IO/sensors.c ****             sensor_iat = sensor;
 576              		.loc 1 126 13 is_stmt 1 view .LVU149
 577 0064 0AAB     		add	r3, sp, #40
 578 0066 13E90700 		ldmdb	r3, {r0, r1, r2}
 579 006a 8DE80700 		stm	sp, {r0, r1, r2}
 580 006e 04AB     		add	r3, sp, #16
 581 0070 0ECB     		ldm	r3, {r1, r2, r3}
 582 0072 2046     		mov	r0, r4
 583 0074 FFF7FEFF 		bl	thermistor_init
 584              	.LVL58:
 127:controller/IO/sensors.c ****             break;
 585              		.loc 1 127 13 view .LVU150
 127:controller/IO/sensors.c ****             break;
 586              		.loc 1 127 24 is_stmt 0 view .LVU151
 587 0078 054B     		ldr	r3, .L45+8
 588 007a 1C60     		str	r4, [r3]
 128:controller/IO/sensors.c ****     default:
 589              		.loc 1 128 13 is_stmt 1 view .LVU152
 590 007c E0E7     		b	.L40
 591              	.LVL59:
 592              	.L42:
 130:controller/IO/sensors.c ****         break;
 593              		.loc 1 130 9 view .LVU153
 594 007e 0748     		ldr	r0, .L45+20
 595              	.LVL60:
 130:controller/IO/sensors.c ****         break;
 596              		.loc 1 130 9 is_stmt 0 view .LVU154
 597 0080 FFF7FEFF 		bl	log_error
 598              	.LVL61:
 131:controller/IO/sensors.c ****     }
 599              		.loc 1 131 9 is_stmt 1 view .LVU155
 600              	.LBE17:
 601              		.loc 1 133 1 is_stmt 0 view .LVU156
 602 0084 DCE7     		b	.L40
 603              	.L46:
 604 0086 00BF     		.align	2
 605              	.L45:
 606 0088 00401C46 		.word	1176256512
 607 008c 00000000 		.word	.LANCHOR0
 608 0090 00000000 		.word	sensor_iat
 609 0094 00E09245 		.word	1167253504
 610 0098 18000000 		.word	.LANCHOR0+24
 611 009c 00000000 		.word	.LC9
 612              		.cfi_endproc
 613              	.LFE235:
 615              		.section	.rodata.sensor_iat_get.str1.4,"aMS",%progbits,1
 616              		.align	2
 617              	.LC10:
 618 0000 69617420 		.ascii	"iat sensor is null\000"
 618      73656E73 
 618      6F722069 
 618      73206E75 
 618      6C6C00
 619 0013 00       		.align	2
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 17


 620              	.LC11:
 621 0014 69617420 		.ascii	"iat sensor out of range!\000"
 621      73656E73 
 621      6F72206F 
 621      7574206F 
 621      66207261 
 622              		.section	.text.sensor_iat_get,"ax",%progbits
 623              		.align	1
 624              		.global	sensor_iat_get
 625              		.syntax unified
 626              		.thumb
 627              		.thumb_func
 629              	sensor_iat_get:
 630              	.LFB236:
 134:controller/IO/sensors.c **** 
 135:controller/IO/sensors.c **** temperature_t sensor_iat_get()
 136:controller/IO/sensors.c **** {
 631              		.loc 1 136 1 is_stmt 1 view -0
 632              		.cfi_startproc
 633              		@ args = 0, pretend = 0, frame = 0
 634              		@ frame_needed = 0, uses_anonymous_args = 0
 635 0000 08B5     		push	{r3, lr}
 636              		.cfi_def_cfa_offset 8
 637              		.cfi_offset 3, -8
 638              		.cfi_offset 14, -4
 137:controller/IO/sensors.c ****     if (sensor_iat == NULL)
 639              		.loc 1 137 5 view .LVU158
 640              		.loc 1 137 20 is_stmt 0 view .LVU159
 641 0002 104B     		ldr	r3, .L55
 642 0004 1868     		ldr	r0, [r3]
 643              		.loc 1 137 8 view .LVU160
 644 0006 80B1     		cbz	r0, .L54
 138:controller/IO/sensors.c ****     {
 139:controller/IO/sensors.c ****         log_error("iat sensor is null");
 140:controller/IO/sensors.c ****         return SENSOR_IAT_FAIL_SAFE;
 141:controller/IO/sensors.c ****     }
 142:controller/IO/sensors.c ****     temperature_t temperature = thermistor_get_temp(sensor_iat);
 645              		.loc 1 142 5 is_stmt 1 view .LVU161
 646              		.loc 1 142 33 is_stmt 0 view .LVU162
 647 0008 FFF7FEFF 		bl	thermistor_get_temp
 648              	.LVL62:
 143:controller/IO/sensors.c ****     if (!IS_IN_RANGE(temperature, FIRMWARE_LIMIT_MIN_TEMP, FIRMWARE_LIMIT_MAX_TEMP))
 649              		.loc 1 143 5 is_stmt 1 view .LVU163
 650              		.loc 1 143 8 is_stmt 0 view .LVU164
 651 000c DFED0E7A 		vldr.32	s15, .L55+4
 652 0010 B4EEE70A 		vcmpe.f32	s0, s15
 653 0014 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 654 0018 0DDB     		blt	.L50
 655              		.loc 1 143 9 discriminator 1 view .LVU165
 656 001a DFED0C7A 		vldr.32	s15, .L55+8
 657 001e B4EEE70A 		vcmpe.f32	s0, s15
 658 0022 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 659 0026 06D8     		bhi	.L50
 660              	.LVL63:
 661              	.L47:
 144:controller/IO/sensors.c ****     {
 145:controller/IO/sensors.c ****         log_error("iat sensor out of range!");
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 18


 146:controller/IO/sensors.c ****         return SENSOR_IAT_FAIL_SAFE;
 147:controller/IO/sensors.c ****     }
 148:controller/IO/sensors.c ****     return temperature;
 149:controller/IO/sensors.c **** }
 662              		.loc 1 149 1 view .LVU166
 663 0028 08BD     		pop	{r3, pc}
 664              	.L54:
 139:controller/IO/sensors.c ****         return SENSOR_IAT_FAIL_SAFE;
 665              		.loc 1 139 9 is_stmt 1 view .LVU167
 666 002a 0948     		ldr	r0, .L55+12
 667 002c FFF7FEFF 		bl	log_error
 668              	.LVL64:
 140:controller/IO/sensors.c ****     }
 669              		.loc 1 140 9 view .LVU168
 140:controller/IO/sensors.c ****     }
 670              		.loc 1 140 16 is_stmt 0 view .LVU169
 671 0030 9FED080A 		vldr.32	s0, .L55+16
 672 0034 F8E7     		b	.L47
 673              	.LVL65:
 674              	.L50:
 145:controller/IO/sensors.c ****         return SENSOR_IAT_FAIL_SAFE;
 675              		.loc 1 145 9 is_stmt 1 view .LVU170
 676 0036 0848     		ldr	r0, .L55+20
 677 0038 FFF7FEFF 		bl	log_error
 678              	.LVL66:
 146:controller/IO/sensors.c ****     }
 679              		.loc 1 146 9 view .LVU171
 146:controller/IO/sensors.c ****     }
 680              		.loc 1 146 16 is_stmt 0 view .LVU172
 681 003c 9FED050A 		vldr.32	s0, .L55+16
 682 0040 F2E7     		b	.L47
 683              	.L56:
 684 0042 00BF     		.align	2
 685              	.L55:
 686 0044 00000000 		.word	sensor_iat
 687 0048 000048C2 		.word	-1035468800
 688 004c 00001643 		.word	1125515264
 689 0050 00000000 		.word	.LC10
 690 0054 00002042 		.word	1109393408
 691 0058 14000000 		.word	.LC11
 692              		.cfi_endproc
 693              	.LFE236:
 695              		.section	.rodata.sensor_clt_init.str1.4,"aMS",%progbits,1
 696              		.align	2
 697              	.LC12:
 698 0000 636C7420 		.ascii	"clt sensor is null\000"
 698      73656E73 
 698      6F722069 
 698      73206E75 
 698      6C6C00
 699 0013 00       		.align	2
 700              	.LC13:
 701 0014 636C7420 		.ascii	"clt sensor type not configured!\000"
 701      73656E73 
 701      6F722074 
 701      79706520 
 701      6E6F7420 
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 19


 702              		.section	.text.sensor_clt_init,"ax",%progbits
 703              		.align	1
 704              		.global	sensor_clt_init
 705              		.syntax unified
 706              		.thumb
 707              		.thumb_func
 709              	sensor_clt_init:
 710              	.LVL67:
 711              	.LFB237:
 150:controller/IO/sensors.c **** 
 151:controller/IO/sensors.c **** void sensor_clt_init(thermistor_t *sensor, sensor_clt_type_t type)
 152:controller/IO/sensors.c **** {
 712              		.loc 1 152 1 is_stmt 1 view -0
 713              		.cfi_startproc
 714              		@ args = 0, pretend = 0, frame = 24
 715              		@ frame_needed = 0, uses_anonymous_args = 0
 716              		.loc 1 152 1 is_stmt 0 view .LVU174
 717 0000 70B5     		push	{r4, r5, r6, lr}
 718              		.cfi_def_cfa_offset 16
 719              		.cfi_offset 4, -16
 720              		.cfi_offset 5, -12
 721              		.cfi_offset 6, -8
 722              		.cfi_offset 14, -4
 723 0002 8AB0     		sub	sp, sp, #40
 724              		.cfi_def_cfa_offset 56
 153:controller/IO/sensors.c ****     if (sensor == NULL)
 725              		.loc 1 153 5 is_stmt 1 view .LVU175
 726              		.loc 1 153 8 is_stmt 0 view .LVU176
 727 0004 F8B1     		cbz	r0, .L64
 728 0006 0446     		mov	r4, r0
 154:controller/IO/sensors.c ****     {
 155:controller/IO/sensors.c ****         log_error("clt sensor is null");
 156:controller/IO/sensors.c ****         return;
 157:controller/IO/sensors.c ****     }
 158:controller/IO/sensors.c ****     switch (type)
 729              		.loc 1 158 5 is_stmt 1 view .LVU177
 730 0008 09B3     		cbz	r1, .L60
 731 000a 0129     		cmp	r1, #1
 732 000c 3CD1     		bne	.L61
 733              	.LBB18:
 159:controller/IO/sensors.c ****     {
 160:controller/IO/sensors.c ****     /* Actually make this a proper thing */
 161:controller/IO/sensors.c ****     case SENSOR_CLT_TYPE_NISSAN:
 162:controller/IO/sensors.c ****         resistor_init(&sensor->resistor, 10000, RESISTOR_PULL_UP, ANALOG_INPUT_SENSOR_CLT_PIN);
 734              		.loc 1 162 9 view .LVU178
 735 000e 0722     		movs	r2, #7
 736 0010 0021     		movs	r1, #0
 737              	.LVL68:
 738              		.loc 1 162 9 is_stmt 0 view .LVU179
 739 0012 9FED1F0A 		vldr.32	s0, .L65
 740 0016 FFF7FEFF 		bl	resistor_init
 741              	.LVL69:
 163:controller/IO/sensors.c ****         thermistor_conf_t nissan_clt_conf =
 742              		.loc 1 163 9 is_stmt 1 view .LVU180
 743              		.loc 1 163 27 is_stmt 0 view .LVU181
 744 001a 04AD     		add	r5, sp, #16
 745 001c 1D4E     		ldr	r6, .L65+4
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 20


 746 001e 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 747 0020 0FC5     		stmia	r5!, {r0, r1, r2, r3}
 748 0022 96E80300 		ldm	r6, {r0, r1}
 749 0026 85E80300 		stm	r5, {r0, r1}
 164:controller/IO/sensors.c ****         {
 165:controller/IO/sensors.c ****             .resistance_1 = 15700.0f,
 166:controller/IO/sensors.c ****             .resistance_2 = 2050.0f,
 167:controller/IO/sensors.c ****             .resistance_3 = 230.0f,
 168:controller/IO/sensors.c ****             .tempC_1 = -20.0f,
 169:controller/IO/sensors.c ****             .tempC_2 = 25.0f,
 170:controller/IO/sensors.c ****             .tempC_3 = 90.0f
 171:controller/IO/sensors.c ****         };
 172:controller/IO/sensors.c ****         thermistor_init(sensor, nissan_clt_conf);
 750              		.loc 1 172 9 is_stmt 1 view .LVU182
 751 002a 0AAB     		add	r3, sp, #40
 752 002c 13E90700 		ldmdb	r3, {r0, r1, r2}
 753 0030 8DE80700 		stm	sp, {r0, r1, r2}
 754 0034 04AB     		add	r3, sp, #16
 755 0036 0ECB     		ldm	r3, {r1, r2, r3}
 756 0038 2046     		mov	r0, r4
 757 003a FFF7FEFF 		bl	thermistor_init
 758              	.LVL70:
 173:controller/IO/sensors.c ****         sensor_clt = sensor;
 759              		.loc 1 173 9 view .LVU183
 760              		.loc 1 173 20 is_stmt 0 view .LVU184
 761 003e 164B     		ldr	r3, .L65+8
 762 0040 1C60     		str	r4, [r3]
 174:controller/IO/sensors.c ****         break;
 763              		.loc 1 174 9 is_stmt 1 view .LVU185
 764              	.LVL71:
 765              	.L57:
 766              		.loc 1 174 9 is_stmt 0 view .LVU186
 767              	.LBE18:
 175:controller/IO/sensors.c ****     case SENSOR_CLT_TYPE_TEST:
 176:controller/IO/sensors.c ****         resistor_init(&sensor->resistor, 4700, RESISTOR_PULL_UP, ANALOG_INPUT_SENSOR_CLT_PIN);
 177:controller/IO/sensors.c ****         thermistor_conf_t genric_5k =
 178:controller/IO/sensors.c ****         {
 179:controller/IO/sensors.c ****             .resistance_1 = 22.263e3f,
 180:controller/IO/sensors.c ****             .resistance_2 = 5e3f,
 181:controller/IO/sensors.c ****             .resistance_3 = 588.0f,
 182:controller/IO/sensors.c ****             .tempC_1 = -10.0f,
 183:controller/IO/sensors.c ****             .tempC_2 = 25.0f,
 184:controller/IO/sensors.c ****             .tempC_3 = 90.0f
 185:controller/IO/sensors.c ****         };
 186:controller/IO/sensors.c ****         thermistor_init(sensor, genric_5k);
 187:controller/IO/sensors.c ****         sensor_clt = sensor;
 188:controller/IO/sensors.c ****         break;
 189:controller/IO/sensors.c ****     default:
 190:controller/IO/sensors.c ****         log_error("clt sensor type not configured!");
 191:controller/IO/sensors.c ****         break;
 192:controller/IO/sensors.c ****     }
 193:controller/IO/sensors.c **** }
 768              		.loc 1 193 1 view .LVU187
 769 0042 0AB0     		add	sp, sp, #40
 770              		.cfi_remember_state
 771              		.cfi_def_cfa_offset 16
 772              		@ sp needed
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 21


 773 0044 70BD     		pop	{r4, r5, r6, pc}
 774              	.LVL72:
 775              	.L64:
 776              		.cfi_restore_state
 155:controller/IO/sensors.c ****         return;
 777              		.loc 1 155 9 is_stmt 1 view .LVU188
 778 0046 1548     		ldr	r0, .L65+12
 779              	.LVL73:
 155:controller/IO/sensors.c ****         return;
 780              		.loc 1 155 9 is_stmt 0 view .LVU189
 781 0048 FFF7FEFF 		bl	log_error
 782              	.LVL74:
 156:controller/IO/sensors.c ****     }
 783              		.loc 1 156 9 is_stmt 1 view .LVU190
 784 004c F9E7     		b	.L57
 785              	.LVL75:
 786              	.L60:
 787              	.LBB19:
 176:controller/IO/sensors.c ****         thermistor_conf_t genric_5k =
 788              		.loc 1 176 9 view .LVU191
 789 004e 0722     		movs	r2, #7
 790 0050 0021     		movs	r1, #0
 791              	.LVL76:
 176:controller/IO/sensors.c ****         thermistor_conf_t genric_5k =
 792              		.loc 1 176 9 is_stmt 0 view .LVU192
 793 0052 9FED130A 		vldr.32	s0, .L65+16
 794 0056 FFF7FEFF 		bl	resistor_init
 795              	.LVL77:
 177:controller/IO/sensors.c ****         {
 796              		.loc 1 177 9 is_stmt 1 view .LVU193
 177:controller/IO/sensors.c ****         {
 797              		.loc 1 177 27 is_stmt 0 view .LVU194
 798 005a 0DF1100C 		add	ip, sp, #16
 799 005e 114D     		ldr	r5, .L65+20
 800 0060 0FCD     		ldmia	r5!, {r0, r1, r2, r3}
 801 0062 ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 802 0066 95E80300 		ldm	r5, {r0, r1}
 803 006a 8CE80300 		stm	ip, {r0, r1}
 186:controller/IO/sensors.c ****         sensor_clt = sensor;
 804              		.loc 1 186 9 is_stmt 1 view .LVU195
 805 006e 0AAB     		add	r3, sp, #40
 806 0070 13E90700 		ldmdb	r3, {r0, r1, r2}
 807 0074 8DE80700 		stm	sp, {r0, r1, r2}
 808 0078 04AB     		add	r3, sp, #16
 809 007a 0ECB     		ldm	r3, {r1, r2, r3}
 810 007c 2046     		mov	r0, r4
 811 007e FFF7FEFF 		bl	thermistor_init
 812              	.LVL78:
 187:controller/IO/sensors.c ****         break;
 813              		.loc 1 187 9 view .LVU196
 187:controller/IO/sensors.c ****         break;
 814              		.loc 1 187 20 is_stmt 0 view .LVU197
 815 0082 054B     		ldr	r3, .L65+8
 816 0084 1C60     		str	r4, [r3]
 188:controller/IO/sensors.c ****     default:
 817              		.loc 1 188 9 is_stmt 1 view .LVU198
 818 0086 DCE7     		b	.L57
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 22


 819              	.LVL79:
 820              	.L61:
 190:controller/IO/sensors.c ****         break;
 821              		.loc 1 190 9 view .LVU199
 822 0088 0748     		ldr	r0, .L65+24
 823              	.LVL80:
 190:controller/IO/sensors.c ****         break;
 824              		.loc 1 190 9 is_stmt 0 view .LVU200
 825 008a FFF7FEFF 		bl	log_error
 826              	.LVL81:
 191:controller/IO/sensors.c ****     }
 827              		.loc 1 191 9 is_stmt 1 view .LVU201
 828 008e D8E7     		b	.L57
 829              	.L66:
 830              		.align	2
 831              	.L65:
 832 0090 00401C46 		.word	1176256512
 833 0094 30000000 		.word	.LANCHOR0+48
 834 0098 00000000 		.word	sensor_clt
 835 009c 00000000 		.word	.LC12
 836 00a0 00E09245 		.word	1167253504
 837 00a4 18000000 		.word	.LANCHOR0+24
 838 00a8 14000000 		.word	.LC13
 839              	.LBE19:
 840              		.cfi_endproc
 841              	.LFE237:
 843              		.section	.rodata.sensor_clt_get.str1.4,"aMS",%progbits,1
 844              		.align	2
 845              	.LC14:
 846 0000 636C7420 		.ascii	"clt sensor out of range!\000"
 846      73656E73 
 846      6F72206F 
 846      7574206F 
 846      66207261 
 847              		.section	.text.sensor_clt_get,"ax",%progbits
 848              		.align	1
 849              		.global	sensor_clt_get
 850              		.syntax unified
 851              		.thumb
 852              		.thumb_func
 854              	sensor_clt_get:
 855              	.LFB238:
 194:controller/IO/sensors.c **** 
 195:controller/IO/sensors.c **** temperature_t sensor_clt_get()
 196:controller/IO/sensors.c **** {
 856              		.loc 1 196 1 view -0
 857              		.cfi_startproc
 858              		@ args = 0, pretend = 0, frame = 0
 859              		@ frame_needed = 0, uses_anonymous_args = 0
 860 0000 08B5     		push	{r3, lr}
 861              		.cfi_def_cfa_offset 8
 862              		.cfi_offset 3, -8
 863              		.cfi_offset 14, -4
 197:controller/IO/sensors.c ****     if (sensor_clt == NULL)
 864              		.loc 1 197 5 view .LVU203
 865              		.loc 1 197 20 is_stmt 0 view .LVU204
 866 0002 104B     		ldr	r3, .L75
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 23


 867 0004 1868     		ldr	r0, [r3]
 868              		.loc 1 197 8 view .LVU205
 869 0006 80B1     		cbz	r0, .L74
 198:controller/IO/sensors.c ****     {
 199:controller/IO/sensors.c ****         log_error("clt sensor is null");
 200:controller/IO/sensors.c ****         return SENSOR_CLT_FAIL_SAFE;
 201:controller/IO/sensors.c ****     }
 202:controller/IO/sensors.c ****     temperature_t temperature = thermistor_get_temp(sensor_clt);
 870              		.loc 1 202 5 is_stmt 1 view .LVU206
 871              		.loc 1 202 33 is_stmt 0 view .LVU207
 872 0008 FFF7FEFF 		bl	thermistor_get_temp
 873              	.LVL82:
 203:controller/IO/sensors.c ****     if (!IS_IN_RANGE(temperature, FIRMWARE_LIMIT_MIN_TEMP, FIRMWARE_LIMIT_MAX_TEMP))
 874              		.loc 1 203 5 is_stmt 1 view .LVU208
 875              		.loc 1 203 8 is_stmt 0 view .LVU209
 876 000c DFED0E7A 		vldr.32	s15, .L75+4
 877 0010 B4EEE70A 		vcmpe.f32	s0, s15
 878 0014 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 879 0018 0DDB     		blt	.L70
 880              		.loc 1 203 9 discriminator 1 view .LVU210
 881 001a DFED0C7A 		vldr.32	s15, .L75+8
 882 001e B4EEE70A 		vcmpe.f32	s0, s15
 883 0022 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 884 0026 06D8     		bhi	.L70
 885              	.LVL83:
 886              	.L67:
 204:controller/IO/sensors.c ****     {
 205:controller/IO/sensors.c ****         log_error("clt sensor out of range!");
 206:controller/IO/sensors.c ****         return SENSOR_CLT_FAIL_SAFE;
 207:controller/IO/sensors.c ****     }
 208:controller/IO/sensors.c ****     return temperature;
 209:controller/IO/sensors.c **** }
 887              		.loc 1 209 1 view .LVU211
 888 0028 08BD     		pop	{r3, pc}
 889              	.L74:
 199:controller/IO/sensors.c ****         return SENSOR_CLT_FAIL_SAFE;
 890              		.loc 1 199 9 is_stmt 1 view .LVU212
 891 002a 0948     		ldr	r0, .L75+12
 892 002c FFF7FEFF 		bl	log_error
 893              	.LVL84:
 200:controller/IO/sensors.c ****     }
 894              		.loc 1 200 9 view .LVU213
 200:controller/IO/sensors.c ****     }
 895              		.loc 1 200 16 is_stmt 0 view .LVU214
 896 0030 B3EE0E0A 		vmov.f32	s0, #3.0e+1
 897 0034 F8E7     		b	.L67
 898              	.LVL85:
 899              	.L70:
 205:controller/IO/sensors.c ****         return SENSOR_CLT_FAIL_SAFE;
 900              		.loc 1 205 9 is_stmt 1 view .LVU215
 901 0036 0748     		ldr	r0, .L75+16
 902 0038 FFF7FEFF 		bl	log_error
 903              	.LVL86:
 206:controller/IO/sensors.c ****     }
 904              		.loc 1 206 9 view .LVU216
 206:controller/IO/sensors.c ****     }
 905              		.loc 1 206 16 is_stmt 0 view .LVU217
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 24


 906 003c B3EE0E0A 		vmov.f32	s0, #3.0e+1
 907 0040 F2E7     		b	.L67
 908              	.L76:
 909 0042 00BF     		.align	2
 910              	.L75:
 911 0044 00000000 		.word	sensor_clt
 912 0048 000048C2 		.word	-1035468800
 913 004c 00001643 		.word	1125515264
 914 0050 00000000 		.word	.LC12
 915 0054 00000000 		.word	.LC14
 916              		.cfi_endproc
 917              	.LFE238:
 919              		.section	.rodata.sensor_ops_init.str1.4,"aMS",%progbits,1
 920              		.align	2
 921              	.LC15:
 922 0000 6F707320 		.ascii	"ops sensor is null\000"
 922      73656E73 
 922      6F722069 
 922      73206E75 
 922      6C6C00
 923              		.section	.text.sensor_ops_init,"ax",%progbits
 924              		.align	1
 925              		.global	sensor_ops_init
 926              		.syntax unified
 927              		.thumb
 928              		.thumb_func
 930              	sensor_ops_init:
 931              	.LVL87:
 932              	.LFB239:
 210:controller/IO/sensors.c **** 
 211:controller/IO/sensors.c **** void sensor_ops_init(sensor_ops_t *sensor)
 212:controller/IO/sensors.c **** {
 933              		.loc 1 212 1 is_stmt 1 view -0
 934              		.cfi_startproc
 935              		@ args = 0, pretend = 0, frame = 0
 936              		@ frame_needed = 0, uses_anonymous_args = 0
 937              		.loc 1 212 1 is_stmt 0 view .LVU219
 938 0000 08B5     		push	{r3, lr}
 939              		.cfi_def_cfa_offset 8
 940              		.cfi_offset 3, -8
 941              		.cfi_offset 14, -4
 213:controller/IO/sensors.c ****     if (sensor == NULL)
 942              		.loc 1 213 5 is_stmt 1 view .LVU220
 943              		.loc 1 213 8 is_stmt 0 view .LVU221
 944 0002 48B1     		cbz	r0, .L81
 214:controller/IO/sensors.c ****     {
 215:controller/IO/sensors.c ****         log_error("ops sensor is null");
 216:controller/IO/sensors.c ****         return;
 217:controller/IO/sensors.c ****     }
 218:controller/IO/sensors.c ****     sensor->adc_value_threshold = 4095 / 2;
 945              		.loc 1 218 5 is_stmt 1 view .LVU222
 946              		.loc 1 218 33 is_stmt 0 view .LVU223
 947 0004 40F2FF72 		movw	r2, #2047
 948 0008 0280     		strh	r2, [r0]	@ movhi
 219:controller/IO/sensors.c ****     sensor->debounce_time_ms = 200;
 949              		.loc 1 219 5 is_stmt 1 view .LVU224
 950              		.loc 1 219 30 is_stmt 0 view .LVU225
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 25


 951 000a C822     		movs	r2, #200
 952 000c 4280     		strh	r2, [r0, #2]	@ movhi
 220:controller/IO/sensors.c ****     sensor->analog_channel = ANALOG_INPUT_SENSOR_OIL_PIN;
 953              		.loc 1 220 5 is_stmt 1 view .LVU226
 954              		.loc 1 220 28 is_stmt 0 view .LVU227
 955 000e 0822     		movs	r2, #8
 956 0010 0271     		strb	r2, [r0, #4]
 221:controller/IO/sensors.c ****     sensor_ops = sensor;
 957              		.loc 1 221 5 is_stmt 1 view .LVU228
 958              		.loc 1 221 16 is_stmt 0 view .LVU229
 959 0012 034A     		ldr	r2, .L82
 960 0014 1060     		str	r0, [r2]
 961              	.LVL88:
 962              	.L77:
 222:controller/IO/sensors.c **** }
 963              		.loc 1 222 1 view .LVU230
 964 0016 08BD     		pop	{r3, pc}
 965              	.LVL89:
 966              	.L81:
 215:controller/IO/sensors.c ****         return;
 967              		.loc 1 215 9 is_stmt 1 view .LVU231
 968 0018 0248     		ldr	r0, .L82+4
 969              	.LVL90:
 215:controller/IO/sensors.c ****         return;
 970              		.loc 1 215 9 is_stmt 0 view .LVU232
 971 001a FFF7FEFF 		bl	log_error
 972              	.LVL91:
 216:controller/IO/sensors.c ****     }
 973              		.loc 1 216 9 is_stmt 1 view .LVU233
 974 001e FAE7     		b	.L77
 975              	.L83:
 976              		.align	2
 977              	.L82:
 978 0020 00000000 		.word	sensor_ops
 979 0024 00000000 		.word	.LC15
 980              		.cfi_endproc
 981              	.LFE239:
 983              		.section	.text.sensor_ops_get,"ax",%progbits
 984              		.align	1
 985              		.global	sensor_ops_get
 986              		.syntax unified
 987              		.thumb
 988              		.thumb_func
 990              	sensor_ops_get:
 991              	.LFB240:
 223:controller/IO/sensors.c **** 
 224:controller/IO/sensors.c **** bool sensor_ops_get()
 225:controller/IO/sensors.c **** {
 992              		.loc 1 225 1 view -0
 993              		.cfi_startproc
 994              		@ args = 0, pretend = 0, frame = 0
 995              		@ frame_needed = 0, uses_anonymous_args = 0
 996 0000 10B5     		push	{r4, lr}
 997              		.cfi_def_cfa_offset 8
 998              		.cfi_offset 4, -8
 999              		.cfi_offset 14, -4
 226:controller/IO/sensors.c ****     static uint32_t last_change_time = 0;
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 26


 1000              		.loc 1 226 5 view .LVU235
 227:controller/IO/sensors.c ****     static bool last_state = false;
 1001              		.loc 1 227 5 view .LVU236
 228:controller/IO/sensors.c ****     static bool debounced_state = false;
 1002              		.loc 1 228 5 view .LVU237
 229:controller/IO/sensors.c **** 
 230:controller/IO/sensors.c ****     if (sensor_ops == NULL)
 1003              		.loc 1 230 5 view .LVU238
 1004              		.loc 1 230 20 is_stmt 0 view .LVU239
 1005 0002 144B     		ldr	r3, .L91
 1006 0004 1B68     		ldr	r3, [r3]
 1007              		.loc 1 230 8 view .LVU240
 1008 0006 03B3     		cbz	r3, .L90
 231:controller/IO/sensors.c ****     {
 232:controller/IO/sensors.c ****         log_error("ops sensor is null");
 233:controller/IO/sensors.c ****         return false;
 234:controller/IO/sensors.c ****     }
 235:controller/IO/sensors.c **** 
 236:controller/IO/sensors.c ****     uint16_t adc_value = analog_inputs_get_data(sensor_ops->analog_channel);
 1009              		.loc 1 236 5 is_stmt 1 view .LVU241
 1010              		.loc 1 236 26 is_stmt 0 view .LVU242
 1011 0008 1879     		ldrb	r0, [r3, #4]	@ zero_extendqisi2
 1012 000a FFF7FEFF 		bl	analog_inputs_get_data
 1013              	.LVL92:
 237:controller/IO/sensors.c ****     bool current_state = adc_value > sensor_ops->adc_value_threshold;
 1014              		.loc 1 237 5 is_stmt 1 view .LVU243
 1015              		.loc 1 237 48 is_stmt 0 view .LVU244
 1016 000e 114B     		ldr	r3, .L91
 1017 0010 1B68     		ldr	r3, [r3]
 1018 0012 1C88     		ldrh	r4, [r3]
 1019              		.loc 1 237 10 view .LVU245
 1020 0014 8442     		cmp	r4, r0
 1021 0016 2CBF     		ite	cs
 1022 0018 0024     		movcs	r4, #0
 1023 001a 0124     		movcc	r4, #1
 1024              	.LVL93:
 238:controller/IO/sensors.c **** 
 239:controller/IO/sensors.c ****     uint32_t now = get_time_ms();
 1025              		.loc 1 239 5 is_stmt 1 view .LVU246
 1026              		.loc 1 239 20 is_stmt 0 view .LVU247
 1027 001c FFF7FEFF 		bl	get_time_ms
 1028              	.LVL94:
 240:controller/IO/sensors.c **** 
 241:controller/IO/sensors.c ****     if (current_state != last_state)
 1029              		.loc 1 241 5 is_stmt 1 view .LVU248
 1030              		.loc 1 241 23 is_stmt 0 view .LVU249
 1031 0020 0D4B     		ldr	r3, .L91+4
 1032 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1033              		.loc 1 241 8 view .LVU250
 1034 0024 A342     		cmp	r3, r4
 1035 0026 03D0     		beq	.L87
 242:controller/IO/sensors.c ****     {
 243:controller/IO/sensors.c ****         /* State changed, reset debounce timer */
 244:controller/IO/sensors.c ****         last_change_time = now;
 1036              		.loc 1 244 9 is_stmt 1 view .LVU251
 1037              		.loc 1 244 26 is_stmt 0 view .LVU252
 1038 0028 0C4B     		ldr	r3, .L91+8
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 27


 1039 002a 1860     		str	r0, [r3]
 245:controller/IO/sensors.c ****         last_state = current_state;
 1040              		.loc 1 245 9 is_stmt 1 view .LVU253
 1041              		.loc 1 245 20 is_stmt 0 view .LVU254
 1042 002c 0A4B     		ldr	r3, .L91+4
 1043 002e 1C70     		strb	r4, [r3]
 1044              	.L87:
 246:controller/IO/sensors.c ****     }
 247:controller/IO/sensors.c **** 
 248:controller/IO/sensors.c ****     if ((now - last_change_time) >= sensor_ops->debounce_time_ms)
 1045              		.loc 1 248 5 is_stmt 1 view .LVU255
 1046              		.loc 1 248 14 is_stmt 0 view .LVU256
 1047 0030 0A4B     		ldr	r3, .L91+8
 1048 0032 1B68     		ldr	r3, [r3]
 1049 0034 C01A     		subs	r0, r0, r3
 1050              	.LVL95:
 1051              		.loc 1 248 47 view .LVU257
 1052 0036 074B     		ldr	r3, .L91
 1053 0038 1B68     		ldr	r3, [r3]
 1054 003a 5B88     		ldrh	r3, [r3, #2]
 1055              		.loc 1 248 8 view .LVU258
 1056 003c 9842     		cmp	r0, r3
 1057 003e 01D3     		bcc	.L88
 249:controller/IO/sensors.c ****     {
 250:controller/IO/sensors.c ****         /* Debounce period passed, accept new state */
 251:controller/IO/sensors.c ****         debounced_state = current_state;
 1058              		.loc 1 251 9 is_stmt 1 view .LVU259
 1059              		.loc 1 251 25 is_stmt 0 view .LVU260
 1060 0040 074B     		ldr	r3, .L91+12
 1061 0042 1C70     		strb	r4, [r3]
 1062              	.L88:
 252:controller/IO/sensors.c ****     }
 253:controller/IO/sensors.c **** 
 254:controller/IO/sensors.c ****     return debounced_state;
 1063              		.loc 1 254 5 is_stmt 1 view .LVU261
 1064              		.loc 1 254 12 is_stmt 0 view .LVU262
 1065 0044 064B     		ldr	r3, .L91+12
 1066 0046 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 1067              	.LVL96:
 1068              	.L86:
 255:controller/IO/sensors.c **** }
 1069              		.loc 1 255 1 view .LVU263
 1070 0048 10BD     		pop	{r4, pc}
 1071              	.L90:
 232:controller/IO/sensors.c ****         return false;
 1072              		.loc 1 232 9 is_stmt 1 view .LVU264
 1073 004a 0648     		ldr	r0, .L91+16
 1074 004c FFF7FEFF 		bl	log_error
 1075              	.LVL97:
 233:controller/IO/sensors.c ****     }
 1076              		.loc 1 233 9 view .LVU265
 233:controller/IO/sensors.c ****     }
 1077              		.loc 1 233 16 is_stmt 0 view .LVU266
 1078 0050 0020     		movs	r0, #0
 1079 0052 F9E7     		b	.L86
 1080              	.L92:
 1081              		.align	2
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 28


 1082              	.L91:
 1083 0054 00000000 		.word	sensor_ops
 1084 0058 00000000 		.word	last_state.2
 1085 005c 00000000 		.word	last_change_time.1
 1086 0060 00000000 		.word	debounced_state.0
 1087 0064 00000000 		.word	.LC15
 1088              		.cfi_endproc
 1089              	.LFE240:
 1091              		.section	.bss.debounced_state.0,"aw",%nobits
 1094              	debounced_state.0:
 1095 0000 00       		.space	1
 1096              		.section	.bss.last_change_time.1,"aw",%nobits
 1097              		.align	2
 1100              	last_change_time.1:
 1101 0000 00000000 		.space	4
 1102              		.section	.bss.last_state.2,"aw",%nobits
 1105              	last_state.2:
 1106 0000 00       		.space	1
 1107              		.section	.bss.sensor_ops,"aw",%nobits
 1108              		.align	2
 1111              	sensor_ops:
 1112 0000 00000000 		.space	4
 1113              		.section	.bss.sensor_clt,"aw",%nobits
 1114              		.align	2
 1117              	sensor_clt:
 1118 0000 00000000 		.space	4
 1119              		.section	.bss.sensor_iat,"aw",%nobits
 1120              		.align	2
 1123              	sensor_iat:
 1124 0000 00000000 		.space	4
 1125              		.section	.bss.map_sensor,"aw",%nobits
 1126              		.align	2
 1129              	map_sensor:
 1130 0000 00000000 		.space	4
 1131              		.section	.rodata
 1132              		.align	2
 1133              		.set	.LANCHOR0,. + 0
 1134              	.LC0:
 1135 0000 000020C1 		.word	-1054867456
 1136 0004 0000C841 		.word	1103626240
 1137 0008 0000A042 		.word	1117782016
 1138 000c 00CC1246 		.word	1175636992
 1139 0010 00800045 		.word	1157660672
 1140 0014 0040A143 		.word	1134641152
 1141              	.LC1:
 1142 0018 000020C1 		.word	-1054867456
 1143 001c 0000C841 		.word	1103626240
 1144 0020 0000B442 		.word	1119092736
 1145 0024 00EEAD46 		.word	1185803776
 1146 0028 00409C45 		.word	1167867904
 1147 002c 00001344 		.word	1142095872
 1148              	.LC2:
 1149 0030 0000A0C1 		.word	-1046478848
 1150 0034 0000C841 		.word	1103626240
 1151 0038 0000B442 		.word	1119092736
 1152 003c 00507546 		.word	1182093312
 1153 0040 00200045 		.word	1157636096
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 29


 1154 0044 00006643 		.word	1130758144
 1155              		.text
 1156              	.Letext0:
 1157              		.file 3 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 1158              		.file 4 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 1159              		.file 5 "controller/types.h"
 1160              		.file 6 "controller/IO/analog_inputs.h"
 1161              		.file 7 "controller/IO/resistor.h"
 1162              		.file 8 "controller/IO/thermistor.h"
 1163              		.file 9 "controller/IO/sensors.h"
 1164              		.file 10 "controller/utils/error_handling.h"
 1165              		.file 11 "controller/utils/timing.h"
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 30


DEFINED SYMBOLS
                            *ABS*:00000000 sensors.c
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:21     .rodata.sensor_tps_get.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:28     .text.sensor_tps_get:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:34     .text.sensor_tps_get:00000000 sensor_tps_get
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:228    .text.sensor_tps_get:000000d8 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:237    .rodata.sensor_map_init.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:244    .text.sensor_map_init:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:250    .text.sensor_map_init:00000000 sensor_map_init
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:331    .text.sensor_map_init:00000040 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1129   .bss.map_sensor:00000000 map_sensor
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:338    .rodata.sensor_map_get.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:345    .text.sensor_map_get:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:351    .text.sensor_map_get:00000000 sensor_map_get
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:475    .text.sensor_map_get:0000008c $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:485    .rodata.sensor_iat_init.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:489    .text.sensor_iat_init:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:495    .text.sensor_iat_init:00000000 sensor_iat_init
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:606    .text.sensor_iat_init:00000088 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1123   .bss.sensor_iat:00000000 sensor_iat
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:616    .rodata.sensor_iat_get.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:623    .text.sensor_iat_get:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:629    .text.sensor_iat_get:00000000 sensor_iat_get
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:686    .text.sensor_iat_get:00000044 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:696    .rodata.sensor_clt_init.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:703    .text.sensor_clt_init:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:709    .text.sensor_clt_init:00000000 sensor_clt_init
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:832    .text.sensor_clt_init:00000090 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1117   .bss.sensor_clt:00000000 sensor_clt
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:844    .rodata.sensor_clt_get.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:848    .text.sensor_clt_get:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:854    .text.sensor_clt_get:00000000 sensor_clt_get
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:911    .text.sensor_clt_get:00000044 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:920    .rodata.sensor_ops_init.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:924    .text.sensor_ops_init:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:930    .text.sensor_ops_init:00000000 sensor_ops_init
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:978    .text.sensor_ops_init:00000020 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1111   .bss.sensor_ops:00000000 sensor_ops
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:984    .text.sensor_ops_get:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:990    .text.sensor_ops_get:00000000 sensor_ops_get
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1083   .text.sensor_ops_get:00000054 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1105   .bss.last_state.2:00000000 last_state.2
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1100   .bss.last_change_time.1:00000000 last_change_time.1
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1094   .bss.debounced_state.0:00000000 debounced_state.0
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1095   .bss.debounced_state.0:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1097   .bss.last_change_time.1:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1106   .bss.last_state.2:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1108   .bss.sensor_ops:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1114   .bss.sensor_clt:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1120   .bss.sensor_iat:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1126   .bss.map_sensor:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s:1132   .rodata:00000000 $d

UNDEFINED SYMBOLS
analog_inputs_get_data
log_error
resistor_init
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccr72rKt.s 			page 31


thermistor_init
thermistor_get_temp
get_time_ms
