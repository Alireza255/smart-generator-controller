ARM GAS  C:\Users\alireza\AppData\Local\Temp\cch4iYlf.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"tables.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "controller/tables.c"
  20              		.section	.text.table_2d_get_value,"ax",%progbits
  21              		.align	1
  22              		.global	table_2d_get_value
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	table_2d_get_value:
  28              	.LVL0:
  29              	.LFB232:
   1:controller/tables.c **** #include "tables.h"
   2:controller/tables.c **** #include "error_handling.h"
   3:controller/tables.c **** #include "utils.h"
   4:controller/tables.c **** 
   5:controller/tables.c **** float table_2d_get_value(table_2d_t *table, float x, float y)
   6:controller/tables.c **** {
  30              		.loc 1 6 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 6 1 is_stmt 0 view .LVU1
  35 0000 00B5     		push	{lr}
  36              		.cfi_def_cfa_offset 4
  37              		.cfi_offset 14, -4
   7:controller/tables.c ****     uint8_t num_x_bins = sizeof(table->x_bins) / sizeof(table->x_bins[0]);
  38              		.loc 1 7 5 is_stmt 1 view .LVU2
  39              	.LVL1:
   8:controller/tables.c ****     uint8_t num_y_bins = sizeof(table->y_bins) / sizeof(table->y_bins[0]);
  40              		.loc 1 8 5 view .LVU3
   9:controller/tables.c ****     x = CLAMP(x, table->x_bins[0], table->x_bins[num_x_bins - 1]);
  41              		.loc 1 9 5 view .LVU4
  42              		.loc 1 9 9 is_stmt 0 view .LVU5
  43 0002 00F58063 		add	r3, r0, #1024
  44 0006 D3ED006A 		vldr.32	s13, [r3]
  45 000a F4EEC06A 		vcmpe.f32	s13, s0
  46 000e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  47 0012 0ADC     		bgt	.L2
  48              		.loc 1 9 9 discriminator 2 view .LVU6
  49 0014 00F23C43 		addw	r3, r0, #1084
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cch4iYlf.s 			page 2


  50 0018 D3ED006A 		vldr.32	s13, [r3]
  51 001c F4EEC06A 		vcmpe.f32	s13, s0
  52 0020 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  53 0024 01D4     		bmi	.L2
  54              		.loc 1 9 9 discriminator 5 view .LVU7
  55 0026 F0EE406A 		vmov.f32	s13, s0
  56              	.L2:
  57              	.LVL2:
  10:controller/tables.c ****     y = CLAMP(y, table->y_bins[0], table->y_bins[num_y_bins - 1]);
  58              		.loc 1 10 5 is_stmt 1 view .LVU8
  59              		.loc 1 10 9 is_stmt 0 view .LVU9
  60 002a 00F58863 		add	r3, r0, #1088
  61 002e 93ED007A 		vldr.32	s14, [r3]
  62 0032 B4EEE07A 		vcmpe.f32	s14, s1
  63 0036 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  64 003a 0ADC     		bgt	.L3
  65              		.loc 1 10 9 discriminator 2 view .LVU10
  66 003c 00F27C43 		addw	r3, r0, #1148
  67 0040 93ED007A 		vldr.32	s14, [r3]
  68 0044 B4EEE07A 		vcmpe.f32	s14, s1
  69 0048 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  70 004c 01D4     		bmi	.L3
  71              		.loc 1 10 9 discriminator 5 view .LVU11
  72 004e B0EE607A 		vmov.f32	s14, s1
  73              	.L3:
  74              	.LVL3:
  11:controller/tables.c **** 
  12:controller/tables.c ****     // Find x_bin (lower index)
  13:controller/tables.c ****     uint8_t x_bin = 0;
  75              		.loc 1 13 5 is_stmt 1 view .LVU12
  14:controller/tables.c ****     while (x_bin < num_x_bins - 1 && x >= table->x_bins[x_bin + 1])
  76              		.loc 1 14 5 view .LVU13
  13:controller/tables.c ****     while (x_bin < num_x_bins - 1 && x >= table->x_bins[x_bin + 1])
  77              		.loc 1 13 13 is_stmt 0 view .LVU14
  78 0052 0023     		movs	r3, #0
  79              		.loc 1 14 11 view .LVU15
  80 0054 01E0     		b	.L4
  81              	.LVL4:
  82              	.L6:
  15:controller/tables.c ****     {
  16:controller/tables.c ****         x_bin++;
  83              		.loc 1 16 9 is_stmt 1 view .LVU16
  84              		.loc 1 16 14 is_stmt 0 view .LVU17
  85 0056 0133     		adds	r3, r3, #1
  86              	.LVL5:
  87              		.loc 1 16 14 view .LVU18
  88 0058 DBB2     		uxtb	r3, r3
  89              	.LVL6:
  90              	.L4:
  14:controller/tables.c ****     {
  91              		.loc 1 14 35 is_stmt 1 view .LVU19
  92 005a 0E2B     		cmp	r3, #14
  93 005c 0AD8     		bhi	.L5
  14:controller/tables.c ****     {
  94              		.loc 1 14 56 is_stmt 0 discriminator 1 view .LVU20
  95 005e 03F20112 		addw	r2, r3, #257
  96 0062 00EB8202 		add	r2, r0, r2, lsl #2
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cch4iYlf.s 			page 3


  97 0066 D2ED007A 		vldr.32	s15, [r2]
  14:controller/tables.c ****     {
  98              		.loc 1 14 35 discriminator 1 view .LVU21
  99 006a F4EEE67A 		vcmpe.f32	s15, s13
 100 006e F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 101 0072 F0D9     		bls	.L6
 102              	.L5:
  17:controller/tables.c ****     }
  18:controller/tables.c ****     uint8_t x_bin_next = (x_bin < num_x_bins - 1) ? x_bin + 1 : x_bin;
 103              		.loc 1 18 5 is_stmt 1 view .LVU22
 104              		.loc 1 18 13 is_stmt 0 view .LVU23
 105 0074 0E2B     		cmp	r3, #14
 106 0076 14D8     		bhi	.L14
 107              		.loc 1 18 13 discriminator 1 view .LVU24
 108 0078 03F1010C 		add	ip, r3, #1
 109 007c 5FFA8CFC 		uxtb	ip, ip
 110              	.L7:
 111              	.LVL7:
  19:controller/tables.c **** 
  20:controller/tables.c ****     // Find y_bin (lower index)
  21:controller/tables.c ****     uint8_t y_bin = 0;
 112              		.loc 1 21 5 is_stmt 1 view .LVU25
  22:controller/tables.c ****     while (y_bin < num_y_bins - 1 && y >= table->y_bins[y_bin + 1])
 113              		.loc 1 22 5 view .LVU26
  21:controller/tables.c ****     while (y_bin < num_y_bins - 1 && y >= table->y_bins[y_bin + 1])
 114              		.loc 1 21 13 is_stmt 0 view .LVU27
 115 0080 0022     		movs	r2, #0
 116              	.LVL8:
 117              	.L8:
 118              		.loc 1 22 35 is_stmt 1 view .LVU28
 119 0082 0E2A     		cmp	r2, #14
 120 0084 0FD8     		bhi	.L9
 121              		.loc 1 22 56 is_stmt 0 discriminator 1 view .LVU29
 122 0086 02F21111 		addw	r1, r2, #273
 123 008a 00EB8101 		add	r1, r0, r1, lsl #2
 124 008e D1ED007A 		vldr.32	s15, [r1]
 125              		.loc 1 22 35 discriminator 1 view .LVU30
 126 0092 F4EEC77A 		vcmpe.f32	s15, s14
 127 0096 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 128 009a 04D8     		bhi	.L9
  23:controller/tables.c ****     {
  24:controller/tables.c ****         y_bin++;
 129              		.loc 1 24 9 is_stmt 1 view .LVU31
 130              		.loc 1 24 14 is_stmt 0 view .LVU32
 131 009c 0132     		adds	r2, r2, #1
 132              	.LVL9:
 133              		.loc 1 24 14 view .LVU33
 134 009e D2B2     		uxtb	r2, r2
 135              	.LVL10:
 136              		.loc 1 24 14 view .LVU34
 137 00a0 EFE7     		b	.L8
 138              	.LVL11:
 139              	.L14:
  18:controller/tables.c **** 
 140              		.loc 1 18 13 discriminator 2 view .LVU35
 141 00a2 9C46     		mov	ip, r3
 142 00a4 ECE7     		b	.L7
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cch4iYlf.s 			page 4


 143              	.LVL12:
 144              	.L9:
  25:controller/tables.c ****     }
  26:controller/tables.c ****     uint8_t y_bin_next = (y_bin < num_y_bins - 1) ? y_bin + 1 : y_bin;
 145              		.loc 1 26 5 is_stmt 1 view .LVU36
 146              		.loc 1 26 13 is_stmt 0 view .LVU37
 147 00a6 0E2A     		cmp	r2, #14
 148 00a8 02D8     		bhi	.L15
 149              		.loc 1 26 13 discriminator 1 view .LVU38
 150 00aa 511C     		adds	r1, r2, #1
 151 00ac C9B2     		uxtb	r1, r1
 152 00ae 00E0     		b	.L11
 153              	.L15:
 154              		.loc 1 26 13 discriminator 2 view .LVU39
 155 00b0 1146     		mov	r1, r2
 156              	.L11:
 157              	.LVL13:
  27:controller/tables.c **** 
  28:controller/tables.c ****     // Get bin edges
  29:controller/tables.c ****     float x0 = table->x_bins[x_bin];
 158              		.loc 1 29 5 is_stmt 1 view .LVU40
 159              		.loc 1 29 11 is_stmt 0 view .LVU41
 160 00b2 03F5807E 		add	lr, r3, #256
 161 00b6 00EB8E0E 		add	lr, r0, lr, lsl #2
 162 00ba 9EED004A 		vldr.32	s8, [lr]
 163              	.LVL14:
  30:controller/tables.c ****     float x1 = table->x_bins[x_bin_next];
 164              		.loc 1 30 5 is_stmt 1 view .LVU42
 165              		.loc 1 30 11 is_stmt 0 view .LVU43
 166 00be 0CF5807E 		add	lr, ip, #256
 167 00c2 00EB8E0E 		add	lr, r0, lr, lsl #2
 168 00c6 9EED005A 		vldr.32	s10, [lr]
 169              	.LVL15:
  31:controller/tables.c ****     float y0 = table->y_bins[y_bin];
 170              		.loc 1 31 5 is_stmt 1 view .LVU44
 171              		.loc 1 31 11 is_stmt 0 view .LVU45
 172 00ca 02F5887E 		add	lr, r2, #272
 173 00ce 00EB8E0E 		add	lr, r0, lr, lsl #2
 174 00d2 DEED004A 		vldr.32	s9, [lr]
 175              	.LVL16:
  32:controller/tables.c ****     float y1 = table->y_bins[y_bin_next];
 176              		.loc 1 32 5 is_stmt 1 view .LVU46
 177              		.loc 1 32 11 is_stmt 0 view .LVU47
 178 00d6 01F5887E 		add	lr, r1, #272
 179 00da 00EB8E0E 		add	lr, r0, lr, lsl #2
 180 00de 9EED006A 		vldr.32	s12, [lr]
 181              	.LVL17:
  33:controller/tables.c **** 
  34:controller/tables.c ****     // Get table values at corners
  35:controller/tables.c ****     float q11 = table->data[x_bin][y_bin];
 182              		.loc 1 35 5 is_stmt 1 view .LVU48
 183              		.loc 1 35 11 is_stmt 0 view .LVU49
 184 00e2 02EB031E 		add	lr, r2, r3, lsl #4
 185 00e6 00EB8E0E 		add	lr, r0, lr, lsl #2
 186 00ea DEED007A 		vldr.32	s15, [lr]
 187              	.LVL18:
  36:controller/tables.c ****     float q21 = table->data[x_bin_next][y_bin];
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cch4iYlf.s 			page 5


 188              		.loc 1 36 5 is_stmt 1 view .LVU50
 189              		.loc 1 36 11 is_stmt 0 view .LVU51
 190 00ee 02EB0C12 		add	r2, r2, ip, lsl #4
 191              	.LVL19:
 192              		.loc 1 36 11 view .LVU52
 193 00f2 00EB8202 		add	r2, r0, r2, lsl #2
 194 00f6 D2ED005A 		vldr.32	s11, [r2]
 195              	.LVL20:
  37:controller/tables.c ****     float q12 = table->data[x_bin][y_bin_next];
 196              		.loc 1 37 5 is_stmt 1 view .LVU53
 197              		.loc 1 37 11 is_stmt 0 view .LVU54
 198 00fa 01EB0313 		add	r3, r1, r3, lsl #4
 199              	.LVL21:
 200              		.loc 1 37 11 view .LVU55
 201 00fe 00EB8303 		add	r3, r0, r3, lsl #2
 202 0102 93ED003A 		vldr.32	s6, [r3]
 203              	.LVL22:
  38:controller/tables.c ****     float q22 = table->data[x_bin_next][y_bin_next];
 204              		.loc 1 38 5 is_stmt 1 view .LVU56
 205              		.loc 1 38 11 is_stmt 0 view .LVU57
 206 0106 01EB0C11 		add	r1, r1, ip, lsl #4
 207              	.LVL23:
 208              		.loc 1 38 11 view .LVU58
 209 010a 00EB8100 		add	r0, r0, r1, lsl #2
 210              	.LVL24:
 211              		.loc 1 38 11 view .LVU59
 212 010e D0ED003A 		vldr.32	s7, [r0]
 213              	.LVL25:
  39:controller/tables.c **** 
  40:controller/tables.c ****     // Handle edge cases (avoid division by zero)
  41:controller/tables.c ****     float x_frac = (x1 != x0) ? (x - x0) / (x1 - x0) : 0.0f;
 214              		.loc 1 41 5 is_stmt 1 view .LVU60
 215              		.loc 1 41 54 is_stmt 0 view .LVU61
 216 0112 B4EE454A 		vcmp.f32	s8, s10
 217 0116 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 218 011a 06D0     		beq	.L16
 219              		.loc 1 41 36 discriminator 1 view .LVU62
 220 011c 76EEC46A 		vsub.f32	s13, s13, s8
 221              	.LVL26:
 222              		.loc 1 41 48 discriminator 1 view .LVU63
 223 0120 35EE445A 		vsub.f32	s10, s10, s8
 224              	.LVL27:
 225              		.loc 1 41 54 discriminator 1 view .LVU64
 226 0124 86EE850A 		vdiv.f32	s0, s13, s10
 227 0128 01E0     		b	.L12
 228              	.LVL28:
 229              	.L16:
 230              		.loc 1 41 54 discriminator 2 view .LVU65
 231 012a 9FED170A 		vldr.32	s0, .L19
 232              	.LVL29:
 233              	.L12:
  42:controller/tables.c ****     float y_frac = (y1 != y0) ? (y - y0) / (y1 - y0) : 0.0f;
 234              		.loc 1 42 5 is_stmt 1 view .LVU66
 235              		.loc 1 42 54 is_stmt 0 view .LVU67
 236 012e F4EE464A 		vcmp.f32	s9, s12
 237 0132 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 238 0136 06D0     		beq	.L17
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cch4iYlf.s 			page 6


 239              		.loc 1 42 36 discriminator 1 view .LVU68
 240 0138 37EE647A 		vsub.f32	s14, s14, s9
 241              	.LVL30:
 242              		.loc 1 42 48 discriminator 1 view .LVU69
 243 013c 76EE646A 		vsub.f32	s13, s12, s9
 244              		.loc 1 42 54 discriminator 1 view .LVU70
 245 0140 87EE266A 		vdiv.f32	s12, s14, s13
 246              	.LVL31:
 247              		.loc 1 42 54 discriminator 1 view .LVU71
 248 0144 01E0     		b	.L13
 249              	.LVL32:
 250              	.L17:
 251              		.loc 1 42 54 discriminator 2 view .LVU72
 252 0146 9FED106A 		vldr.32	s12, .L19
 253              	.LVL33:
 254              	.L13:
  43:controller/tables.c **** 
  44:controller/tables.c ****     // Bilinear interpolation
  45:controller/tables.c ****     float interp =
 255              		.loc 1 45 5 is_stmt 1 view .LVU73
  46:controller/tables.c ****         q11 * (1 - x_frac) * (1 - y_frac) +
 256              		.loc 1 46 18 is_stmt 0 view .LVU74
 257 014a B7EE007A 		vmov.f32	s14, #1.0e+0
 258 014e 77EE406A 		vsub.f32	s13, s14, s0
 259              		.loc 1 46 13 view .LVU75
 260 0152 66EEA77A 		vmul.f32	s15, s13, s15
 261              	.LVL34:
 262              		.loc 1 46 33 view .LVU76
 263 0156 37EE467A 		vsub.f32	s14, s14, s12
 264              		.loc 1 46 28 view .LVU77
 265 015a 67EE877A 		vmul.f32	s15, s15, s14
  47:controller/tables.c ****         q21 * x_frac * (1 - y_frac) +
 266              		.loc 1 47 13 view .LVU78
 267 015e 60EE255A 		vmul.f32	s11, s0, s11
 268              	.LVL35:
 269              		.loc 1 47 22 view .LVU79
 270 0162 27EE257A 		vmul.f32	s14, s14, s11
  46:controller/tables.c ****         q11 * (1 - x_frac) * (1 - y_frac) +
 271              		.loc 1 46 43 view .LVU80
 272 0166 77EE877A 		vadd.f32	s15, s15, s14
  48:controller/tables.c ****         q12 * (1 - x_frac) * y_frac +
 273              		.loc 1 48 13 view .LVU81
 274 016a 66EE836A 		vmul.f32	s13, s13, s6
 275              		.loc 1 48 28 view .LVU82
 276 016e 66EE866A 		vmul.f32	s13, s13, s12
  47:controller/tables.c ****         q21 * x_frac * (1 - y_frac) +
 277              		.loc 1 47 37 view .LVU83
 278 0172 77EEA67A 		vadd.f32	s15, s15, s13
  49:controller/tables.c ****         q22 * x_frac * y_frac;
 279              		.loc 1 49 13 view .LVU84
 280 0176 20EE230A 		vmul.f32	s0, s0, s7
 281              	.LVL36:
 282              		.loc 1 49 22 view .LVU85
 283 017a 20EE060A 		vmul.f32	s0, s0, s12
 284              	.LVL37:
  50:controller/tables.c **** 
  51:controller/tables.c ****     return interp;
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cch4iYlf.s 			page 7


 285              		.loc 1 51 5 is_stmt 1 view .LVU86
  52:controller/tables.c **** }
 286              		.loc 1 52 1 is_stmt 0 view .LVU87
 287 017e 37EE800A 		vadd.f32	s0, s15, s0
 288              	.LVL38:
 289              		.loc 1 52 1 view .LVU88
 290 0182 5DF804FB 		ldr	pc, [sp], #4
 291              	.L20:
 292 0186 00BF     		.align	2
 293              	.L19:
 294 0188 00000000 		.word	0
 295              		.cfi_endproc
 296              	.LFE232:
 298              		.text
 299              	.Letext0:
 300              		.file 2 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 301              		.file 3 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 302              		.file 4 "controller/tables.h"
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cch4iYlf.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 tables.c
C:\Users\alireza\AppData\Local\Temp\cch4iYlf.s:21     .text.table_2d_get_value:00000000 $t
C:\Users\alireza\AppData\Local\Temp\cch4iYlf.s:27     .text.table_2d_get_value:00000000 table_2d_get_value
C:\Users\alireza\AppData\Local\Temp\cch4iYlf.s:294    .text.table_2d_get_value:00000188 $d

NO UNDEFINED SYMBOLS
