ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"ignition.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "controller/engine_cycle/ignition.c"
  20              		.section	.rodata.ignition_coil_begin_charge.str1.4,"aMS",%progbits,1
  21              		.align	2
  22              	.LC0:
  23 0000 556E6B6F 		.ascii	"Unkown ignition output\000"
  23      776E2069 
  23      676E6974 
  23      696F6E20 
  23      6F757470 
  24              		.section	.text.ignition_coil_begin_charge,"ax",%progbits
  25              		.align	1
  26              		.global	ignition_coil_begin_charge
  27              		.syntax unified
  28              		.thumb
  29              		.thumb_func
  31              	ignition_coil_begin_charge:
  32              	.LVL0:
  33              	.LFB231:
   1:controller/engine_cycle/ignition.c **** #include "ignition.h"
   2:controller/engine_cycle/ignition.c **** 
   3:controller/engine_cycle/ignition.c **** ignition_output_pin_s ignition_outputs[IGNITION_MAX_OUTPUTS] = {0};
   4:controller/engine_cycle/ignition.c **** 
   5:controller/engine_cycle/ignition.c **** volatile ignition_coil_state_e ignition_coil_state[IGNITION_MAX_OUTPUTS] = {0};
   6:controller/engine_cycle/ignition.c **** 
   7:controller/engine_cycle/ignition.c **** uint8_t ignition_order[IGNITION_MAX_OUTPUTS] = {0};
   8:controller/engine_cycle/ignition.c **** 
   9:controller/engine_cycle/ignition.c **** static volatile bool spark_is_in_progress = false;
  10:controller/engine_cycle/ignition.c **** 
  11:controller/engine_cycle/ignition.c **** 
  12:controller/engine_cycle/ignition.c **** void ignition_init(ignition_output_conf_s *output_conf)
  13:controller/engine_cycle/ignition.c **** {
  14:controller/engine_cycle/ignition.c ****     if (output_conf == NULL)
  15:controller/engine_cycle/ignition.c ****     {
  16:controller/engine_cycle/ignition.c ****         log_error("ignition init failed. No output config");
  17:controller/engine_cycle/ignition.c ****         return;
  18:controller/engine_cycle/ignition.c ****     }
  19:controller/engine_cycle/ignition.c **** 
  20:controller/engine_cycle/ignition.c **** 
  21:controller/engine_cycle/ignition.c ****     switch (configuration.firing_order)
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 2


  22:controller/engine_cycle/ignition.c ****     {
  23:controller/engine_cycle/ignition.c ****         case FO_1342:
  24:controller/engine_cycle/ignition.c ****             engine.cylinder_count = 4;
  25:controller/engine_cycle/ignition.c ****             ignition_order[0] = 1;
  26:controller/engine_cycle/ignition.c ****             ignition_order[1] = 3;
  27:controller/engine_cycle/ignition.c ****             ignition_order[2] = 4;
  28:controller/engine_cycle/ignition.c ****             ignition_order[3] = 2;
  29:controller/engine_cycle/ignition.c ****         break;
  30:controller/engine_cycle/ignition.c ****         
  31:controller/engine_cycle/ignition.c ****         default:
  32:controller/engine_cycle/ignition.c ****             log_error("ignition init failed. unkown firing order.");
  33:controller/engine_cycle/ignition.c ****             return;
  34:controller/engine_cycle/ignition.c ****         break;
  35:controller/engine_cycle/ignition.c ****     }
  36:controller/engine_cycle/ignition.c ****     
  37:controller/engine_cycle/ignition.c ****     engine.firing_interval = (angle_t)720 / engine.cylinder_count;
  38:controller/engine_cycle/ignition.c **** 
  39:controller/engine_cycle/ignition.c **** 
  40:controller/engine_cycle/ignition.c ****     for (size_t i = 0; i < IGNITION_MAX_OUTPUTS; i++)
  41:controller/engine_cycle/ignition.c ****     {
  42:controller/engine_cycle/ignition.c ****         ignition_outputs[i].gpio = output_conf->output[i].gpio;
  43:controller/engine_cycle/ignition.c ****         ignition_outputs[i].pin = output_conf->output[i].pin;
  44:controller/engine_cycle/ignition.c ****     }
  45:controller/engine_cycle/ignition.c ****     /* Read the pin states from real hardware */
  46:controller/engine_cycle/ignition.c ****     for (size_t i = 0; i < IGNITION_MAX_OUTPUTS; i++)
  47:controller/engine_cycle/ignition.c ****     {
  48:controller/engine_cycle/ignition.c ****         ignition_coil_state[i] = HAL_GPIO_ReadPin(ignition_outputs[i].gpio, ignition_outputs->pin);
  49:controller/engine_cycle/ignition.c ****     }
  50:controller/engine_cycle/ignition.c ****     /* Set all outputs to reset just in case */
  51:controller/engine_cycle/ignition.c ****     for (size_t i = 0; i < IGNITION_MAX_OUTPUTS; i++)
  52:controller/engine_cycle/ignition.c ****     {
  53:controller/engine_cycle/ignition.c ****         HAL_GPIO_WritePin(ignition_outputs[i].gpio, ignition_outputs->pin, GPIO_PIN_RESET);
  54:controller/engine_cycle/ignition.c ****     }
  55:controller/engine_cycle/ignition.c ****     
  56:controller/engine_cycle/ignition.c ****     if (configuration.ignition_is_multi_spark && !IS_IN_RANGE(configuration.ignition_multi_spark_nu
  57:controller/engine_cycle/ignition.c ****     {
  58:controller/engine_cycle/ignition.c ****         log_warning("Multi spark is enabled but number of sparks are 0.");
  59:controller/engine_cycle/ignition.c ****     }
  60:controller/engine_cycle/ignition.c **** }
  61:controller/engine_cycle/ignition.c **** 
  62:controller/engine_cycle/ignition.c **** /**
  63:controller/engine_cycle/ignition.c ****  * @brief Handles an ignition trigger event based on the crankshaft angle, RPM, and current time.
  64:controller/engine_cycle/ignition.c ****  * 
  65:controller/engine_cycle/ignition.c ****  * @param crankshaft_angle The current angle of the crankshaft.
  66:controller/engine_cycle/ignition.c ****  * @param rpm The current revolutions per minute of the engine.
  67:controller/engine_cycle/ignition.c ****  * @param current_time_us The current time in microseconds.
  68:controller/engine_cycle/ignition.c ****  */
  69:controller/engine_cycle/ignition.c **** void ignition_trigger_event_handle(angle_t crankshaft_angle, rpm_t rpm, time_us_t current_time_us)
  70:controller/engine_cycle/ignition.c **** {
  71:controller/engine_cycle/ignition.c ****     /**
  72:controller/engine_cycle/ignition.c ****      * @todo add the necessary checks and bounds
  73:controller/engine_cycle/ignition.c ****      */
  74:controller/engine_cycle/ignition.c **** 
  75:controller/engine_cycle/ignition.c ****     if (configuration.ignition_mode == IM_NO_IGNITION)
  76:controller/engine_cycle/ignition.c ****     {
  77:controller/engine_cycle/ignition.c ****         // obviously, there is no need to do any furthure processing
  78:controller/engine_cycle/ignition.c ****         return;
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 3


  79:controller/engine_cycle/ignition.c ****     }
  80:controller/engine_cycle/ignition.c ****     
  81:controller/engine_cycle/ignition.c ****     if (!IS_IN_RANGE(configuration.ignition_dwell, IGNITION_MIN_DWELL_TIME_MS, IGNITION_MAX_DWELL_T
  82:controller/engine_cycle/ignition.c ****     {
  83:controller/engine_cycle/ignition.c ****         /**
  84:controller/engine_cycle/ignition.c ****          * @todo throw an error
  85:controller/engine_cycle/ignition.c ****          */
  86:controller/engine_cycle/ignition.c ****         log_error("ignition dwell out of bounds.");
  87:controller/engine_cycle/ignition.c ****         return;
  88:controller/engine_cycle/ignition.c ****     }
  89:controller/engine_cycle/ignition.c ****     /* Wether or not cam phase is known */
  90:controller/engine_cycle/ignition.c ****     bool is_cam_phase_available = false;
  91:controller/engine_cycle/ignition.c **** 
  92:controller/engine_cycle/ignition.c ****     angle_t spark_advance = 0;
  93:controller/engine_cycle/ignition.c ****     #ifdef TEST_MODE
  94:controller/engine_cycle/ignition.c ****     spark_advance = (angle_t)30;
  95:controller/engine_cycle/ignition.c ****     #else
  96:controller/engine_cycle/ignition.c ****     spark_advance = spark_logic_get_advance();
  97:controller/engine_cycle/ignition.c ****     #endif
  98:controller/engine_cycle/ignition.c **** 
  99:controller/engine_cycle/ignition.c ****     spark_advance = CLAMP(spark_advance, IGNITION_MIN_ADVANCE, IGNITION_MAX_ADVANCE);
 100:controller/engine_cycle/ignition.c ****     
 101:controller/engine_cycle/ignition.c ****     uint8_t multi_spark_count = 0;
 102:controller/engine_cycle/ignition.c ****     if (configuration.ignition_is_multi_spark && rpm < configuration.ignition_multi_spark_rpm_thres
 103:controller/engine_cycle/ignition.c ****     {
 104:controller/engine_cycle/ignition.c ****         multi_spark_count = configuration.ignition_multi_spark_number_of_sparks;
 105:controller/engine_cycle/ignition.c ****     }
 106:controller/engine_cycle/ignition.c ****     
 107:controller/engine_cycle/ignition.c **** 
 108:controller/engine_cycle/ignition.c ****     /* First we have to detect the engine phase */
 109:controller/engine_cycle/ignition.c ****     uint8_t phase = (uint8_t)(crankshaft_angle / engine.firing_interval);
 110:controller/engine_cycle/ignition.c ****     uint8_t phase_count = (uint8_t)(angle_t)360 / (angle_t)engine.firing_interval;
 111:controller/engine_cycle/ignition.c **** 
 112:controller/engine_cycle/ignition.c ****     volatile angle_t next_spark_angle = phase * engine.firing_interval - spark_advance + engine.fir
 113:controller/engine_cycle/ignition.c ****     volatile angle_t next_dwell_angle = next_spark_angle - (float)configuration.ignition_dwell * (f
 114:controller/engine_cycle/ignition.c ****     
 115:controller/engine_cycle/ignition.c ****     static uint8_t next_firing_cylinders[2] = {0};
 116:controller/engine_cycle/ignition.c **** 
 117:controller/engine_cycle/ignition.c ****     next_firing_cylinders[0] = ignition_order[phase] - 1;
 118:controller/engine_cycle/ignition.c ****     next_firing_cylinders[1] = ignition_order[phase] - 1;
 119:controller/engine_cycle/ignition.c **** 
 120:controller/engine_cycle/ignition.c ****     if (!is_cam_phase_available)
 121:controller/engine_cycle/ignition.c ****     {
 122:controller/engine_cycle/ignition.c ****         next_firing_cylinders[1] = ignition_order[phase + 2] - 1;
 123:controller/engine_cycle/ignition.c ****         
 124:controller/engine_cycle/ignition.c ****     }
 125:controller/engine_cycle/ignition.c ****     
 126:controller/engine_cycle/ignition.c **** 
 127:controller/engine_cycle/ignition.c ****     bool is_synced = engine.trigger.sync_status == TS_FULLY_SYNCED;
 128:controller/engine_cycle/ignition.c ****     if (is_synced && (next_dwell_angle - crankshaft_angle) < 10 && !spark_is_in_progress && (next_d
 129:controller/engine_cycle/ignition.c ****     {
 130:controller/engine_cycle/ignition.c ****         /* Now we are close enough to the dwell angle that we can schedule the coil charge start */
 131:controller/engine_cycle/ignition.c ****         spark_is_in_progress = true;
 132:controller/engine_cycle/ignition.c ****         time_us_t dwell_start_time_us = current_time_us + (time_us_t)((next_dwell_angle - crankshaf
 133:controller/engine_cycle/ignition.c ****         time_us_t spark_start_time_us = current_time_us + (time_us_t)((next_spark_angle - crankshaf
 134:controller/engine_cycle/ignition.c ****         scheduler_schedule_event_with_arg(dwell_start_time_us, ignition_coil_begin_charge, (void*)n
 135:controller/engine_cycle/ignition.c ****         scheduler_schedule_event_with_arg(spark_start_time_us, ignition_coil_fire_spark, (void*)nex
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 4


 136:controller/engine_cycle/ignition.c **** 
 137:controller/engine_cycle/ignition.c ****     }
 138:controller/engine_cycle/ignition.c ****     
 139:controller/engine_cycle/ignition.c **** }
 140:controller/engine_cycle/ignition.c **** 
 141:controller/engine_cycle/ignition.c **** 
 142:controller/engine_cycle/ignition.c **** /**
 143:controller/engine_cycle/ignition.c ****  * @brief Gets the number of sparks per coil based on the ignition mode.
 144:controller/engine_cycle/ignition.c ****  * 
 145:controller/engine_cycle/ignition.c ****  * @param ignition_mode The mode of ignition, specified as an enumeration of type ignition_mode_e.
 146:controller/engine_cycle/ignition.c ****  * @return The number of sparks per coil.
 147:controller/engine_cycle/ignition.c ****  */
 148:controller/engine_cycle/ignition.c **** uint8_t ignition_get_number_of_sparks_per_coil(ignition_mode_e ignition_mode)
 149:controller/engine_cycle/ignition.c **** {
 150:controller/engine_cycle/ignition.c ****     switch (ignition_mode)
 151:controller/engine_cycle/ignition.c ****     {
 152:controller/engine_cycle/ignition.c ****     case IM_ONE_COIL:
 153:controller/engine_cycle/ignition.c ****         return engine.cylinder_count;
 154:controller/engine_cycle/ignition.c ****     case IM_INDIVIDUAL_COILS:
 155:controller/engine_cycle/ignition.c ****         return 1;
 156:controller/engine_cycle/ignition.c ****     case IM_WASTED_SPARK:
 157:controller/engine_cycle/ignition.c ****         return 2;
 158:controller/engine_cycle/ignition.c ****     default:
 159:controller/engine_cycle/ignition.c ****         log_error("Unkown ignition mode");
 160:controller/engine_cycle/ignition.c ****         return 1;
 161:controller/engine_cycle/ignition.c ****     }
 162:controller/engine_cycle/ignition.c **** }
 163:controller/engine_cycle/ignition.c **** 
 164:controller/engine_cycle/ignition.c **** 
 165:controller/engine_cycle/ignition.c **** /**
 166:controller/engine_cycle/ignition.c ****  * @brief Charges the ignition coil at the specified index.
 167:controller/engine_cycle/ignition.c ****  * 
 168:controller/engine_cycle/ignition.c ****  * @param coil_index The index of the coil to be charged.
 169:controller/engine_cycle/ignition.c ****  */
 170:controller/engine_cycle/ignition.c **** void ignition_coil_begin_charge(void *arg)
 171:controller/engine_cycle/ignition.c **** {
  34              		.loc 1 171 1 view -0
  35              		.cfi_startproc
  36              		@ args = 0, pretend = 0, frame = 0
  37              		@ frame_needed = 0, uses_anonymous_args = 0
 172:controller/engine_cycle/ignition.c ****     if (arg == NULL)
  38              		.loc 1 172 5 view .LVU1
  39              		.loc 1 172 8 is_stmt 0 view .LVU2
  40 0000 10B3     		cbz	r0, .L5
 171:controller/engine_cycle/ignition.c ****     if (arg == NULL)
  41              		.loc 1 171 1 view .LVU3
  42 0002 70B5     		push	{r4, r5, r6, lr}
  43              		.cfi_def_cfa_offset 16
  44              		.cfi_offset 4, -16
  45              		.cfi_offset 5, -12
  46              		.cfi_offset 6, -8
  47              		.cfi_offset 14, -4
  48 0004 0446     		mov	r4, r0
 173:controller/engine_cycle/ignition.c ****     {
 174:controller/engine_cycle/ignition.c ****         return;
 175:controller/engine_cycle/ignition.c ****     }
 176:controller/engine_cycle/ignition.c ****     uint8_t *coil_index = (uint8_t*)arg;
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 5


  49              		.loc 1 176 5 is_stmt 1 view .LVU4
  50              	.LVL1:
 177:controller/engine_cycle/ignition.c **** 
 178:controller/engine_cycle/ignition.c ****     if (coil_index[1] > IGNITION_MAX_OUTPUTS - 1)
  51              		.loc 1 178 5 view .LVU5
  52              		.loc 1 178 19 is_stmt 0 view .LVU6
  53 0006 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
  54              		.loc 1 178 8 view .LVU7
  55 0008 032B     		cmp	r3, #3
  56 000a 19D8     		bhi	.L8
 179:controller/engine_cycle/ignition.c ****     {
 180:controller/engine_cycle/ignition.c ****         log_error("Unkown ignition output");
 181:controller/engine_cycle/ignition.c ****         return;
 182:controller/engine_cycle/ignition.c ****     }
 183:controller/engine_cycle/ignition.c ****     ignition_coil_state[coil_index[0]] = IGNITION_COIL_STATE_CHARGING;
  57              		.loc 1 183 5 is_stmt 1 view .LVU8
  58              		.loc 1 183 35 is_stmt 0 view .LVU9
  59 000c 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
  60              		.loc 1 183 40 view .LVU10
  61 000e 0F4B     		ldr	r3, .L9
  62 0010 0126     		movs	r6, #1
  63 0012 9E54     		strb	r6, [r3, r2]
 184:controller/engine_cycle/ignition.c ****     ignition_coil_state[coil_index[1]] = IGNITION_COIL_STATE_CHARGING;
  64              		.loc 1 184 5 is_stmt 1 view .LVU11
  65              		.loc 1 184 35 is_stmt 0 view .LVU12
  66 0014 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
  67              		.loc 1 184 40 view .LVU13
  68 0016 9E54     		strb	r6, [r3, r2]
 185:controller/engine_cycle/ignition.c ****     HAL_GPIO_WritePin(ignition_outputs[coil_index[0]].gpio, ignition_outputs[coil_index[0]].pin, GP
  69              		.loc 1 185 5 is_stmt 1 view .LVU14
  70              		.loc 1 185 50 is_stmt 0 view .LVU15
  71 0018 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
  72              		.loc 1 185 92 view .LVU16
  73 001a 0D4D     		ldr	r5, .L9+4
  74 001c 05EBC301 		add	r1, r5, r3, lsl #3
  75              		.loc 1 185 5 view .LVU17
  76 0020 3246     		mov	r2, r6
  77 0022 8988     		ldrh	r1, [r1, #4]
  78 0024 55F83300 		ldr	r0, [r5, r3, lsl #3]
  79              	.LVL2:
  80              		.loc 1 185 5 view .LVU18
  81 0028 FFF7FEFF 		bl	HAL_GPIO_WritePin
  82              	.LVL3:
 186:controller/engine_cycle/ignition.c ****     HAL_GPIO_WritePin(ignition_outputs[coil_index[1]].gpio, ignition_outputs[coil_index[1]].pin, GP
  83              		.loc 1 186 5 is_stmt 1 view .LVU19
  84              		.loc 1 186 50 is_stmt 0 view .LVU20
  85 002c 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
  86              		.loc 1 186 92 view .LVU21
  87 002e 05EBC301 		add	r1, r5, r3, lsl #3
  88              		.loc 1 186 5 view .LVU22
  89 0032 3246     		mov	r2, r6
  90 0034 8988     		ldrh	r1, [r1, #4]
  91 0036 55F83300 		ldr	r0, [r5, r3, lsl #3]
  92 003a FFF7FEFF 		bl	HAL_GPIO_WritePin
  93              	.LVL4:
  94              	.L1:
 187:controller/engine_cycle/ignition.c **** }
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 6


  95              		.loc 1 187 1 view .LVU23
  96 003e 70BD     		pop	{r4, r5, r6, pc}
  97              	.LVL5:
  98              	.L8:
 180:controller/engine_cycle/ignition.c ****         return;
  99              		.loc 1 180 9 is_stmt 1 view .LVU24
 100 0040 0448     		ldr	r0, .L9+8
 101              	.LVL6:
 180:controller/engine_cycle/ignition.c ****         return;
 102              		.loc 1 180 9 is_stmt 0 view .LVU25
 103 0042 FFF7FEFF 		bl	log_error
 104              	.LVL7:
 181:controller/engine_cycle/ignition.c ****     }
 105              		.loc 1 181 9 is_stmt 1 view .LVU26
 106 0046 FAE7     		b	.L1
 107              	.LVL8:
 108              	.L5:
 109              		.cfi_def_cfa_offset 0
 110              		.cfi_restore 4
 111              		.cfi_restore 5
 112              		.cfi_restore 6
 113              		.cfi_restore 14
 181:controller/engine_cycle/ignition.c ****     }
 114              		.loc 1 181 9 is_stmt 0 view .LVU27
 115 0048 7047     		bx	lr
 116              	.L10:
 117 004a 00BF     		.align	2
 118              	.L9:
 119 004c 00000000 		.word	ignition_coil_state
 120 0050 00000000 		.word	ignition_outputs
 121 0054 00000000 		.word	.LC0
 122              		.cfi_endproc
 123              	.LFE231:
 125              		.section	.text.ignition_coil_fire_spark,"ax",%progbits
 126              		.align	1
 127              		.global	ignition_coil_fire_spark
 128              		.syntax unified
 129              		.thumb
 130              		.thumb_func
 132              	ignition_coil_fire_spark:
 133              	.LVL9:
 134              	.LFB232:
 188:controller/engine_cycle/ignition.c **** 
 189:controller/engine_cycle/ignition.c **** /**
 190:controller/engine_cycle/ignition.c ****  * @brief Fires a spark from the ignition coil at the specified index.
 191:controller/engine_cycle/ignition.c ****  * 
 192:controller/engine_cycle/ignition.c ****  * @param coil_index The index of the coil to fire the spark from.
 193:controller/engine_cycle/ignition.c ****  */
 194:controller/engine_cycle/ignition.c **** void ignition_coil_fire_spark(void *arg)
 195:controller/engine_cycle/ignition.c **** {
 135              		.loc 1 195 1 is_stmt 1 view -0
 136              		.cfi_startproc
 137              		@ args = 0, pretend = 0, frame = 0
 138              		@ frame_needed = 0, uses_anonymous_args = 0
 196:controller/engine_cycle/ignition.c ****     if (arg == NULL)
 139              		.loc 1 196 5 view .LVU29
 140              		.loc 1 196 8 is_stmt 0 view .LVU30
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 7


 141 0000 20B3     		cbz	r0, .L15
 195:controller/engine_cycle/ignition.c ****     if (arg == NULL)
 142              		.loc 1 195 1 view .LVU31
 143 0002 70B5     		push	{r4, r5, r6, lr}
 144              		.cfi_def_cfa_offset 16
 145              		.cfi_offset 4, -16
 146              		.cfi_offset 5, -12
 147              		.cfi_offset 6, -8
 148              		.cfi_offset 14, -4
 149 0004 0446     		mov	r4, r0
 197:controller/engine_cycle/ignition.c ****     {
 198:controller/engine_cycle/ignition.c ****         return;
 199:controller/engine_cycle/ignition.c ****     }
 200:controller/engine_cycle/ignition.c ****     
 201:controller/engine_cycle/ignition.c ****     uint8_t *coil_index = (uint8_t*)arg;
 150              		.loc 1 201 5 is_stmt 1 view .LVU32
 151              	.LVL10:
 202:controller/engine_cycle/ignition.c ****     if (coil_index[1] > IGNITION_MAX_OUTPUTS - 1)
 152              		.loc 1 202 5 view .LVU33
 153              		.loc 1 202 19 is_stmt 0 view .LVU34
 154 0006 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
 155              		.loc 1 202 8 view .LVU35
 156 0008 032B     		cmp	r3, #3
 157 000a 1BD8     		bhi	.L18
 203:controller/engine_cycle/ignition.c ****     {
 204:controller/engine_cycle/ignition.c ****         log_error("Unkown ignition output");
 205:controller/engine_cycle/ignition.c ****         return;
 206:controller/engine_cycle/ignition.c ****     }
 207:controller/engine_cycle/ignition.c ****     
 208:controller/engine_cycle/ignition.c ****     ignition_coil_state[coil_index[0]] = IGNITION_COIL_STATE_NOT_CHARGING;
 158              		.loc 1 208 5 is_stmt 1 view .LVU36
 159              		.loc 1 208 35 is_stmt 0 view .LVU37
 160 000c 0278     		ldrb	r2, [r0]	@ zero_extendqisi2
 161              		.loc 1 208 40 view .LVU38
 162 000e 104B     		ldr	r3, .L19
 163 0010 0025     		movs	r5, #0
 164 0012 9D54     		strb	r5, [r3, r2]
 209:controller/engine_cycle/ignition.c ****     ignition_coil_state[coil_index[1]] = IGNITION_COIL_STATE_NOT_CHARGING;
 165              		.loc 1 209 5 is_stmt 1 view .LVU39
 166              		.loc 1 209 35 is_stmt 0 view .LVU40
 167 0014 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
 168              		.loc 1 209 40 view .LVU41
 169 0016 9D54     		strb	r5, [r3, r2]
 210:controller/engine_cycle/ignition.c ****     HAL_GPIO_WritePin(ignition_outputs[coil_index[0]].gpio, ignition_outputs[coil_index[0]].pin, GP
 170              		.loc 1 210 5 is_stmt 1 view .LVU42
 171              		.loc 1 210 50 is_stmt 0 view .LVU43
 172 0018 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 173              		.loc 1 210 92 view .LVU44
 174 001a 0E4E     		ldr	r6, .L19+4
 175 001c 06EBC301 		add	r1, r6, r3, lsl #3
 176              		.loc 1 210 5 view .LVU45
 177 0020 2A46     		mov	r2, r5
 178 0022 8988     		ldrh	r1, [r1, #4]
 179 0024 56F83300 		ldr	r0, [r6, r3, lsl #3]
 180              	.LVL11:
 181              		.loc 1 210 5 view .LVU46
 182 0028 FFF7FEFF 		bl	HAL_GPIO_WritePin
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 8


 183              	.LVL12:
 211:controller/engine_cycle/ignition.c ****     HAL_GPIO_WritePin(ignition_outputs[coil_index[1]].gpio, ignition_outputs[coil_index[1]].pin, GP
 184              		.loc 1 211 5 is_stmt 1 view .LVU47
 185              		.loc 1 211 50 is_stmt 0 view .LVU48
 186 002c 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 187              		.loc 1 211 92 view .LVU49
 188 002e 06EBC301 		add	r1, r6, r3, lsl #3
 189              		.loc 1 211 5 view .LVU50
 190 0032 2A46     		mov	r2, r5
 191 0034 8988     		ldrh	r1, [r1, #4]
 192 0036 56F83300 		ldr	r0, [r6, r3, lsl #3]
 193 003a FFF7FEFF 		bl	HAL_GPIO_WritePin
 194              	.LVL13:
 212:controller/engine_cycle/ignition.c ****     spark_is_in_progress = false;
 195              		.loc 1 212 5 is_stmt 1 view .LVU51
 196              		.loc 1 212 26 is_stmt 0 view .LVU52
 197 003e 064B     		ldr	r3, .L19+8
 198 0040 1D70     		strb	r5, [r3]
 199              	.L11:
 213:controller/engine_cycle/ignition.c **** }
 200              		.loc 1 213 1 view .LVU53
 201 0042 70BD     		pop	{r4, r5, r6, pc}
 202              	.LVL14:
 203              	.L18:
 204:controller/engine_cycle/ignition.c ****         return;
 204              		.loc 1 204 9 is_stmt 1 view .LVU54
 205 0044 0548     		ldr	r0, .L19+12
 206              	.LVL15:
 204:controller/engine_cycle/ignition.c ****         return;
 207              		.loc 1 204 9 is_stmt 0 view .LVU55
 208 0046 FFF7FEFF 		bl	log_error
 209              	.LVL16:
 205:controller/engine_cycle/ignition.c ****     }
 210              		.loc 1 205 9 is_stmt 1 view .LVU56
 211 004a FAE7     		b	.L11
 212              	.LVL17:
 213              	.L15:
 214              		.cfi_def_cfa_offset 0
 215              		.cfi_restore 4
 216              		.cfi_restore 5
 217              		.cfi_restore 6
 218              		.cfi_restore 14
 205:controller/engine_cycle/ignition.c ****     }
 219              		.loc 1 205 9 is_stmt 0 view .LVU57
 220 004c 7047     		bx	lr
 221              	.L20:
 222 004e 00BF     		.align	2
 223              	.L19:
 224 0050 00000000 		.word	ignition_coil_state
 225 0054 00000000 		.word	ignition_outputs
 226 0058 00000000 		.word	spark_is_in_progress
 227 005c 00000000 		.word	.LC0
 228              		.cfi_endproc
 229              	.LFE232:
 231              		.section	.rodata.ignition_init.str1.4,"aMS",%progbits,1
 232              		.align	2
 233              	.LC1:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 9


 234 0000 69676E69 		.ascii	"ignition init failed. No output config\000"
 234      74696F6E 
 234      20696E69 
 234      74206661 
 234      696C6564 
 235 0027 00       		.align	2
 236              	.LC2:
 237 0028 69676E69 		.ascii	"ignition init failed. unkown firing order.\000"
 237      74696F6E 
 237      20696E69 
 237      74206661 
 237      696C6564 
 238 0053 00       		.align	2
 239              	.LC3:
 240 0054 4D756C74 		.ascii	"Multi spark is enabled but number of sparks are 0.\000"
 240      69207370 
 240      61726B20 
 240      69732065 
 240      6E61626C 
 241              		.section	.text.ignition_init,"ax",%progbits
 242              		.align	1
 243              		.global	ignition_init
 244              		.syntax unified
 245              		.thumb
 246              		.thumb_func
 248              	ignition_init:
 249              	.LVL18:
 250              	.LFB228:
  13:controller/engine_cycle/ignition.c ****     if (output_conf == NULL)
 251              		.loc 1 13 1 is_stmt 1 view -0
 252              		.cfi_startproc
 253              		@ args = 0, pretend = 0, frame = 0
 254              		@ frame_needed = 0, uses_anonymous_args = 0
  13:controller/engine_cycle/ignition.c ****     if (output_conf == NULL)
 255              		.loc 1 13 1 is_stmt 0 view .LVU59
 256 0000 10B5     		push	{r4, lr}
 257              		.cfi_def_cfa_offset 8
 258              		.cfi_offset 4, -8
 259              		.cfi_offset 14, -4
  14:controller/engine_cycle/ignition.c ****     {
 260              		.loc 1 14 5 is_stmt 1 view .LVU60
  14:controller/engine_cycle/ignition.c ****     {
 261              		.loc 1 14 8 is_stmt 0 view .LVU61
 262 0002 90B1     		cbz	r0, .L32
 263 0004 0146     		mov	r1, r0
  21:controller/engine_cycle/ignition.c ****     {
 264              		.loc 1 21 5 is_stmt 1 view .LVU62
  21:controller/engine_cycle/ignition.c ****     {
 265              		.loc 1 21 26 is_stmt 0 view .LVU63
 266 0006 274B     		ldr	r3, .L33
 267 0008 1B79     		ldrb	r3, [r3, #4]	@ zero_extendqisi2
  21:controller/engine_cycle/ignition.c ****     {
 268              		.loc 1 21 5 view .LVU64
 269 000a 93B9     		cbnz	r3, .L24
  24:controller/engine_cycle/ignition.c ****             ignition_order[0] = 1;
 270              		.loc 1 24 13 is_stmt 1 view .LVU65
  24:controller/engine_cycle/ignition.c ****             ignition_order[0] = 1;
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 10


 271              		.loc 1 24 35 is_stmt 0 view .LVU66
 272 000c 264A     		ldr	r2, .L33+4
 273 000e 0420     		movs	r0, #4
 274              	.LVL19:
  24:controller/engine_cycle/ignition.c ****             ignition_order[0] = 1;
 275              		.loc 1 24 35 view .LVU67
 276 0010 1074     		strb	r0, [r2, #16]
  25:controller/engine_cycle/ignition.c ****             ignition_order[1] = 3;
 277              		.loc 1 25 13 is_stmt 1 view .LVU68
  25:controller/engine_cycle/ignition.c ****             ignition_order[1] = 3;
 278              		.loc 1 25 31 is_stmt 0 view .LVU69
 279 0012 264B     		ldr	r3, .L33+8
 280 0014 0124     		movs	r4, #1
 281 0016 1C70     		strb	r4, [r3]
  26:controller/engine_cycle/ignition.c ****             ignition_order[2] = 4;
 282              		.loc 1 26 13 is_stmt 1 view .LVU70
  26:controller/engine_cycle/ignition.c ****             ignition_order[2] = 4;
 283              		.loc 1 26 31 is_stmt 0 view .LVU71
 284 0018 0324     		movs	r4, #3
 285 001a 5C70     		strb	r4, [r3, #1]
  27:controller/engine_cycle/ignition.c ****             ignition_order[3] = 2;
 286              		.loc 1 27 13 is_stmt 1 view .LVU72
  27:controller/engine_cycle/ignition.c ****             ignition_order[3] = 2;
 287              		.loc 1 27 31 is_stmt 0 view .LVU73
 288 001c 9870     		strb	r0, [r3, #2]
  28:controller/engine_cycle/ignition.c ****         break;
 289              		.loc 1 28 13 is_stmt 1 view .LVU74
  28:controller/engine_cycle/ignition.c ****         break;
 290              		.loc 1 28 31 is_stmt 0 view .LVU75
 291 001e 0220     		movs	r0, #2
 292 0020 D870     		strb	r0, [r3, #3]
  29:controller/engine_cycle/ignition.c ****         
 293              		.loc 1 29 9 is_stmt 1 view .LVU76
  34:controller/engine_cycle/ignition.c ****     }
 294              		.loc 1 34 9 view .LVU77
  37:controller/engine_cycle/ignition.c **** 
 295              		.loc 1 37 5 view .LVU78
  37:controller/engine_cycle/ignition.c **** 
 296              		.loc 1 37 28 is_stmt 0 view .LVU79
 297 0022 234B     		ldr	r3, .L33+12
 298 0024 5361     		str	r3, [r2, #20]	@ float
  40:controller/engine_cycle/ignition.c ****     {
 299              		.loc 1 40 5 is_stmt 1 view .LVU80
 300              	.LBB9:
  40:controller/engine_cycle/ignition.c ****     {
 301              		.loc 1 40 10 view .LVU81
 302              	.LVL20:
  40:controller/engine_cycle/ignition.c ****     {
 303              		.loc 1 40 17 is_stmt 0 view .LVU82
 304 0026 0023     		movs	r3, #0
  40:controller/engine_cycle/ignition.c ****     {
 305              		.loc 1 40 5 view .LVU83
 306 0028 13E0     		b	.L25
 307              	.LVL21:
 308              	.L32:
  40:controller/engine_cycle/ignition.c ****     {
 309              		.loc 1 40 5 view .LVU84
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 11


 310              	.LBE9:
  16:controller/engine_cycle/ignition.c ****         return;
 311              		.loc 1 16 9 is_stmt 1 view .LVU85
 312 002a 2248     		ldr	r0, .L33+16
 313              	.LVL22:
  16:controller/engine_cycle/ignition.c ****         return;
 314              		.loc 1 16 9 is_stmt 0 view .LVU86
 315 002c FFF7FEFF 		bl	log_error
 316              	.LVL23:
  17:controller/engine_cycle/ignition.c ****     }
 317              		.loc 1 17 9 is_stmt 1 view .LVU87
 318 0030 02E0     		b	.L21
 319              	.LVL24:
 320              	.L24:
  32:controller/engine_cycle/ignition.c ****             return;
 321              		.loc 1 32 13 view .LVU88
 322 0032 2148     		ldr	r0, .L33+20
 323              	.LVL25:
  32:controller/engine_cycle/ignition.c ****             return;
 324              		.loc 1 32 13 is_stmt 0 view .LVU89
 325 0034 FFF7FEFF 		bl	log_error
 326              	.LVL26:
  33:controller/engine_cycle/ignition.c ****         break;
 327              		.loc 1 33 13 is_stmt 1 view .LVU90
 328              	.L21:
  60:controller/engine_cycle/ignition.c **** 
 329              		.loc 1 60 1 is_stmt 0 view .LVU91
 330 0038 10BD     		pop	{r4, pc}
 331              	.LVL27:
 332              	.L26:
 333              	.LBB10:
  42:controller/engine_cycle/ignition.c ****         ignition_outputs[i].pin = output_conf->output[i].pin;
 334              		.loc 1 42 9 is_stmt 1 view .LVU92
  42:controller/engine_cycle/ignition.c ****         ignition_outputs[i].pin = output_conf->output[i].pin;
 335              		.loc 1 42 58 is_stmt 0 view .LVU93
 336 003a 51F83300 		ldr	r0, [r1, r3, lsl #3]
  42:controller/engine_cycle/ignition.c ****         ignition_outputs[i].pin = output_conf->output[i].pin;
 337              		.loc 1 42 34 view .LVU94
 338 003e 1F4A     		ldr	r2, .L33+24
 339 0040 42F83300 		str	r0, [r2, r3, lsl #3]
  43:controller/engine_cycle/ignition.c ****     }
 340              		.loc 1 43 9 is_stmt 1 view .LVU95
  43:controller/engine_cycle/ignition.c ****     }
 341              		.loc 1 43 57 is_stmt 0 view .LVU96
 342 0044 01EBC300 		add	r0, r1, r3, lsl #3
 343 0048 4068     		ldr	r0, [r0, #4]
  43:controller/engine_cycle/ignition.c ****     }
 344              		.loc 1 43 33 view .LVU97
 345 004a 02EBC302 		add	r2, r2, r3, lsl #3
 346 004e 5060     		str	r0, [r2, #4]
  40:controller/engine_cycle/ignition.c ****     {
 347              		.loc 1 40 51 is_stmt 1 discriminator 3 view .LVU98
 348 0050 0133     		adds	r3, r3, #1
 349              	.LVL28:
 350              	.L25:
  40:controller/engine_cycle/ignition.c ****     {
 351              		.loc 1 40 26 discriminator 1 view .LVU99
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 12


 352 0052 032B     		cmp	r3, #3
 353 0054 F1D9     		bls	.L26
 354              	.LBE10:
 355              	.LBB11:
  46:controller/engine_cycle/ignition.c ****     {
 356              		.loc 1 46 17 is_stmt 0 view .LVU100
 357 0056 0024     		movs	r4, #0
 358 0058 08E0     		b	.L27
 359              	.LVL29:
 360              	.L28:
  48:controller/engine_cycle/ignition.c ****     }
 361              		.loc 1 48 9 is_stmt 1 view .LVU101
  48:controller/engine_cycle/ignition.c ****     }
 362              		.loc 1 48 93 is_stmt 0 view .LVU102
 363 005a 184B     		ldr	r3, .L33+24
  48:controller/engine_cycle/ignition.c ****     }
 364              		.loc 1 48 34 view .LVU103
 365 005c 9988     		ldrh	r1, [r3, #4]
 366 005e 53F83400 		ldr	r0, [r3, r4, lsl #3]
 367 0062 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 368              	.LVL30:
  48:controller/engine_cycle/ignition.c ****     }
 369              		.loc 1 48 32 discriminator 1 view .LVU104
 370 0066 164B     		ldr	r3, .L33+28
 371 0068 1855     		strb	r0, [r3, r4]
  46:controller/engine_cycle/ignition.c ****     {
 372              		.loc 1 46 51 is_stmt 1 discriminator 3 view .LVU105
 373 006a 0134     		adds	r4, r4, #1
 374              	.LVL31:
 375              	.L27:
  46:controller/engine_cycle/ignition.c ****     {
 376              		.loc 1 46 26 discriminator 1 view .LVU106
 377 006c 032C     		cmp	r4, #3
 378 006e F4D9     		bls	.L28
 379              	.LBE11:
 380              	.LBB12:
  51:controller/engine_cycle/ignition.c ****     {
 381              		.loc 1 51 17 is_stmt 0 view .LVU107
 382 0070 0024     		movs	r4, #0
 383              	.LVL32:
  51:controller/engine_cycle/ignition.c ****     {
 384              		.loc 1 51 17 view .LVU108
 385 0072 07E0     		b	.L29
 386              	.LVL33:
 387              	.L30:
  53:controller/engine_cycle/ignition.c ****     }
 388              		.loc 1 53 9 is_stmt 1 view .LVU109
  53:controller/engine_cycle/ignition.c ****     }
 389              		.loc 1 53 69 is_stmt 0 view .LVU110
 390 0074 114B     		ldr	r3, .L33+24
  53:controller/engine_cycle/ignition.c ****     }
 391              		.loc 1 53 9 view .LVU111
 392 0076 0022     		movs	r2, #0
 393 0078 9988     		ldrh	r1, [r3, #4]
 394 007a 53F83400 		ldr	r0, [r3, r4, lsl #3]
 395 007e FFF7FEFF 		bl	HAL_GPIO_WritePin
 396              	.LVL34:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 13


  51:controller/engine_cycle/ignition.c ****     {
 397              		.loc 1 51 51 is_stmt 1 discriminator 3 view .LVU112
 398 0082 0134     		adds	r4, r4, #1
 399              	.LVL35:
 400              	.L29:
  51:controller/engine_cycle/ignition.c ****     {
 401              		.loc 1 51 26 discriminator 1 view .LVU113
 402 0084 032C     		cmp	r4, #3
 403 0086 F5D9     		bls	.L30
 404              	.LBE12:
  56:controller/engine_cycle/ignition.c ****     {
 405              		.loc 1 56 5 view .LVU114
  56:controller/engine_cycle/ignition.c ****     {
 406              		.loc 1 56 22 is_stmt 0 view .LVU115
 407 0088 064B     		ldr	r3, .L33
 408 008a 93F82030 		ldrb	r3, [r3, #32]	@ zero_extendqisi2
  56:controller/engine_cycle/ignition.c ****     {
 409              		.loc 1 56 8 view .LVU116
 410 008e 002B     		cmp	r3, #0
 411 0090 D2D0     		beq	.L21
  56:controller/engine_cycle/ignition.c ****     {
 412              		.loc 1 56 51 discriminator 1 view .LVU117
 413 0092 044B     		ldr	r3, .L33
 414 0094 93F82130 		ldrb	r3, [r3, #33]	@ zero_extendqisi2
  56:controller/engine_cycle/ignition.c ****     {
 415              		.loc 1 56 47 discriminator 1 view .LVU118
 416 0098 082B     		cmp	r3, #8
 417 009a CDD9     		bls	.L21
  58:controller/engine_cycle/ignition.c ****     }
 418              		.loc 1 58 9 is_stmt 1 view .LVU119
 419 009c 0948     		ldr	r0, .L33+32
 420 009e FFF7FEFF 		bl	log_warning
 421              	.LVL36:
 422 00a2 C9E7     		b	.L21
 423              	.L34:
 424              		.align	2
 425              	.L33:
 426 00a4 00000000 		.word	configuration
 427 00a8 00000000 		.word	engine
 428 00ac 00000000 		.word	ignition_order
 429 00b0 00003443 		.word	1127481344
 430 00b4 00000000 		.word	.LC1
 431 00b8 28000000 		.word	.LC2
 432 00bc 00000000 		.word	ignition_outputs
 433 00c0 00000000 		.word	ignition_coil_state
 434 00c4 54000000 		.word	.LC3
 435              		.cfi_endproc
 436              	.LFE228:
 438              		.section	.rodata.ignition_trigger_event_handle.str1.4,"aMS",%progbits,1
 439              		.align	2
 440              	.LC4:
 441 0000 69676E69 		.ascii	"ignition dwell out of bounds.\000"
 441      74696F6E 
 441      20647765 
 441      6C6C206F 
 441      7574206F 
 442              		.section	.text.ignition_trigger_event_handle,"ax",%progbits
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 14


 443              		.align	1
 444              		.global	ignition_trigger_event_handle
 445              		.syntax unified
 446              		.thumb
 447              		.thumb_func
 449              	ignition_trigger_event_handle:
 450              	.LVL37:
 451              	.LFB229:
  70:controller/engine_cycle/ignition.c ****     /**
 452              		.loc 1 70 1 view -0
 453              		.cfi_startproc
 454              		@ args = 0, pretend = 0, frame = 16
 455              		@ frame_needed = 0, uses_anonymous_args = 0
  75:controller/engine_cycle/ignition.c ****     {
 456              		.loc 1 75 5 view .LVU121
  75:controller/engine_cycle/ignition.c ****     {
 457              		.loc 1 75 22 is_stmt 0 view .LVU122
 458 0000 5A4B     		ldr	r3, .L53
 459 0002 1B7E     		ldrb	r3, [r3, #24]	@ zero_extendqisi2
  75:controller/engine_cycle/ignition.c ****     {
 460              		.loc 1 75 8 view .LVU123
 461 0004 002B     		cmp	r3, #0
 462 0006 00F0AF80 		beq	.L50
  70:controller/engine_cycle/ignition.c ****     /**
 463              		.loc 1 70 1 view .LVU124
 464 000a 30B5     		push	{r4, r5, lr}
 465              		.cfi_def_cfa_offset 12
 466              		.cfi_offset 4, -12
 467              		.cfi_offset 5, -8
 468              		.cfi_offset 14, -4
 469 000c 85B0     		sub	sp, sp, #20
 470              		.cfi_def_cfa_offset 32
  81:controller/engine_cycle/ignition.c ****     {
 471              		.loc 1 81 5 is_stmt 1 view .LVU125
  81:controller/engine_cycle/ignition.c ****     {
 472              		.loc 1 81 10 is_stmt 0 view .LVU126
 473 000e 574B     		ldr	r3, .L53
 474 0010 D3ED077A 		vldr.32	s15, [r3, #28]
  81:controller/engine_cycle/ignition.c ****     {
 475              		.loc 1 81 8 view .LVU127
 476 0014 B6EE007A 		vmov.f32	s14, #5.0e-1
 477 0018 F4EEC77A 		vcmpe.f32	s15, s14
 478 001c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 479 0020 C0F29780 		blt	.L37
  81:controller/engine_cycle/ignition.c ****     {
 480              		.loc 1 81 9 discriminator 1 view .LVU128
 481 0024 B1EE007A 		vmov.f32	s14, #4.0e+0
 482 0028 F4EEC77A 		vcmpe.f32	s15, s14
 483 002c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 484 0030 00F28F80 		bhi	.L37
  90:controller/engine_cycle/ignition.c **** 
 485              		.loc 1 90 5 is_stmt 1 view .LVU129
 486              	.LVL38:
  92:controller/engine_cycle/ignition.c ****     #ifdef TEST_MODE
 487              		.loc 1 92 5 view .LVU130
  94:controller/engine_cycle/ignition.c ****     #else
 488              		.loc 1 94 5 view .LVU131
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 15


  99:controller/engine_cycle/ignition.c ****     
 489              		.loc 1 99 5 view .LVU132
 101:controller/engine_cycle/ignition.c ****     if (configuration.ignition_is_multi_spark && rpm < configuration.ignition_multi_spark_rpm_thres
 490              		.loc 1 101 5 view .LVU133
 102:controller/engine_cycle/ignition.c ****     {
 491              		.loc 1 102 5 view .LVU134
 104:controller/engine_cycle/ignition.c ****     }
 492              		.loc 1 104 9 view .LVU135
 109:controller/engine_cycle/ignition.c ****     uint8_t phase_count = (uint8_t)(angle_t)360 / (angle_t)engine.firing_interval;
 493              		.loc 1 109 5 view .LVU136
 109:controller/engine_cycle/ignition.c ****     uint8_t phase_count = (uint8_t)(angle_t)360 / (angle_t)engine.firing_interval;
 494              		.loc 1 109 56 is_stmt 0 view .LVU137
 495 0034 4E4B     		ldr	r3, .L53+4
 496 0036 93ED057A 		vldr.32	s14, [r3, #20]
 109:controller/engine_cycle/ignition.c ****     uint8_t phase_count = (uint8_t)(angle_t)360 / (angle_t)engine.firing_interval;
 497              		.loc 1 109 48 view .LVU138
 498 003a C0EE076A 		vdiv.f32	s13, s0, s14
 109:controller/engine_cycle/ignition.c ****     uint8_t phase_count = (uint8_t)(angle_t)360 / (angle_t)engine.firing_interval;
 499              		.loc 1 109 13 view .LVU139
 500 003e FCEEE66A 		vcvt.u32.f32	s13, s13
 501 0042 CDED016A 		vstr.32	s13, [sp, #4]	@ int
 502 0046 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 503              	.LVL39:
 110:controller/engine_cycle/ignition.c **** 
 504              		.loc 1 110 5 is_stmt 1 view .LVU140
 112:controller/engine_cycle/ignition.c ****     volatile angle_t next_dwell_angle = next_spark_angle - (float)configuration.ignition_dwell * (f
 505              		.loc 1 112 5 view .LVU141
 112:controller/engine_cycle/ignition.c ****     volatile angle_t next_dwell_angle = next_spark_angle - (float)configuration.ignition_dwell * (f
 506              		.loc 1 112 47 is_stmt 0 view .LVU142
 507 004a 06EE903A 		vmov	s13, r3	@ int
 508 004e F8EEE66A 		vcvt.f32.s32	s13, s13
 509 0052 66EE876A 		vmul.f32	s13, s13, s14
 112:controller/engine_cycle/ignition.c ****     volatile angle_t next_dwell_angle = next_spark_angle - (float)configuration.ignition_dwell * (f
 510              		.loc 1 112 72 view .LVU143
 511 0056 B3EE0E6A 		vmov.f32	s12, #3.0e+1
 512 005a 76EEC66A 		vsub.f32	s13, s13, s12
 112:controller/engine_cycle/ignition.c ****     volatile angle_t next_dwell_angle = next_spark_angle - (float)configuration.ignition_dwell * (f
 513              		.loc 1 112 88 view .LVU144
 514 005e 37EE267A 		vadd.f32	s14, s14, s13
 515              	.LVL40:
 112:controller/engine_cycle/ignition.c ****     volatile angle_t next_dwell_angle = next_spark_angle - (float)configuration.ignition_dwell * (f
 516              		.loc 1 112 22 view .LVU145
 517 0062 8DED037A 		vstr.32	s14, [sp, #12]
 113:controller/engine_cycle/ignition.c ****     
 518              		.loc 1 113 5 is_stmt 1 view .LVU146
 113:controller/engine_cycle/ignition.c ****     
 519              		.loc 1 113 58 is_stmt 0 view .LVU147
 520 0066 9DED037A 		vldr.32	s14, [sp, #12]
 113:controller/engine_cycle/ignition.c ****     
 521              		.loc 1 113 96 view .LVU148
 522 006a DFED426A 		vldr.32	s13, .L53+8
 523 006e 67EEA67A 		vmul.f32	s15, s15, s13
 524              	.LVL41:
 525              	.LBB13:
 526              	.LBI13:
 527              		.file 2 "controller/utils/utils.h"
   1:controller/utils/utils.h **** /**
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 16


   2:controller/utils/utils.h ****  * @file utils.h
   3:controller/utils/utils.h ****  * @brief Header file containing utility functions and definitions for the smart generator controll
   4:controller/utils/utils.h ****  * 
   5:controller/utils/utils.h ****  * This file provides declarations for utility functions and macros that are
   6:controller/utils/utils.h ****  * used throughout the firmware to support various functionalities.
   7:controller/utils/utils.h ****  * 
   8:controller/utils/utils.h ****  * @note Ensure that this file is included wherever utility functions are required.
   9:controller/utils/utils.h ****  */
  10:controller/utils/utils.h **** #ifndef UTILS_H
  11:controller/utils/utils.h **** #define UTILS_H
  12:controller/utils/utils.h **** 
  13:controller/utils/utils.h **** #include "types.h"
  14:controller/utils/utils.h **** #include "math.h"
  15:controller/utils/utils.h **** #define IS_IN_RANGE(value, min, max) ((value) >= (min) && (value) <= (max))
  16:controller/utils/utils.h **** #define ABS(value) ((value) < 0 ? -(value) : (value))
  17:controller/utils/utils.h **** #define CLAMP(value, min, max) ((value) < (min) ? (min) : ((value) > (max) ? (max) : (value)))
  18:controller/utils/utils.h **** 
  19:controller/utils/utils.h **** /**
  20:controller/utils/utils.h ****  * @brief Maps a value from one range to another.
  21:controller/utils/utils.h ****  * 
  22:controller/utils/utils.h ****  * @param x The value to map.
  23:controller/utils/utils.h ****  * @param in_min The lower bound of the input range.
  24:controller/utils/utils.h ****  * @param in_max The upper bound of the input range.
  25:controller/utils/utils.h ****  * @param out_min The lower bound of the output range.
  26:controller/utils/utils.h ****  * @param out_max The upper bound of the output range.
  27:controller/utils/utils.h ****  * @return The mapped value in the output range.
  28:controller/utils/utils.h ****  */
  29:controller/utils/utils.h **** #define MAP(x, in_min, in_max, out_min, out_max) \
  30:controller/utils/utils.h ****     (((x) - (in_min)) * ((out_max) - (out_min)) / ((in_max) - (in_min)) + (out_min))
  31:controller/utils/utils.h **** 
  32:controller/utils/utils.h **** 
  33:controller/utils/utils.h **** /**
  34:controller/utils/utils.h ****  * @brief Maps a uint16_t value from one range to another.
  35:controller/utils/utils.h ****  * 
  36:controller/utils/utils.h ****  * @param x The value to map.
  37:controller/utils/utils.h ****  * @param in_min The lower bound of the input range.
  38:controller/utils/utils.h ****  * @param in_max The upper bound of the input range.
  39:controller/utils/utils.h ****  * @param out_min The lower bound of the output range.
  40:controller/utils/utils.h ****  * @param out_max The upper bound of the output range.
  41:controller/utils/utils.h ****  * @return The mapped value in the output range.
  42:controller/utils/utils.h ****  */
  43:controller/utils/utils.h **** static inline uint16_t map_uint16(uint16_t x, uint16_t in_min, uint16_t in_max, uint16_t out_min, u
  44:controller/utils/utils.h **** {
  45:controller/utils/utils.h ****     if (in_max == in_min)
  46:controller/utils/utils.h ****     {
  47:controller/utils/utils.h ****         return 0; // Avoid division by zero
  48:controller/utils/utils.h ****     }
  49:controller/utils/utils.h ****     return (uint16_t)((x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min);
  50:controller/utils/utils.h **** }
  51:controller/utils/utils.h **** 
  52:controller/utils/utils.h **** static inline float mapf(float x, float in_min, float in_max, float out_min, float out_max)
  53:controller/utils/utils.h **** {
  54:controller/utils/utils.h ****     if (in_max == in_min)
  55:controller/utils/utils.h ****     {
  56:controller/utils/utils.h ****         return 0.0f; // Avoid division by zero
  57:controller/utils/utils.h ****     }
  58:controller/utils/utils.h ****     return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 17


  59:controller/utils/utils.h **** }
  60:controller/utils/utils.h **** 
  61:controller/utils/utils.h **** 
  62:controller/utils/utils.h **** 
  63:controller/utils/utils.h **** #define CELSIUS_TO_KELVIN(celsius) ((celsius) + 273.15f)
  64:controller/utils/utils.h **** #define KELVIN_TO_CELSIUS(kelvin) ((kelvin) - 273.15f)
  65:controller/utils/utils.h **** 
  66:controller/utils/utils.h **** /**
  67:controller/utils/utils.h ****  * @brief Function to calculate the microseconds it takes for the engine to turn one degree.
  68:controller/utils/utils.h ****  * @note Returns 0 if rpm is 0.
  69:controller/utils/utils.h ****  */
  70:controller/utils/utils.h **** static inline time_us_t microseconds_per_degree(rpm_t rpm)
  71:controller/utils/utils.h **** {
  72:controller/utils/utils.h ****     if (rpm == 0)
  73:controller/utils/utils.h ****     {
  74:controller/utils/utils.h ****         return 0;
  75:controller/utils/utils.h ****     }
  76:controller/utils/utils.h ****     return (time_us_t) 60.0f * 1e6f / (rpm * 360.0f);
  77:controller/utils/utils.h **** }
  78:controller/utils/utils.h **** 
  79:controller/utils/utils.h **** /**
  80:controller/utils/utils.h ****  * @brief Function to calculate the degrees the engine turns in one microsecond.
  81:controller/utils/utils.h ****  * @note Returns 0 if rpm is 0.
  82:controller/utils/utils.h ****  */
  83:controller/utils/utils.h **** static inline angle_t degrees_per_microsecond(rpm_t rpm)
 528              		.loc 2 83 23 is_stmt 1 view .LVU149
 529              	.LBB14:
  84:controller/utils/utils.h **** {
  85:controller/utils/utils.h ****     if (rpm == 0)
 530              		.loc 2 85 5 view .LVU150
 531              		.loc 2 85 8 is_stmt 0 view .LVU151
 532 0072 F5EE400A 		vcmp.f32	s1, #0
 533 0076 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 534 007a 6FD0     		beq	.L44
  86:controller/utils/utils.h ****     {
  87:controller/utils/utils.h ****         return 0.0f;
  88:controller/utils/utils.h ****     }
  89:controller/utils/utils.h ****     return (angle_t)(rpm * 360.0f) / (60.0f * 1e6f);
 535              		.loc 2 89 5 is_stmt 1 view .LVU152
 536              		.loc 2 89 12 is_stmt 0 view .LVU153
 537 007c DFED3E6A 		vldr.32	s13, .L53+12
 538 0080 60EEA66A 		vmul.f32	s13, s1, s13
 539              		.loc 2 89 36 view .LVU154
 540 0084 DFED3D5A 		vldr.32	s11, .L53+16
 541 0088 86EEA56A 		vdiv.f32	s12, s13, s11
 542              	.L40:
 543              	.LVL42:
 544              		.loc 2 89 36 view .LVU155
 545              	.LBE14:
 546              	.LBE13:
 113:controller/engine_cycle/ignition.c ****     
 547              		.loc 1 113 110 discriminator 1 view .LVU156
 548 008c 67EE867A 		vmul.f32	s15, s15, s12
 113:controller/engine_cycle/ignition.c ****     
 549              		.loc 1 113 58 discriminator 1 view .LVU157
 550 0090 77EE677A 		vsub.f32	s15, s14, s15
 113:controller/engine_cycle/ignition.c ****     
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 18


 551              		.loc 1 113 22 discriminator 1 view .LVU158
 552 0094 CDED027A 		vstr.32	s15, [sp, #8]
 115:controller/engine_cycle/ignition.c **** 
 553              		.loc 1 115 5 is_stmt 1 view .LVU159
 117:controller/engine_cycle/ignition.c ****     next_firing_cylinders[1] = ignition_order[phase] - 1;
 554              		.loc 1 117 5 view .LVU160
 117:controller/engine_cycle/ignition.c ****     next_firing_cylinders[1] = ignition_order[phase] - 1;
 555              		.loc 1 117 46 is_stmt 0 view .LVU161
 556 0098 394C     		ldr	r4, .L53+20
 557 009a E25C     		ldrb	r2, [r4, r3]	@ zero_extendqisi2
 117:controller/engine_cycle/ignition.c ****     next_firing_cylinders[1] = ignition_order[phase] - 1;
 558              		.loc 1 117 54 view .LVU162
 559 009c 013A     		subs	r2, r2, #1
 560 009e D2B2     		uxtb	r2, r2
 117:controller/engine_cycle/ignition.c ****     next_firing_cylinders[1] = ignition_order[phase] - 1;
 561              		.loc 1 117 30 view .LVU163
 562 00a0 3849     		ldr	r1, .L53+24
 563 00a2 0A70     		strb	r2, [r1]
 118:controller/engine_cycle/ignition.c **** 
 564              		.loc 1 118 5 is_stmt 1 view .LVU164
 118:controller/engine_cycle/ignition.c **** 
 565              		.loc 1 118 30 is_stmt 0 view .LVU165
 566 00a4 4A70     		strb	r2, [r1, #1]
 120:controller/engine_cycle/ignition.c ****     {
 567              		.loc 1 120 5 is_stmt 1 view .LVU166
 122:controller/engine_cycle/ignition.c ****         
 568              		.loc 1 122 9 view .LVU167
 122:controller/engine_cycle/ignition.c ****         
 569              		.loc 1 122 57 is_stmt 0 view .LVU168
 570 00a6 0233     		adds	r3, r3, #2
 571              	.LVL43:
 122:controller/engine_cycle/ignition.c ****         
 572              		.loc 1 122 50 view .LVU169
 573 00a8 E35C     		ldrb	r3, [r4, r3]	@ zero_extendqisi2
 574              	.LVL44:
 122:controller/engine_cycle/ignition.c ****         
 575              		.loc 1 122 62 view .LVU170
 576 00aa 013B     		subs	r3, r3, #1
 122:controller/engine_cycle/ignition.c ****         
 577              		.loc 1 122 34 view .LVU171
 578 00ac 4B70     		strb	r3, [r1, #1]
 127:controller/engine_cycle/ignition.c ****     if (is_synced && (next_dwell_angle - crankshaft_angle) < 10 && !spark_is_in_progress && (next_d
 579              		.loc 1 127 5 is_stmt 1 view .LVU172
 127:controller/engine_cycle/ignition.c ****     if (is_synced && (next_dwell_angle - crankshaft_angle) < 10 && !spark_is_in_progress && (next_d
 580              		.loc 1 127 36 is_stmt 0 view .LVU173
 581 00ae 304B     		ldr	r3, .L53+4
 582              	.LVL45:
 127:controller/engine_cycle/ignition.c ****     if (is_synced && (next_dwell_angle - crankshaft_angle) < 10 && !spark_is_in_progress && (next_d
 583              		.loc 1 127 36 view .LVU174
 584 00b0 5B7E     		ldrb	r3, [r3, #25]	@ zero_extendqisi2
 585              	.LVL46:
 128:controller/engine_cycle/ignition.c ****     {
 586              		.loc 1 128 5 is_stmt 1 view .LVU175
 128:controller/engine_cycle/ignition.c ****     {
 587              		.loc 1 128 8 is_stmt 0 view .LVU176
 588 00b2 012B     		cmp	r3, #1
 589 00b4 50D1     		bne	.L35
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 19


 128:controller/engine_cycle/ignition.c ****     {
 590              		.loc 1 128 40 discriminator 1 view .LVU177
 591 00b6 DDED027A 		vldr.32	s15, [sp, #8]
 592 00ba 77EEC07A 		vsub.f32	s15, s15, s0
 128:controller/engine_cycle/ignition.c ****     {
 593              		.loc 1 128 19 discriminator 1 view .LVU178
 594 00be B2EE047A 		vmov.f32	s14, #1.0e+1
 595 00c2 F4EEC77A 		vcmpe.f32	s15, s14
 596 00c6 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 597 00ca 45D5     		bpl	.L35
 128:controller/engine_cycle/ignition.c ****     {
 598              		.loc 1 128 68 discriminator 2 view .LVU179
 599 00cc 2E4B     		ldr	r3, .L53+28
 600 00ce 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 128:controller/engine_cycle/ignition.c ****     {
 601              		.loc 1 128 65 discriminator 2 view .LVU180
 602 00d0 002B     		cmp	r3, #0
 603 00d2 41D1     		bne	.L35
 128:controller/engine_cycle/ignition.c ****     {
 604              		.loc 1 128 111 discriminator 3 view .LVU181
 605 00d4 DDED027A 		vldr.32	s15, [sp, #8]
 606 00d8 77EEC07A 		vsub.f32	s15, s15, s0
 128:controller/engine_cycle/ignition.c ****     {
 607              		.loc 1 128 90 discriminator 3 view .LVU182
 608 00dc F5EEC07A 		vcmpe.f32	s15, #0
 609 00e0 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 610 00e4 38DD     		ble	.L35
 611              	.LBB16:
 131:controller/engine_cycle/ignition.c ****         time_us_t dwell_start_time_us = current_time_us + (time_us_t)((next_dwell_angle - crankshaf
 612              		.loc 1 131 9 is_stmt 1 view .LVU183
 131:controller/engine_cycle/ignition.c ****         time_us_t dwell_start_time_us = current_time_us + (time_us_t)((next_dwell_angle - crankshaf
 613              		.loc 1 131 30 is_stmt 0 view .LVU184
 614 00e6 284B     		ldr	r3, .L53+28
 615 00e8 0122     		movs	r2, #1
 616 00ea 1A70     		strb	r2, [r3]
 132:controller/engine_cycle/ignition.c ****         time_us_t spark_start_time_us = current_time_us + (time_us_t)((next_spark_angle - crankshaf
 617              		.loc 1 132 9 is_stmt 1 view .LVU185
 132:controller/engine_cycle/ignition.c ****         time_us_t spark_start_time_us = current_time_us + (time_us_t)((next_spark_angle - crankshaf
 618              		.loc 1 132 89 is_stmt 0 view .LVU186
 619 00ec 9DED027A 		vldr.32	s14, [sp, #8]
 620 00f0 37EE407A 		vsub.f32	s14, s14, s0
 621              	.LVL47:
 622              	.LBB17:
 623              	.LBI17:
  70:controller/utils/utils.h **** {
 624              		.loc 2 70 25 is_stmt 1 view .LVU187
 625              	.LBB18:
  72:controller/utils/utils.h ****     {
 626              		.loc 2 72 5 view .LVU188
  72:controller/utils/utils.h ****     {
 627              		.loc 2 72 8 is_stmt 0 view .LVU189
 628 00f4 F5EE400A 		vcmp.f32	s1, #0
 629 00f8 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 630 00fc 31D0     		beq	.L45
  76:controller/utils/utils.h **** }
 631              		.loc 2 76 5 is_stmt 1 view .LVU190
  76:controller/utils/utils.h **** }
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 20


 632              		.loc 2 76 44 is_stmt 0 view .LVU191
 633 00fe DFED1E7A 		vldr.32	s15, .L53+12
 634 0102 60EEA70A 		vmul.f32	s1, s1, s15
 635              	.LVL48:
  76:controller/utils/utils.h **** }
 636              		.loc 2 76 37 view .LVU192
 637 0106 DFED1D6A 		vldr.32	s13, .L53+16
 638 010a C6EEA07A 		vdiv.f32	s15, s13, s1
 639 010e FCEEE77A 		vcvt.u32.f32	s15, s15
 640              	.L43:
 641              	.LVL49:
  76:controller/utils/utils.h **** }
 642              		.loc 2 76 37 view .LVU193
 643              	.LBE18:
 644              	.LBE17:
 132:controller/engine_cycle/ignition.c ****         time_us_t spark_start_time_us = current_time_us + (time_us_t)((next_spark_angle - crankshaf
 645              		.loc 1 132 109 discriminator 1 view .LVU194
 646 0112 F8EE677A 		vcvt.f32.u32	s15, s15
 647 0116 27EE277A 		vmul.f32	s14, s14, s15
 132:controller/engine_cycle/ignition.c ****         time_us_t spark_start_time_us = current_time_us + (time_us_t)((next_spark_angle - crankshaf
 648              		.loc 1 132 59 discriminator 1 view .LVU195
 649 011a BCEEC77A 		vcvt.u32.f32	s14, s14
 650              	.LVL50:
 133:controller/engine_cycle/ignition.c ****         scheduler_schedule_event_with_arg(dwell_start_time_us, ignition_coil_begin_charge, (void*)n
 651              		.loc 1 133 9 is_stmt 1 view .LVU196
 133:controller/engine_cycle/ignition.c ****         scheduler_schedule_event_with_arg(dwell_start_time_us, ignition_coil_begin_charge, (void*)n
 652              		.loc 1 133 89 is_stmt 0 view .LVU197
 653 011e DDED036A 		vldr.32	s13, [sp, #12]
 654 0122 76EEC06A 		vsub.f32	s13, s13, s0
 133:controller/engine_cycle/ignition.c ****         scheduler_schedule_event_with_arg(dwell_start_time_us, ignition_coil_begin_charge, (void*)n
 655              		.loc 1 133 109 discriminator 1 view .LVU198
 656 0126 67EEA67A 		vmul.f32	s15, s15, s13
 133:controller/engine_cycle/ignition.c ****         scheduler_schedule_event_with_arg(dwell_start_time_us, ignition_coil_begin_charge, (void*)n
 657              		.loc 1 133 59 discriminator 1 view .LVU199
 658 012a FCEEE77A 		vcvt.u32.f32	s15, s15
 133:controller/engine_cycle/ignition.c ****         scheduler_schedule_event_with_arg(dwell_start_time_us, ignition_coil_begin_charge, (void*)n
 659              		.loc 1 133 19 discriminator 1 view .LVU200
 660 012e 17EE904A 		vmov	r4, s15	@ int
 661 0132 0444     		add	r4, r4, r0
 662              	.LVL51:
 134:controller/engine_cycle/ignition.c ****         scheduler_schedule_event_with_arg(spark_start_time_us, ignition_coil_fire_spark, (void*)nex
 663              		.loc 1 134 9 is_stmt 1 view .LVU201
 664 0134 134D     		ldr	r5, .L53+24
 665 0136 2A46     		mov	r2, r5
 666 0138 1449     		ldr	r1, .L53+32
 667 013a 17EE103A 		vmov	r3, s14	@ int
 668 013e 0344     		add	r3, r3, r0
 669              	.LVL52:
 134:controller/engine_cycle/ignition.c ****         scheduler_schedule_event_with_arg(spark_start_time_us, ignition_coil_fire_spark, (void*)nex
 670              		.loc 1 134 9 is_stmt 0 view .LVU202
 671 0140 1846     		mov	r0, r3
 672              	.LVL53:
 134:controller/engine_cycle/ignition.c ****         scheduler_schedule_event_with_arg(spark_start_time_us, ignition_coil_fire_spark, (void*)nex
 673              		.loc 1 134 9 view .LVU203
 674 0142 FFF7FEFF 		bl	scheduler_schedule_event_with_arg
 675              	.LVL54:
 135:controller/engine_cycle/ignition.c **** 
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 21


 676              		.loc 1 135 9 is_stmt 1 view .LVU204
 677 0146 2A46     		mov	r2, r5
 678 0148 1149     		ldr	r1, .L53+36
 679 014a 2046     		mov	r0, r4
 680 014c FFF7FEFF 		bl	scheduler_schedule_event_with_arg
 681              	.LVL55:
 682 0150 02E0     		b	.L35
 683              	.LVL56:
 684              	.L37:
 135:controller/engine_cycle/ignition.c **** 
 685              		.loc 1 135 9 is_stmt 0 view .LVU205
 686              	.LBE16:
  86:controller/engine_cycle/ignition.c ****         return;
 687              		.loc 1 86 9 is_stmt 1 view .LVU206
 688 0152 1048     		ldr	r0, .L53+40
 689              	.LVL57:
  86:controller/engine_cycle/ignition.c ****         return;
 690              		.loc 1 86 9 is_stmt 0 view .LVU207
 691 0154 FFF7FEFF 		bl	log_error
 692              	.LVL58:
  87:controller/engine_cycle/ignition.c ****     }
 693              		.loc 1 87 9 is_stmt 1 view .LVU208
 694              	.L35:
 139:controller/engine_cycle/ignition.c **** 
 695              		.loc 1 139 1 is_stmt 0 view .LVU209
 696 0158 05B0     		add	sp, sp, #20
 697              		.cfi_remember_state
 698              		.cfi_def_cfa_offset 12
 699              		@ sp needed
 700 015a 30BD     		pop	{r4, r5, pc}
 701              	.LVL59:
 702              	.L44:
 703              		.cfi_restore_state
 704              	.LBB21:
 705              	.LBB15:
  87:controller/utils/utils.h ****     }
 706              		.loc 2 87 16 view .LVU210
 707 015c 9FED0E6A 		vldr.32	s12, .L53+44
 708 0160 94E7     		b	.L40
 709              	.LVL60:
 710              	.L45:
  87:controller/utils/utils.h ****     }
 711              		.loc 2 87 16 view .LVU211
 712              	.LBE15:
 713              	.LBE21:
 714              	.LBB22:
 715              	.LBB20:
 716              	.LBB19:
  74:controller/utils/utils.h ****     }
 717              		.loc 2 74 16 view .LVU212
 718 0162 DFED0E7A 		vldr.32	s15, .L53+48	@ int
 719 0166 D4E7     		b	.L43
 720              	.LVL61:
 721              	.L50:
 722              		.cfi_def_cfa_offset 0
 723              		.cfi_restore 4
 724              		.cfi_restore 5
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 22


 725              		.cfi_restore 14
  74:controller/utils/utils.h ****     }
 726              		.loc 2 74 16 view .LVU213
 727 0168 7047     		bx	lr
 728              	.L54:
 729 016a 00BF     		.align	2
 730              	.L53:
 731 016c 00000000 		.word	configuration
 732 0170 00000000 		.word	engine
 733 0174 00007A44 		.word	1148846080
 734 0178 0000B443 		.word	1135869952
 735 017c C0E1644C 		.word	1281679808
 736 0180 00000000 		.word	ignition_order
 737 0184 00000000 		.word	next_firing_cylinders.0
 738 0188 00000000 		.word	spark_is_in_progress
 739 018c 00000000 		.word	ignition_coil_begin_charge
 740 0190 00000000 		.word	ignition_coil_fire_spark
 741 0194 00000000 		.word	.LC4
 742 0198 00000000 		.word	0
 743 019c 00000000 		.word	0
 744              	.LBE19:
 745              	.LBE20:
 746              	.LBE22:
 747              		.cfi_endproc
 748              	.LFE229:
 750              		.section	.rodata.ignition_get_number_of_sparks_per_coil.str1.4,"aMS",%progbits,1
 751              		.align	2
 752              	.LC5:
 753 0000 556E6B6F 		.ascii	"Unkown ignition mode\000"
 753      776E2069 
 753      676E6974 
 753      696F6E20 
 753      6D6F6465 
 754              		.section	.text.ignition_get_number_of_sparks_per_coil,"ax",%progbits
 755              		.align	1
 756              		.global	ignition_get_number_of_sparks_per_coil
 757              		.syntax unified
 758              		.thumb
 759              		.thumb_func
 761              	ignition_get_number_of_sparks_per_coil:
 762              	.LVL62:
 763              	.LFB230:
 149:controller/engine_cycle/ignition.c ****     switch (ignition_mode)
 764              		.loc 1 149 1 is_stmt 1 view -0
 765              		.cfi_startproc
 766              		@ args = 0, pretend = 0, frame = 0
 767              		@ frame_needed = 0, uses_anonymous_args = 0
 150:controller/engine_cycle/ignition.c ****     {
 768              		.loc 1 150 5 view .LVU215
 769 0000 0228     		cmp	r0, #2
 770 0002 0CD0     		beq	.L58
 771 0004 0328     		cmp	r0, #3
 772 0006 0CD0     		beq	.L59
 149:controller/engine_cycle/ignition.c ****     switch (ignition_mode)
 773              		.loc 1 149 1 is_stmt 0 view .LVU216
 774 0008 08B5     		push	{r3, lr}
 775              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 23


 776              		.cfi_offset 3, -8
 777              		.cfi_offset 14, -4
 150:controller/engine_cycle/ignition.c ****     {
 778              		.loc 1 150 5 view .LVU217
 779 000a 0128     		cmp	r0, #1
 780 000c 02D1     		bne	.L57
 153:controller/engine_cycle/ignition.c ****     case IM_INDIVIDUAL_COILS:
 781              		.loc 1 153 9 is_stmt 1 view .LVU218
 153:controller/engine_cycle/ignition.c ****     case IM_INDIVIDUAL_COILS:
 782              		.loc 1 153 22 is_stmt 0 view .LVU219
 783 000e 064B     		ldr	r3, .L64
 784 0010 187C     		ldrb	r0, [r3, #16]	@ zero_extendqisi2
 785              	.LVL63:
 786              	.L56:
 162:controller/engine_cycle/ignition.c **** 
 787              		.loc 1 162 1 view .LVU220
 788 0012 08BD     		pop	{r3, pc}
 789              	.LVL64:
 790              	.L57:
 159:controller/engine_cycle/ignition.c ****         return 1;
 791              		.loc 1 159 9 is_stmt 1 view .LVU221
 792 0014 0548     		ldr	r0, .L64+4
 793              	.LVL65:
 159:controller/engine_cycle/ignition.c ****         return 1;
 794              		.loc 1 159 9 is_stmt 0 view .LVU222
 795 0016 FFF7FEFF 		bl	log_error
 796              	.LVL66:
 160:controller/engine_cycle/ignition.c ****     }
 797              		.loc 1 160 9 is_stmt 1 view .LVU223
 160:controller/engine_cycle/ignition.c ****     }
 798              		.loc 1 160 16 is_stmt 0 view .LVU224
 799 001a 0120     		movs	r0, #1
 800 001c F9E7     		b	.L56
 801              	.LVL67:
 802              	.L58:
 803              		.cfi_def_cfa_offset 0
 804              		.cfi_restore 3
 805              		.cfi_restore 14
 150:controller/engine_cycle/ignition.c ****     {
 806              		.loc 1 150 5 view .LVU225
 807 001e 0120     		movs	r0, #1
 808              	.LVL68:
 150:controller/engine_cycle/ignition.c ****     {
 809              		.loc 1 150 5 view .LVU226
 810 0020 7047     		bx	lr
 811              	.LVL69:
 812              	.L59:
 157:controller/engine_cycle/ignition.c ****     default:
 813              		.loc 1 157 16 view .LVU227
 814 0022 0220     		movs	r0, #2
 815              	.LVL70:
 162:controller/engine_cycle/ignition.c **** 
 816              		.loc 1 162 1 view .LVU228
 817 0024 7047     		bx	lr
 818              	.L65:
 819 0026 00BF     		.align	2
 820              	.L64:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 24


 821 0028 00000000 		.word	engine
 822 002c 00000000 		.word	.LC5
 823              		.cfi_endproc
 824              	.LFE230:
 826              		.section	.text.ignition_get_coil_duty_cycle,"ax",%progbits
 827              		.align	1
 828              		.global	ignition_get_coil_duty_cycle
 829              		.syntax unified
 830              		.thumb
 831              		.thumb_func
 833              	ignition_get_coil_duty_cycle:
 834              	.LFB233:
 214:controller/engine_cycle/ignition.c **** 
 215:controller/engine_cycle/ignition.c **** /**
 216:controller/engine_cycle/ignition.c ****  * @brief Gets the duty cycle of the ignition coil as a percentage.
 217:controller/engine_cycle/ignition.c ****  * 
 218:controller/engine_cycle/ignition.c ****  * @return The duty cycle of the ignition coil.
 219:controller/engine_cycle/ignition.c ****  */
 220:controller/engine_cycle/ignition.c **** percent_t ignition_get_coil_duty_cycle()
 221:controller/engine_cycle/ignition.c **** {
 835              		.loc 1 221 1 is_stmt 1 view -0
 836              		.cfi_startproc
 837              		@ args = 0, pretend = 0, frame = 0
 838              		@ frame_needed = 0, uses_anonymous_args = 0
 839              		@ link register save eliminated.
 222:controller/engine_cycle/ignition.c **** 
 223:controller/engine_cycle/ignition.c **** }
 840              		.loc 1 223 1 view .LVU230
 841 0000 7047     		bx	lr
 842              		.cfi_endproc
 843              	.LFE233:
 845              		.section	.text.ignition_get_advance,"ax",%progbits
 846              		.align	1
 847              		.global	ignition_get_advance
 848              		.syntax unified
 849              		.thumb
 850              		.thumb_func
 852              	ignition_get_advance:
 853              	.LFB234:
 224:controller/engine_cycle/ignition.c **** 
 225:controller/engine_cycle/ignition.c **** angle_t ignition_get_advance()
 226:controller/engine_cycle/ignition.c **** {
 854              		.loc 1 226 1 view -0
 855              		.cfi_startproc
 856              		@ args = 0, pretend = 0, frame = 0
 857              		@ frame_needed = 0, uses_anonymous_args = 0
 858 0000 08B5     		push	{r3, lr}
 859              		.cfi_def_cfa_offset 8
 860              		.cfi_offset 3, -8
 861              		.cfi_offset 14, -4
 862 0002 2DED028B 		vpush.64	{d8}
 863              		.cfi_def_cfa_offset 16
 864              		.cfi_offset 80, -16
 865              		.cfi_offset 81, -12
 227:controller/engine_cycle/ignition.c ****     angle_t final_advance = IGNITION_ADVANCE_FAIL_SAFE;
 866              		.loc 1 227 5 view .LVU232
 867              	.LVL71:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 25


 228:controller/engine_cycle/ignition.c ****     if (engine.spinning_state != SS_RUNNING)
 868              		.loc 1 228 5 view .LVU233
 869              		.loc 1 228 15 is_stmt 0 view .LVU234
 870 0006 0F4B     		ldr	r3, .L71
 871 0008 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
 872              		.loc 1 228 8 view .LVU235
 873 000a 032B     		cmp	r3, #3
 874 000c 05D0     		beq	.L68
 229:controller/engine_cycle/ignition.c ****     {
 230:controller/engine_cycle/ignition.c ****         return configuration.cranking_advance;
 875              		.loc 1 230 9 is_stmt 1 view .LVU236
 876              		.loc 1 230 29 is_stmt 0 view .LVU237
 877 000e 0E4B     		ldr	r3, .L71+4
 878 0010 93ED040A 		vldr.32	s0, [r3, #16]
 879              	.LVL72:
 880              	.L67:
 231:controller/engine_cycle/ignition.c ****     }
 232:controller/engine_cycle/ignition.c ****     
 233:controller/engine_cycle/ignition.c ****     temperature_t intake_air_temp = sensor_iat_get();
 234:controller/engine_cycle/ignition.c ****     rpm_t rpm = crankshaft_get_rpm();
 235:controller/engine_cycle/ignition.c ****     pressure_t map = sensor_map_get();
 236:controller/engine_cycle/ignition.c **** 
 237:controller/engine_cycle/ignition.c ****     final_advance += table_2d_get_value(&configuration.ignition_table, rpm, map);
 238:controller/engine_cycle/ignition.c ****     
 239:controller/engine_cycle/ignition.c ****     /* Here we can apply all kinds of correction to the table */
 240:controller/engine_cycle/ignition.c **** 
 241:controller/engine_cycle/ignition.c ****     return final_advance;
 242:controller/engine_cycle/ignition.c **** }...
 881              		.loc 1 242 1 view .LVU238
 882 0014 BDEC028B 		vldm	sp!, {d8}
 883              		.cfi_remember_state
 884              		.cfi_restore 80
 885              		.cfi_restore 81
 886              		.cfi_def_cfa_offset 8
 887 0018 08BD     		pop	{r3, pc}
 888              	.LVL73:
 889              	.L68:
 890              		.cfi_restore_state
 233:controller/engine_cycle/ignition.c ****     temperature_t intake_air_temp = sensor_iat_get();
 891              		.loc 1 233 5 is_stmt 1 view .LVU239
 233:controller/engine_cycle/ignition.c ****     temperature_t intake_air_temp = sensor_iat_get();
 892              		.loc 1 233 37 is_stmt 0 view .LVU240
 893 001a FFF7FEFF 		bl	sensor_iat_get
 894              	.LVL74:
 234:controller/engine_cycle/ignition.c ****     rpm_t rpm = crankshaft_get_rpm();
 895              		.loc 1 234 5 is_stmt 1 view .LVU241
 234:controller/engine_cycle/ignition.c ****     rpm_t rpm = crankshaft_get_rpm();
 896              		.loc 1 234 17 is_stmt 0 view .LVU242
 897 001e FFF7FEFF 		bl	crankshaft_get_rpm
 898              	.LVL75:
 899 0022 B0EE408A 		vmov.f32	s16, s0
 900              	.LVL76:
 235:controller/engine_cycle/ignition.c ****     pressure_t map = sensor_map_get();
 901              		.loc 1 235 5 is_stmt 1 view .LVU243
 235:controller/engine_cycle/ignition.c ****     pressure_t map = sensor_map_get();
 902              		.loc 1 235 22 is_stmt 0 view .LVU244
 903 0026 FFF7FEFF 		bl	sensor_map_get
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 26


 904              	.LVL77:
 235:controller/engine_cycle/ignition.c ****     pressure_t map = sensor_map_get();
 905              		.loc 1 235 22 view .LVU245
 906 002a F0EE400A 		vmov.f32	s1, s0
 907              	.LVL78:
 237:controller/engine_cycle/ignition.c ****     final_advance += table_2d_get_value(&configuration.ignition_table, rpm, map);
 908              		.loc 1 237 5 is_stmt 1 view .LVU246
 237:controller/engine_cycle/ignition.c ****     final_advance += table_2d_get_value(&configuration.ignition_table, rpm, map);
 909              		.loc 1 237 22 is_stmt 0 view .LVU247
 910 002e B0EE480A 		vmov.f32	s0, s16
 911              	.LVL79:
 237:controller/engine_cycle/ignition.c ****     final_advance += table_2d_get_value(&configuration.ignition_table, rpm, map);
 912              		.loc 1 237 22 view .LVU248
 913 0032 0648     		ldr	r0, .L71+8
 914 0034 FFF7FEFF 		bl	table_2d_get_value
 915              	.LVL80:
 237:controller/engine_cycle/ignition.c ****     final_advance += table_2d_get_value(&configuration.ignition_table, rpm, map);
 916              		.loc 1 237 19 discriminator 1 view .LVU249
 917 0038 F2EE047A 		vmov.f32	s15, #1.0e+1
 918 003c 30EE270A 		vadd.f32	s0, s0, s15
 919              	.LVL81:
 241:controller/engine_cycle/ignition.c ****     return final_advance;
 920              		.loc 1 241 5 is_stmt 1 view .LVU250
 241:controller/engine_cycle/ignition.c ****     return final_advance;
 921              		.loc 1 241 12 is_stmt 0 view .LVU251
 922 0040 E8E7     		b	.L67
 923              	.L72:
 924 0042 00BF     		.align	2
 925              	.L71:
 926 0044 00000000 		.word	engine
 927 0048 00000000 		.word	configuration
 928 004c 2C000000 		.word	configuration+44
 929              		.cfi_endproc
 930              	.LFE234:
 932              		.section	.bss.next_firing_cylinders.0,"aw",%nobits
 933              		.align	2
 936              	next_firing_cylinders.0:
 937 0000 0000     		.space	2
 938              		.section	.bss.spark_is_in_progress,"aw",%nobits
 941              	spark_is_in_progress:
 942 0000 00       		.space	1
 943              		.global	ignition_order
 944              		.section	.bss.ignition_order,"aw",%nobits
 945              		.align	2
 948              	ignition_order:
 949 0000 00000000 		.space	4
 950              		.global	ignition_coil_state
 951              		.section	.bss.ignition_coil_state,"aw",%nobits
 952              		.align	2
 955              	ignition_coil_state:
 956 0000 00000000 		.space	4
 957              		.global	ignition_outputs
 958              		.section	.bss.ignition_outputs,"aw",%nobits
 959              		.align	2
 962              	ignition_outputs:
 963 0000 00000000 		.space	32
 963      00000000 
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 27


 963      00000000 
 963      00000000 
 963      00000000 
 964              		.text
 965              	.Letext0:
 966              		.file 3 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 967              		.file 4 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 968              		.file 5 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 969              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xc.h"
 970              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 971              		.file 8 "controller/types.h"
 972              		.file 9 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 973              		.file 10 "controller/engine_cycle/trigger.h"
 974              		.file 11 "controller/tables.h"
 975              		.file 12 "controller/IO/analog_inputs.h"
 976              		.file 13 "controller/IO/sensors/tps.h"
 977              		.file 14 "controller/IO/thermistor.h"
 978              		.file 15 "controller/utils/pid.h"
 979              		.file 16 "controller/algorithm/governer.h"
 980              		.file 17 "controller/utils/comms.h"
 981              		.file 18 "controller/controller.h"
 982              		.file 19 "controller/engine_cycle/ignition.h"
 983              		.file 20 "controller/IO/sensors/map.h"
 984              		.file 21 "controller/IO/sensors/iat.h"
 985              		.file 22 "controller/utils/timing.h"
 986              		.file 23 "controller/utils/error_handling.h"
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s 			page 28


DEFINED SYMBOLS
                            *ABS*:00000000 ignition.c
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:21     .rodata.ignition_coil_begin_charge.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:25     .text.ignition_coil_begin_charge:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:31     .text.ignition_coil_begin_charge:00000000 ignition_coil_begin_charge
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:119    .text.ignition_coil_begin_charge:0000004c $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:955    .bss.ignition_coil_state:00000000 ignition_coil_state
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:962    .bss.ignition_outputs:00000000 ignition_outputs
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:126    .text.ignition_coil_fire_spark:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:132    .text.ignition_coil_fire_spark:00000000 ignition_coil_fire_spark
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:224    .text.ignition_coil_fire_spark:00000050 $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:941    .bss.spark_is_in_progress:00000000 spark_is_in_progress
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:232    .rodata.ignition_init.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:242    .text.ignition_init:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:248    .text.ignition_init:00000000 ignition_init
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:426    .text.ignition_init:000000a4 $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:948    .bss.ignition_order:00000000 ignition_order
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:439    .rodata.ignition_trigger_event_handle.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:443    .text.ignition_trigger_event_handle:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:449    .text.ignition_trigger_event_handle:00000000 ignition_trigger_event_handle
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:731    .text.ignition_trigger_event_handle:0000016c $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:936    .bss.next_firing_cylinders.0:00000000 next_firing_cylinders.0
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:751    .rodata.ignition_get_number_of_sparks_per_coil.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:755    .text.ignition_get_number_of_sparks_per_coil:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:761    .text.ignition_get_number_of_sparks_per_coil:00000000 ignition_get_number_of_sparks_per_coil
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:821    .text.ignition_get_number_of_sparks_per_coil:00000028 $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:827    .text.ignition_get_coil_duty_cycle:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:833    .text.ignition_get_coil_duty_cycle:00000000 ignition_get_coil_duty_cycle
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:846    .text.ignition_get_advance:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:852    .text.ignition_get_advance:00000000 ignition_get_advance
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:926    .text.ignition_get_advance:00000044 $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:933    .bss.next_firing_cylinders.0:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:942    .bss.spark_is_in_progress:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:945    .bss.ignition_order:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:952    .bss.ignition_coil_state:00000000 $d
C:\Users\alireza\AppData\Local\Temp\ccl9n1zq.s:959    .bss.ignition_outputs:00000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
log_error
HAL_GPIO_ReadPin
log_warning
configuration
engine
scheduler_schedule_event_with_arg
sensor_iat_get
crankshaft_get_rpm
sensor_map_get
table_2d_get_value
