ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"eeprom.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "controller/eeprom/eeprom.c"
  20              		.section	.text.EE_VerifyPageFullyErased,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	EE_VerifyPageFullyErased:
  27              	.LVL0:
  28              	.LFB221:
   1:controller/eeprom/eeprom.c **** /**
   2:controller/eeprom/eeprom.c ****   ******************************************************************************
   3:controller/eeprom/eeprom.c ****   * @file    EEPROM/EEPROM_Emulation/src/eeprom.c 
   4:controller/eeprom/eeprom.c ****   * @author  MCD Application Team
   5:controller/eeprom/eeprom.c ****   * @brief   This file provides all the EEPROM emulation firmware functions.
   6:controller/eeprom/eeprom.c ****   ******************************************************************************
   7:controller/eeprom/eeprom.c ****   * @attention
   8:controller/eeprom/eeprom.c ****   *
   9:controller/eeprom/eeprom.c ****   * <h2><center>&copy; Copyright ï¿½ 2017 STMicroelectronics International N.V. 
  10:controller/eeprom/eeprom.c ****   * All rights reserved.</center></h2>
  11:controller/eeprom/eeprom.c ****   *
  12:controller/eeprom/eeprom.c ****   * Redistribution and use in source and binary forms, with or without 
  13:controller/eeprom/eeprom.c ****   * modification, are permitted, provided that the following conditions are met:
  14:controller/eeprom/eeprom.c ****   *
  15:controller/eeprom/eeprom.c ****   * 1. Redistribution of source code must retain the above copyright notice, 
  16:controller/eeprom/eeprom.c ****   *    this list of conditions and the following disclaimer.
  17:controller/eeprom/eeprom.c ****   * 2. Redistributions in binary form must reproduce the above copyright notice,
  18:controller/eeprom/eeprom.c ****   *    this list of conditions and the following disclaimer in the documentation
  19:controller/eeprom/eeprom.c ****   *    and/or other materials provided with the distribution.
  20:controller/eeprom/eeprom.c ****   * 3. Neither the name of STMicroelectronics nor the names of other 
  21:controller/eeprom/eeprom.c ****   *    contributors to this software may be used to endorse or promote products 
  22:controller/eeprom/eeprom.c ****   *    derived from this software without specific written permission.
  23:controller/eeprom/eeprom.c ****   * 4. This software, including modifications and/or derivative works of this 
  24:controller/eeprom/eeprom.c ****   *    software, must execute solely and exclusively on microcontroller or
  25:controller/eeprom/eeprom.c ****   *    microprocessor devices manufactured by or for STMicroelectronics.
  26:controller/eeprom/eeprom.c ****   * 5. Redistribution and use of this software other than as permitted under 
  27:controller/eeprom/eeprom.c ****   *    this license is void and will automatically terminate your rights under 
  28:controller/eeprom/eeprom.c ****   *    this license. 
  29:controller/eeprom/eeprom.c ****   *
  30:controller/eeprom/eeprom.c ****   * THIS SOFTWARE IS PROVIDED BY STMICROELECTRONICS AND CONTRIBUTORS "AS IS" 
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 2


  31:controller/eeprom/eeprom.c ****   * AND ANY EXPRESS, IMPLIED OR STATUTORY WARRANTIES, INCLUDING, BUT NOT 
  32:controller/eeprom/eeprom.c ****   * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A 
  33:controller/eeprom/eeprom.c ****   * PARTICULAR PURPOSE AND NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY
  34:controller/eeprom/eeprom.c ****   * RIGHTS ARE DISCLAIMED TO THE FULLEST EXTENT PERMITTED BY LAW. IN NO EVENT 
  35:controller/eeprom/eeprom.c ****   * SHALL STMICROELECTRONICS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
  36:controller/eeprom/eeprom.c ****   * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  37:controller/eeprom/eeprom.c ****   * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, 
  38:controller/eeprom/eeprom.c ****   * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF 
  39:controller/eeprom/eeprom.c ****   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING 
  40:controller/eeprom/eeprom.c ****   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  41:controller/eeprom/eeprom.c ****   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  42:controller/eeprom/eeprom.c ****   *
  43:controller/eeprom/eeprom.c ****   ******************************************************************************
  44:controller/eeprom/eeprom.c ****   */
  45:controller/eeprom/eeprom.c **** /** @addtogroup EEPROM_Emulation
  46:controller/eeprom/eeprom.c ****   * @{
  47:controller/eeprom/eeprom.c ****   */ 
  48:controller/eeprom/eeprom.c **** 
  49:controller/eeprom/eeprom.c **** /* Includes ------------------------------------------------------------------*/
  50:controller/eeprom/eeprom.c **** #include "eeprom.h"
  51:controller/eeprom/eeprom.c **** 
  52:controller/eeprom/eeprom.c **** /* Private typedef -----------------------------------------------------------*/
  53:controller/eeprom/eeprom.c **** /* Private define ------------------------------------------------------------*/
  54:controller/eeprom/eeprom.c **** /* Private macro -------------------------------------------------------------*/
  55:controller/eeprom/eeprom.c **** /* Private variables ---------------------------------------------------------*/
  56:controller/eeprom/eeprom.c **** 
  57:controller/eeprom/eeprom.c **** /* Global variable used to store variable value in read sequence */
  58:controller/eeprom/eeprom.c **** uint16_t DataVar = 0;
  59:controller/eeprom/eeprom.c **** 
  60:controller/eeprom/eeprom.c **** /* Virtual address defined by the user: 0xFFFF value is prohibited */
  61:controller/eeprom/eeprom.c **** extern uint16_t VirtAddVarTab[NB_OF_VAR];
  62:controller/eeprom/eeprom.c **** 
  63:controller/eeprom/eeprom.c **** /* Private function prototypes -----------------------------------------------*/
  64:controller/eeprom/eeprom.c **** /* Private functions ---------------------------------------------------------*/
  65:controller/eeprom/eeprom.c **** static HAL_StatusTypeDef EE_Format(void);
  66:controller/eeprom/eeprom.c **** static uint16_t EE_FindValidPage(uint8_t Operation);
  67:controller/eeprom/eeprom.c **** static uint16_t EE_VerifyPageFullWriteVariable(uint16_t VirtAddress, uint16_t Data);
  68:controller/eeprom/eeprom.c **** static uint16_t EE_PageTransfer(uint16_t VirtAddress, uint16_t Data);
  69:controller/eeprom/eeprom.c **** static uint16_t EE_VerifyPageFullyErased(uint32_t Address);
  70:controller/eeprom/eeprom.c **** 
  71:controller/eeprom/eeprom.c **** /**
  72:controller/eeprom/eeprom.c ****   * @brief  Restore the pages to a known good state in case of page's status
  73:controller/eeprom/eeprom.c ****   *   corruption after a power loss.
  74:controller/eeprom/eeprom.c ****   * @param  None.
  75:controller/eeprom/eeprom.c ****   * @retval - Flash error code: on write Flash error
  76:controller/eeprom/eeprom.c ****   *         - FLASH_COMPLETE: on success
  77:controller/eeprom/eeprom.c ****   */
  78:controller/eeprom/eeprom.c **** uint16_t EE_Init(void)
  79:controller/eeprom/eeprom.c **** {
  80:controller/eeprom/eeprom.c ****   uint16_t PageStatus0 = 6, PageStatus1 = 6;
  81:controller/eeprom/eeprom.c ****   uint16_t VarIdx = 0;
  82:controller/eeprom/eeprom.c ****   uint16_t EepromStatus = 0, ReadStatus = 0;
  83:controller/eeprom/eeprom.c ****   int16_t x = -1;
  84:controller/eeprom/eeprom.c ****   HAL_StatusTypeDef  FlashStatus;
  85:controller/eeprom/eeprom.c ****   uint32_t SectorError = 0;
  86:controller/eeprom/eeprom.c ****   FLASH_EraseInitTypeDef pEraseInit;
  87:controller/eeprom/eeprom.c **** 
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 3


  88:controller/eeprom/eeprom.c **** 
  89:controller/eeprom/eeprom.c ****   /* Get Page0 status */
  90:controller/eeprom/eeprom.c ****   PageStatus0 = (*(__IO uint16_t*)PAGE0_BASE_ADDRESS);
  91:controller/eeprom/eeprom.c ****   /* Get Page1 status */
  92:controller/eeprom/eeprom.c ****   PageStatus1 = (*(__IO uint16_t*)PAGE1_BASE_ADDRESS);
  93:controller/eeprom/eeprom.c **** 
  94:controller/eeprom/eeprom.c ****   pEraseInit.TypeErase = TYPEERASE_SECTORS;
  95:controller/eeprom/eeprom.c ****   pEraseInit.Sector = PAGE0_ID;
  96:controller/eeprom/eeprom.c ****   pEraseInit.NbSectors = 1;
  97:controller/eeprom/eeprom.c ****   pEraseInit.VoltageRange = VOLTAGE_RANGE;
  98:controller/eeprom/eeprom.c ****   
  99:controller/eeprom/eeprom.c ****   /* Check for invalid header states and repair if necessary */
 100:controller/eeprom/eeprom.c ****   switch (PageStatus0)
 101:controller/eeprom/eeprom.c ****   {
 102:controller/eeprom/eeprom.c ****     case ERASED:
 103:controller/eeprom/eeprom.c ****       if (PageStatus1 == VALID_PAGE) /* Page0 erased, Page1 valid */
 104:controller/eeprom/eeprom.c ****       {
 105:controller/eeprom/eeprom.c ****           /* Erase Page0 */
 106:controller/eeprom/eeprom.c ****         if(!EE_VerifyPageFullyErased(PAGE0_BASE_ADDRESS))
 107:controller/eeprom/eeprom.c ****         {
 108:controller/eeprom/eeprom.c ****           FlashStatus = HAL_FLASHEx_Erase(&pEraseInit, &SectorError);
 109:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 110:controller/eeprom/eeprom.c ****           if (FlashStatus != HAL_OK)
 111:controller/eeprom/eeprom.c ****           {
 112:controller/eeprom/eeprom.c ****             return FlashStatus;
 113:controller/eeprom/eeprom.c ****           }
 114:controller/eeprom/eeprom.c ****         }
 115:controller/eeprom/eeprom.c ****       }
 116:controller/eeprom/eeprom.c ****       else if (PageStatus1 == RECEIVE_DATA) /* Page0 erased, Page1 receive */
 117:controller/eeprom/eeprom.c ****       {
 118:controller/eeprom/eeprom.c ****         /* Erase Page0 */
 119:controller/eeprom/eeprom.c ****         if(!EE_VerifyPageFullyErased(PAGE0_BASE_ADDRESS))
 120:controller/eeprom/eeprom.c ****         { 
 121:controller/eeprom/eeprom.c ****           FlashStatus = HAL_FLASHEx_Erase(&pEraseInit, &SectorError);
 122:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 123:controller/eeprom/eeprom.c ****           if (FlashStatus != HAL_OK)
 124:controller/eeprom/eeprom.c ****           {
 125:controller/eeprom/eeprom.c ****             return FlashStatus;
 126:controller/eeprom/eeprom.c ****           }
 127:controller/eeprom/eeprom.c ****         }
 128:controller/eeprom/eeprom.c ****         /* Mark Page1 as valid */
 129:controller/eeprom/eeprom.c ****         FlashStatus = HAL_FLASH_Program(TYPEPROGRAM_HALFWORD, PAGE1_BASE_ADDRESS, VALID_PAGE);
 130:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 131:controller/eeprom/eeprom.c ****         if (FlashStatus != HAL_OK)
 132:controller/eeprom/eeprom.c ****         {
 133:controller/eeprom/eeprom.c ****           return FlashStatus;
 134:controller/eeprom/eeprom.c ****         }
 135:controller/eeprom/eeprom.c ****       }
 136:controller/eeprom/eeprom.c ****       else /* First EEPROM access (Page0&1 are erased) or invalid state -> format EEPROM */
 137:controller/eeprom/eeprom.c ****       {
 138:controller/eeprom/eeprom.c ****         /* Erase both Page0 and Page1 and set Page0 as valid page */
 139:controller/eeprom/eeprom.c ****         FlashStatus = EE_Format();
 140:controller/eeprom/eeprom.c ****         /* If erase/program operation was failed, a Flash error code is returned */
 141:controller/eeprom/eeprom.c ****         if (FlashStatus != HAL_OK)
 142:controller/eeprom/eeprom.c ****         {
 143:controller/eeprom/eeprom.c ****           return FlashStatus;
 144:controller/eeprom/eeprom.c ****         }
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 4


 145:controller/eeprom/eeprom.c ****       }
 146:controller/eeprom/eeprom.c ****       break;
 147:controller/eeprom/eeprom.c **** 
 148:controller/eeprom/eeprom.c ****     case RECEIVE_DATA:
 149:controller/eeprom/eeprom.c ****       if (PageStatus1 == VALID_PAGE) /* Page0 receive, Page1 valid */
 150:controller/eeprom/eeprom.c ****       {
 151:controller/eeprom/eeprom.c ****         /* Transfer data from Page1 to Page0 */
 152:controller/eeprom/eeprom.c ****         for (VarIdx = 0; VarIdx < NB_OF_VAR; VarIdx++)
 153:controller/eeprom/eeprom.c ****         {
 154:controller/eeprom/eeprom.c ****           if (( *(__IO uint16_t*)(PAGE0_BASE_ADDRESS + 6)) == VirtAddVarTab[VarIdx])
 155:controller/eeprom/eeprom.c ****           {
 156:controller/eeprom/eeprom.c ****             x = VarIdx;
 157:controller/eeprom/eeprom.c ****           }
 158:controller/eeprom/eeprom.c ****           if (VarIdx != x)
 159:controller/eeprom/eeprom.c ****           {
 160:controller/eeprom/eeprom.c ****             /* Read the last variables' updates */
 161:controller/eeprom/eeprom.c ****             ReadStatus = EE_ReadVariable(VirtAddVarTab[VarIdx], &DataVar);
 162:controller/eeprom/eeprom.c ****             /* In case variable corresponding to the virtual address was found */
 163:controller/eeprom/eeprom.c ****             if (ReadStatus != 0x1)
 164:controller/eeprom/eeprom.c ****             {
 165:controller/eeprom/eeprom.c ****               /* Transfer the variable to the Page0 */
 166:controller/eeprom/eeprom.c ****               EepromStatus = EE_VerifyPageFullWriteVariable(VirtAddVarTab[VarIdx], DataVar);
 167:controller/eeprom/eeprom.c ****               /* If program operation was failed, a Flash error code is returned */
 168:controller/eeprom/eeprom.c ****               if (EepromStatus != HAL_OK)
 169:controller/eeprom/eeprom.c ****               {
 170:controller/eeprom/eeprom.c ****                 return EepromStatus;
 171:controller/eeprom/eeprom.c ****               }
 172:controller/eeprom/eeprom.c ****             }
 173:controller/eeprom/eeprom.c ****           }
 174:controller/eeprom/eeprom.c ****         }
 175:controller/eeprom/eeprom.c ****         /* Mark Page0 as valid */
 176:controller/eeprom/eeprom.c ****         FlashStatus = HAL_FLASH_Program(TYPEPROGRAM_HALFWORD, PAGE0_BASE_ADDRESS, VALID_PAGE);
 177:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 178:controller/eeprom/eeprom.c ****         if (FlashStatus != HAL_OK)
 179:controller/eeprom/eeprom.c ****         {
 180:controller/eeprom/eeprom.c ****           return FlashStatus;
 181:controller/eeprom/eeprom.c ****         }
 182:controller/eeprom/eeprom.c ****         pEraseInit.Sector = PAGE1_ID;
 183:controller/eeprom/eeprom.c ****         pEraseInit.NbSectors = 1;
 184:controller/eeprom/eeprom.c ****         pEraseInit.VoltageRange = VOLTAGE_RANGE;
 185:controller/eeprom/eeprom.c ****         /* Erase Page1 */
 186:controller/eeprom/eeprom.c ****         if(!EE_VerifyPageFullyErased(PAGE1_BASE_ADDRESS))
 187:controller/eeprom/eeprom.c ****         { 
 188:controller/eeprom/eeprom.c ****           FlashStatus = HAL_FLASHEx_Erase(&pEraseInit, &SectorError);
 189:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 190:controller/eeprom/eeprom.c ****           if (FlashStatus != HAL_OK)
 191:controller/eeprom/eeprom.c ****           {
 192:controller/eeprom/eeprom.c ****             return FlashStatus;
 193:controller/eeprom/eeprom.c ****           }
 194:controller/eeprom/eeprom.c ****         }
 195:controller/eeprom/eeprom.c ****       }
 196:controller/eeprom/eeprom.c ****       else if (PageStatus1 == ERASED) /* Page0 receive, Page1 erased */
 197:controller/eeprom/eeprom.c ****       {
 198:controller/eeprom/eeprom.c ****         pEraseInit.Sector = PAGE1_ID;
 199:controller/eeprom/eeprom.c ****         pEraseInit.NbSectors = 1;
 200:controller/eeprom/eeprom.c ****         pEraseInit.VoltageRange = VOLTAGE_RANGE;
 201:controller/eeprom/eeprom.c ****         /* Erase Page1 */
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 5


 202:controller/eeprom/eeprom.c ****         if(!EE_VerifyPageFullyErased(PAGE1_BASE_ADDRESS))
 203:controller/eeprom/eeprom.c ****         { 
 204:controller/eeprom/eeprom.c ****           FlashStatus = HAL_FLASHEx_Erase(&pEraseInit, &SectorError);
 205:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 206:controller/eeprom/eeprom.c ****           if (FlashStatus != HAL_OK)
 207:controller/eeprom/eeprom.c ****           {
 208:controller/eeprom/eeprom.c ****             return FlashStatus;
 209:controller/eeprom/eeprom.c ****           }
 210:controller/eeprom/eeprom.c ****         }
 211:controller/eeprom/eeprom.c ****         /* Mark Page0 as valid */
 212:controller/eeprom/eeprom.c ****         FlashStatus = HAL_FLASH_Program(TYPEPROGRAM_HALFWORD, PAGE0_BASE_ADDRESS, VALID_PAGE);
 213:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 214:controller/eeprom/eeprom.c ****         if (FlashStatus != HAL_OK)
 215:controller/eeprom/eeprom.c ****         {
 216:controller/eeprom/eeprom.c ****           return FlashStatus;
 217:controller/eeprom/eeprom.c ****         }
 218:controller/eeprom/eeprom.c ****       }
 219:controller/eeprom/eeprom.c ****       else /* Invalid state -> format eeprom */
 220:controller/eeprom/eeprom.c ****       {
 221:controller/eeprom/eeprom.c ****         /* Erase both Page0 and Page1 and set Page0 as valid page */
 222:controller/eeprom/eeprom.c ****         FlashStatus = EE_Format();
 223:controller/eeprom/eeprom.c ****         /* If erase/program operation was failed, a Flash error code is returned */
 224:controller/eeprom/eeprom.c ****         if (FlashStatus != HAL_OK)
 225:controller/eeprom/eeprom.c ****         {
 226:controller/eeprom/eeprom.c ****           return FlashStatus;
 227:controller/eeprom/eeprom.c ****         }
 228:controller/eeprom/eeprom.c ****       }
 229:controller/eeprom/eeprom.c ****       break;
 230:controller/eeprom/eeprom.c **** 
 231:controller/eeprom/eeprom.c ****     case VALID_PAGE:
 232:controller/eeprom/eeprom.c ****       if (PageStatus1 == VALID_PAGE) /* Invalid state -> format eeprom */
 233:controller/eeprom/eeprom.c ****       {
 234:controller/eeprom/eeprom.c ****         /* Erase both Page0 and Page1 and set Page0 as valid page */
 235:controller/eeprom/eeprom.c ****         FlashStatus = EE_Format();
 236:controller/eeprom/eeprom.c ****         /* If erase/program operation was failed, a Flash error code is returned */
 237:controller/eeprom/eeprom.c ****         if (FlashStatus != HAL_OK)
 238:controller/eeprom/eeprom.c ****         {
 239:controller/eeprom/eeprom.c ****           return FlashStatus;
 240:controller/eeprom/eeprom.c ****         }
 241:controller/eeprom/eeprom.c ****       }
 242:controller/eeprom/eeprom.c ****       else if (PageStatus1 == ERASED) /* Page0 valid, Page1 erased */
 243:controller/eeprom/eeprom.c ****       {
 244:controller/eeprom/eeprom.c ****         pEraseInit.Sector = PAGE1_ID;
 245:controller/eeprom/eeprom.c ****         pEraseInit.NbSectors = 1;
 246:controller/eeprom/eeprom.c ****         pEraseInit.VoltageRange = VOLTAGE_RANGE;
 247:controller/eeprom/eeprom.c ****         /* Erase Page1 */
 248:controller/eeprom/eeprom.c ****         if(!EE_VerifyPageFullyErased(PAGE1_BASE_ADDRESS))
 249:controller/eeprom/eeprom.c ****         { 
 250:controller/eeprom/eeprom.c ****           FlashStatus = HAL_FLASHEx_Erase(&pEraseInit, &SectorError);
 251:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 252:controller/eeprom/eeprom.c ****           if (FlashStatus != HAL_OK)
 253:controller/eeprom/eeprom.c ****           {
 254:controller/eeprom/eeprom.c ****             return FlashStatus;
 255:controller/eeprom/eeprom.c ****           }
 256:controller/eeprom/eeprom.c ****         }
 257:controller/eeprom/eeprom.c ****       }
 258:controller/eeprom/eeprom.c ****       else /* Page0 valid, Page1 receive */
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 6


 259:controller/eeprom/eeprom.c ****       {
 260:controller/eeprom/eeprom.c ****         /* Transfer data from Page0 to Page1 */
 261:controller/eeprom/eeprom.c ****         for (VarIdx = 0; VarIdx < NB_OF_VAR; VarIdx++)
 262:controller/eeprom/eeprom.c ****         {
 263:controller/eeprom/eeprom.c ****           if ((*(__IO uint16_t*)(PAGE1_BASE_ADDRESS + 6)) == VirtAddVarTab[VarIdx])
 264:controller/eeprom/eeprom.c ****           {
 265:controller/eeprom/eeprom.c ****             x = VarIdx;
 266:controller/eeprom/eeprom.c ****           }
 267:controller/eeprom/eeprom.c ****           if (VarIdx != x)
 268:controller/eeprom/eeprom.c ****           {
 269:controller/eeprom/eeprom.c ****             /* Read the last variables' updates */
 270:controller/eeprom/eeprom.c ****             ReadStatus = EE_ReadVariable(VirtAddVarTab[VarIdx], &DataVar);
 271:controller/eeprom/eeprom.c ****             /* In case variable corresponding to the virtual address was found */
 272:controller/eeprom/eeprom.c ****             if (ReadStatus != 0x1)
 273:controller/eeprom/eeprom.c ****             {
 274:controller/eeprom/eeprom.c ****               /* Transfer the variable to the Page1 */
 275:controller/eeprom/eeprom.c ****               EepromStatus = EE_VerifyPageFullWriteVariable(VirtAddVarTab[VarIdx], DataVar);
 276:controller/eeprom/eeprom.c ****               /* If program operation was failed, a Flash error code is returned */
 277:controller/eeprom/eeprom.c ****               if (EepromStatus != HAL_OK)
 278:controller/eeprom/eeprom.c ****               {
 279:controller/eeprom/eeprom.c ****                 return EepromStatus;
 280:controller/eeprom/eeprom.c ****               }
 281:controller/eeprom/eeprom.c ****             }
 282:controller/eeprom/eeprom.c ****           }
 283:controller/eeprom/eeprom.c ****         }
 284:controller/eeprom/eeprom.c ****         /* Mark Page1 as valid */
 285:controller/eeprom/eeprom.c ****         FlashStatus = HAL_FLASH_Program(TYPEPROGRAM_HALFWORD, PAGE1_BASE_ADDRESS, VALID_PAGE);     
 286:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 287:controller/eeprom/eeprom.c ****         if (FlashStatus != HAL_OK)
 288:controller/eeprom/eeprom.c ****         {
 289:controller/eeprom/eeprom.c ****           return FlashStatus;
 290:controller/eeprom/eeprom.c ****         }
 291:controller/eeprom/eeprom.c ****         pEraseInit.Sector = PAGE0_ID;
 292:controller/eeprom/eeprom.c ****         pEraseInit.NbSectors = 1;
 293:controller/eeprom/eeprom.c ****         pEraseInit.VoltageRange = VOLTAGE_RANGE;
 294:controller/eeprom/eeprom.c ****         /* Erase Page0 */
 295:controller/eeprom/eeprom.c ****         if(!EE_VerifyPageFullyErased(PAGE0_BASE_ADDRESS))
 296:controller/eeprom/eeprom.c ****         { 
 297:controller/eeprom/eeprom.c ****           FlashStatus = HAL_FLASHEx_Erase(&pEraseInit, &SectorError);
 298:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 299:controller/eeprom/eeprom.c ****           if (FlashStatus != HAL_OK)
 300:controller/eeprom/eeprom.c ****           {
 301:controller/eeprom/eeprom.c ****             return FlashStatus;
 302:controller/eeprom/eeprom.c ****           }
 303:controller/eeprom/eeprom.c ****         }
 304:controller/eeprom/eeprom.c ****       }
 305:controller/eeprom/eeprom.c ****       break;
 306:controller/eeprom/eeprom.c **** 
 307:controller/eeprom/eeprom.c ****     default:  /* Any other state -> format eeprom */
 308:controller/eeprom/eeprom.c ****       /* Erase both Page0 and Page1 and set Page0 as valid page */
 309:controller/eeprom/eeprom.c ****       FlashStatus = EE_Format();
 310:controller/eeprom/eeprom.c ****       /* If erase/program operation was failed, a Flash error code is returned */
 311:controller/eeprom/eeprom.c ****       if (FlashStatus != HAL_OK)
 312:controller/eeprom/eeprom.c ****       {
 313:controller/eeprom/eeprom.c ****         return FlashStatus;
 314:controller/eeprom/eeprom.c ****       }
 315:controller/eeprom/eeprom.c ****       break;
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 7


 316:controller/eeprom/eeprom.c ****   }
 317:controller/eeprom/eeprom.c **** 
 318:controller/eeprom/eeprom.c ****   return HAL_OK;
 319:controller/eeprom/eeprom.c **** }
 320:controller/eeprom/eeprom.c **** 
 321:controller/eeprom/eeprom.c **** /**
 322:controller/eeprom/eeprom.c ****   * @brief  Verify if specified page is fully erased.
 323:controller/eeprom/eeprom.c ****   * @param  Address: page address
 324:controller/eeprom/eeprom.c ****   *   This parameter can be one of the following values:
 325:controller/eeprom/eeprom.c ****   *     @arg PAGE0_BASE_ADDRESS: Page0 base address
 326:controller/eeprom/eeprom.c ****   *     @arg PAGE1_BASE_ADDRESS: Page1 base address
 327:controller/eeprom/eeprom.c ****   * @retval page fully erased status:
 328:controller/eeprom/eeprom.c ****   *           - 0: if Page not erased
 329:controller/eeprom/eeprom.c ****   *           - 1: if Page erased
 330:controller/eeprom/eeprom.c ****   */
 331:controller/eeprom/eeprom.c **** uint16_t EE_VerifyPageFullyErased(uint32_t Address)
 332:controller/eeprom/eeprom.c **** {
  29              		.loc 1 332 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
 333:controller/eeprom/eeprom.c ****   uint32_t ReadStatus = 1;
  34              		.loc 1 333 3 view .LVU1
 334:controller/eeprom/eeprom.c ****   uint32_t BeginAddress = Address;
  35              		.loc 1 334 3 view .LVU2
 335:controller/eeprom/eeprom.c ****   uint16_t AddressValue = 0x5555;
  36              		.loc 1 335 3 view .LVU3
 336:controller/eeprom/eeprom.c ****     
 337:controller/eeprom/eeprom.c ****   /* Check each active page address starting from end */
 338:controller/eeprom/eeprom.c ****   while (Address <= (BeginAddress + PAGE_SIZE - 1))
  37              		.loc 1 338 3 view .LVU4
  38              		.loc 1 338 9 is_stmt 0 view .LVU5
  39 0000 0246     		mov	r2, r0
  40 0002 00E0     		b	.L2
  41              	.LVL1:
  42              	.L7:
 339:controller/eeprom/eeprom.c ****   {
 340:controller/eeprom/eeprom.c ****     /* Get the current location content to be compared with virtual address */
 341:controller/eeprom/eeprom.c ****     AddressValue = (*(__IO uint16_t*)Address);
 342:controller/eeprom/eeprom.c **** 
 343:controller/eeprom/eeprom.c ****     /* Compare the read address with the virtual address */
 344:controller/eeprom/eeprom.c ****     if (AddressValue != ERASED)
 345:controller/eeprom/eeprom.c ****     {
 346:controller/eeprom/eeprom.c ****       
 347:controller/eeprom/eeprom.c ****       /* In case variable value is read, reset ReadStatus flag */
 348:controller/eeprom/eeprom.c ****       ReadStatus = 0;
 349:controller/eeprom/eeprom.c **** 
 350:controller/eeprom/eeprom.c ****       break;
 351:controller/eeprom/eeprom.c ****     }
 352:controller/eeprom/eeprom.c ****     /* Next address location */
 353:controller/eeprom/eeprom.c ****     Address = Address + 4;
  43              		.loc 1 353 5 is_stmt 1 view .LVU6
  44              		.loc 1 353 13 is_stmt 0 view .LVU7
  45 0004 0432     		adds	r2, r2, #4
  46              	.LVL2:
  47              	.L2:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 8


 338:controller/eeprom/eeprom.c ****   {
  48              		.loc 1 338 18 is_stmt 1 view .LVU8
 338:controller/eeprom/eeprom.c ****   {
  49              		.loc 1 338 47 is_stmt 0 view .LVU9
  50 0006 00F57F53 		add	r3, r0, #16320
  51 000a 3F33     		adds	r3, r3, #63
 338:controller/eeprom/eeprom.c ****   {
  52              		.loc 1 338 18 view .LVU10
  53 000c 9342     		cmp	r3, r2
  54 000e 07D3     		bcc	.L6
 341:controller/eeprom/eeprom.c **** 
  55              		.loc 1 341 5 is_stmt 1 view .LVU11
 341:controller/eeprom/eeprom.c **** 
  56              		.loc 1 341 18 is_stmt 0 view .LVU12
  57 0010 1388     		ldrh	r3, [r2]
  58 0012 9BB2     		uxth	r3, r3
  59              	.LVL3:
 344:controller/eeprom/eeprom.c ****     {
  60              		.loc 1 344 5 is_stmt 1 view .LVU13
 344:controller/eeprom/eeprom.c ****     {
  61              		.loc 1 344 8 is_stmt 0 view .LVU14
  62 0014 4FF6FF71 		movw	r1, #65535
  63 0018 8B42     		cmp	r3, r1
  64 001a F3D0     		beq	.L7
 348:controller/eeprom/eeprom.c **** 
  65              		.loc 1 348 18 view .LVU15
  66 001c 0020     		movs	r0, #0
  67              	.LVL4:
 354:controller/eeprom/eeprom.c ****   }
 355:controller/eeprom/eeprom.c ****   
 356:controller/eeprom/eeprom.c ****   /* Return ReadStatus value: (0: Page not erased, 1: Sector erased) */
 357:controller/eeprom/eeprom.c ****   return ReadStatus;
  68              		.loc 1 357 3 is_stmt 1 view .LVU16
 358:controller/eeprom/eeprom.c **** }
  69              		.loc 1 358 1 is_stmt 0 view .LVU17
  70 001e 7047     		bx	lr
  71              	.LVL5:
  72              	.L6:
 333:controller/eeprom/eeprom.c ****   uint32_t BeginAddress = Address;
  73              		.loc 1 333 12 view .LVU18
  74 0020 0120     		movs	r0, #1
  75              	.LVL6:
 333:controller/eeprom/eeprom.c ****   uint32_t BeginAddress = Address;
  76              		.loc 1 333 12 view .LVU19
  77 0022 7047     		bx	lr
  78              		.cfi_endproc
  79              	.LFE221:
  81              		.section	.text.EE_FindValidPage,"ax",%progbits
  82              		.align	1
  83              		.syntax unified
  84              		.thumb
  85              		.thumb_func
  87              	EE_FindValidPage:
  88              	.LVL7:
  89              	.LFB225:
 359:controller/eeprom/eeprom.c **** 
 360:controller/eeprom/eeprom.c **** /**
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 9


 361:controller/eeprom/eeprom.c ****   * @brief  Returns the last stored variable data, if found, which correspond to
 362:controller/eeprom/eeprom.c ****   *   the passed virtual address
 363:controller/eeprom/eeprom.c ****   * @param  VirtAddress: Variable virtual address
 364:controller/eeprom/eeprom.c ****   * @param  Data: Global variable contains the read variable value
 365:controller/eeprom/eeprom.c ****   * @retval Success or error status:
 366:controller/eeprom/eeprom.c ****   *           - 0: if variable was found
 367:controller/eeprom/eeprom.c ****   *           - 1: if the variable was not found
 368:controller/eeprom/eeprom.c ****   *           - NO_VALID_PAGE: if no valid page was found.
 369:controller/eeprom/eeprom.c ****   */
 370:controller/eeprom/eeprom.c **** uint16_t EE_ReadVariable(uint16_t VirtAddress, uint16_t* Data)
 371:controller/eeprom/eeprom.c **** {
 372:controller/eeprom/eeprom.c ****   uint16_t ValidPage = PAGE0;
 373:controller/eeprom/eeprom.c ****   uint16_t AddressValue = 0x5555, ReadStatus = 1;
 374:controller/eeprom/eeprom.c ****   uint32_t Address = EEPROM_START_ADDRESS, PageStartAddress = EEPROM_START_ADDRESS;
 375:controller/eeprom/eeprom.c **** 
 376:controller/eeprom/eeprom.c ****   /* Get active Page for read operation */
 377:controller/eeprom/eeprom.c ****   ValidPage = EE_FindValidPage(READ_FROM_VALID_PAGE);
 378:controller/eeprom/eeprom.c **** 
 379:controller/eeprom/eeprom.c ****   /* Check if there is no valid page */
 380:controller/eeprom/eeprom.c ****   if (ValidPage == NO_VALID_PAGE)
 381:controller/eeprom/eeprom.c ****   {
 382:controller/eeprom/eeprom.c ****     return  NO_VALID_PAGE;
 383:controller/eeprom/eeprom.c ****   }
 384:controller/eeprom/eeprom.c **** 
 385:controller/eeprom/eeprom.c ****   /* Get the valid Page start Address */
 386:controller/eeprom/eeprom.c ****   PageStartAddress = (uint32_t)(EEPROM_START_ADDRESS + (uint32_t)(ValidPage * PAGE_SIZE));
 387:controller/eeprom/eeprom.c **** 
 388:controller/eeprom/eeprom.c ****   /* Get the valid Page end Address */
 389:controller/eeprom/eeprom.c ****   Address = (uint32_t)((EEPROM_START_ADDRESS - 2) + (uint32_t)((1 + ValidPage) * PAGE_SIZE));
 390:controller/eeprom/eeprom.c **** 
 391:controller/eeprom/eeprom.c ****   /* Check each active page address starting from end */
 392:controller/eeprom/eeprom.c ****   while (Address > (PageStartAddress + 2))
 393:controller/eeprom/eeprom.c ****   {
 394:controller/eeprom/eeprom.c ****     /* Get the current location content to be compared with virtual address */
 395:controller/eeprom/eeprom.c ****     AddressValue = (*(__IO uint16_t*)Address);
 396:controller/eeprom/eeprom.c **** 
 397:controller/eeprom/eeprom.c ****     /* Compare the read address with the virtual address */
 398:controller/eeprom/eeprom.c ****     if (AddressValue == VirtAddress)
 399:controller/eeprom/eeprom.c ****     {
 400:controller/eeprom/eeprom.c ****       /* Get content of Address-2 which is variable value */
 401:controller/eeprom/eeprom.c ****       *Data = (*(__IO uint16_t*)(Address - 2));
 402:controller/eeprom/eeprom.c **** 
 403:controller/eeprom/eeprom.c ****       /* In case variable value is read, reset ReadStatus flag */
 404:controller/eeprom/eeprom.c ****       ReadStatus = 0;
 405:controller/eeprom/eeprom.c **** 
 406:controller/eeprom/eeprom.c ****       break;
 407:controller/eeprom/eeprom.c ****     }
 408:controller/eeprom/eeprom.c ****     else
 409:controller/eeprom/eeprom.c ****     {
 410:controller/eeprom/eeprom.c ****       /* Next address location */
 411:controller/eeprom/eeprom.c ****       Address = Address - 4;
 412:controller/eeprom/eeprom.c ****     }
 413:controller/eeprom/eeprom.c ****   }
 414:controller/eeprom/eeprom.c **** 
 415:controller/eeprom/eeprom.c ****   /* Return ReadStatus value: (0: variable exist, 1: variable doesn't exist) */
 416:controller/eeprom/eeprom.c ****   return ReadStatus;
 417:controller/eeprom/eeprom.c **** }
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 10


 418:controller/eeprom/eeprom.c **** 
 419:controller/eeprom/eeprom.c **** /**
 420:controller/eeprom/eeprom.c ****   * @brief  Writes/upadtes variable data in EEPROM.
 421:controller/eeprom/eeprom.c ****   * @param  VirtAddress: Variable virtual address
 422:controller/eeprom/eeprom.c ****   * @param  Data: 16 bit data to be written
 423:controller/eeprom/eeprom.c ****   * @retval Success or error status:
 424:controller/eeprom/eeprom.c ****   *           - FLASH_COMPLETE: on success
 425:controller/eeprom/eeprom.c ****   *           - PAGE_FULL: if valid page is full
 426:controller/eeprom/eeprom.c ****   *           - NO_VALID_PAGE: if no valid page was found
 427:controller/eeprom/eeprom.c ****   *           - Flash error code: on write Flash error
 428:controller/eeprom/eeprom.c ****   */
 429:controller/eeprom/eeprom.c **** uint16_t EE_WriteVariable(uint16_t VirtAddress, uint16_t Data)
 430:controller/eeprom/eeprom.c **** {
 431:controller/eeprom/eeprom.c ****   uint16_t Status = 0;
 432:controller/eeprom/eeprom.c **** 
 433:controller/eeprom/eeprom.c ****   /* Write the variable virtual address and value in the EEPROM */
 434:controller/eeprom/eeprom.c ****   Status = EE_VerifyPageFullWriteVariable(VirtAddress, Data);
 435:controller/eeprom/eeprom.c **** 
 436:controller/eeprom/eeprom.c ****   /* In case the EEPROM active page is full */
 437:controller/eeprom/eeprom.c ****   if (Status == PAGE_FULL)
 438:controller/eeprom/eeprom.c ****   {
 439:controller/eeprom/eeprom.c ****     /* Perform Page transfer */
 440:controller/eeprom/eeprom.c ****     Status = EE_PageTransfer(VirtAddress, Data);
 441:controller/eeprom/eeprom.c ****   }
 442:controller/eeprom/eeprom.c **** 
 443:controller/eeprom/eeprom.c ****   /* Return last operation status */
 444:controller/eeprom/eeprom.c ****   return Status;
 445:controller/eeprom/eeprom.c **** }
 446:controller/eeprom/eeprom.c **** 
 447:controller/eeprom/eeprom.c **** /**
 448:controller/eeprom/eeprom.c ****   * @brief  Erases PAGE and PAGE1 and writes VALID_PAGE header to PAGE
 449:controller/eeprom/eeprom.c ****   * @param  None
 450:controller/eeprom/eeprom.c ****   * @retval Status of the last operation (Flash write or erase) done during
 451:controller/eeprom/eeprom.c ****   *         EEPROM formating
 452:controller/eeprom/eeprom.c ****   */
 453:controller/eeprom/eeprom.c **** static HAL_StatusTypeDef EE_Format(void)
 454:controller/eeprom/eeprom.c **** {
 455:controller/eeprom/eeprom.c ****   HAL_StatusTypeDef FlashStatus = HAL_OK;
 456:controller/eeprom/eeprom.c ****   uint32_t SectorError = 0;
 457:controller/eeprom/eeprom.c ****   FLASH_EraseInitTypeDef pEraseInit;
 458:controller/eeprom/eeprom.c **** 
 459:controller/eeprom/eeprom.c ****   pEraseInit.TypeErase = FLASH_TYPEERASE_SECTORS;  
 460:controller/eeprom/eeprom.c ****   pEraseInit.Sector = PAGE0_ID;
 461:controller/eeprom/eeprom.c ****   pEraseInit.NbSectors = 1;
 462:controller/eeprom/eeprom.c ****   pEraseInit.VoltageRange = VOLTAGE_RANGE;
 463:controller/eeprom/eeprom.c ****   /* Erase Page0 */
 464:controller/eeprom/eeprom.c ****   if(!EE_VerifyPageFullyErased(PAGE0_BASE_ADDRESS))
 465:controller/eeprom/eeprom.c ****   {
 466:controller/eeprom/eeprom.c ****     FlashStatus = HAL_FLASHEx_Erase(&pEraseInit, &SectorError); 
 467:controller/eeprom/eeprom.c ****     /* If erase operation was failed, a Flash error code is returned */
 468:controller/eeprom/eeprom.c ****     if (FlashStatus != HAL_OK)
 469:controller/eeprom/eeprom.c ****     {
 470:controller/eeprom/eeprom.c ****       return FlashStatus;
 471:controller/eeprom/eeprom.c ****     }
 472:controller/eeprom/eeprom.c ****   }
 473:controller/eeprom/eeprom.c ****   /* Set Page0 as valid page: Write VALID_PAGE at Page0 base address */
 474:controller/eeprom/eeprom.c ****   FlashStatus = HAL_FLASH_Program(TYPEPROGRAM_HALFWORD, PAGE0_BASE_ADDRESS, VALID_PAGE); 
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 11


 475:controller/eeprom/eeprom.c ****   /* If program operation was failed, a Flash error code is returned */
 476:controller/eeprom/eeprom.c ****   if (FlashStatus != HAL_OK)
 477:controller/eeprom/eeprom.c ****   {
 478:controller/eeprom/eeprom.c ****     return FlashStatus;
 479:controller/eeprom/eeprom.c ****   }
 480:controller/eeprom/eeprom.c **** 
 481:controller/eeprom/eeprom.c ****   pEraseInit.Sector = PAGE1_ID;
 482:controller/eeprom/eeprom.c ****   /* Erase Page1 */
 483:controller/eeprom/eeprom.c ****   if(!EE_VerifyPageFullyErased(PAGE1_BASE_ADDRESS))
 484:controller/eeprom/eeprom.c ****   {  
 485:controller/eeprom/eeprom.c ****     FlashStatus = HAL_FLASHEx_Erase(&pEraseInit, &SectorError); 
 486:controller/eeprom/eeprom.c ****     /* If erase operation was failed, a Flash error code is returned */
 487:controller/eeprom/eeprom.c ****     if (FlashStatus != HAL_OK)
 488:controller/eeprom/eeprom.c ****     {
 489:controller/eeprom/eeprom.c ****       return FlashStatus;
 490:controller/eeprom/eeprom.c ****     }
 491:controller/eeprom/eeprom.c ****   }
 492:controller/eeprom/eeprom.c ****   
 493:controller/eeprom/eeprom.c ****   return HAL_OK;
 494:controller/eeprom/eeprom.c **** }
 495:controller/eeprom/eeprom.c **** 
 496:controller/eeprom/eeprom.c **** /**
 497:controller/eeprom/eeprom.c ****   * @brief  Find valid Page for write or read operation
 498:controller/eeprom/eeprom.c ****   * @param  Operation: operation to achieve on the valid page.
 499:controller/eeprom/eeprom.c ****   *   This parameter can be one of the following values:
 500:controller/eeprom/eeprom.c ****   *     @arg READ_FROM_VALID_PAGE: read operation from valid page
 501:controller/eeprom/eeprom.c ****   *     @arg WRITE_IN_VALID_PAGE: write operation from valid page
 502:controller/eeprom/eeprom.c ****   * @retval Valid page number (PAGE or PAGE1) or NO_VALID_PAGE in case
 503:controller/eeprom/eeprom.c ****   *   of no valid page was found
 504:controller/eeprom/eeprom.c ****   */
 505:controller/eeprom/eeprom.c **** static uint16_t EE_FindValidPage(uint8_t Operation)
 506:controller/eeprom/eeprom.c **** {
  90              		.loc 1 506 1 is_stmt 1 view -0
  91              		.cfi_startproc
  92              		@ args = 0, pretend = 0, frame = 0
  93              		@ frame_needed = 0, uses_anonymous_args = 0
  94              		@ link register save eliminated.
 507:controller/eeprom/eeprom.c ****   uint16_t PageStatus0 = 6, PageStatus1 = 6;
  95              		.loc 1 507 3 view .LVU21
 508:controller/eeprom/eeprom.c **** 
 509:controller/eeprom/eeprom.c ****   /* Get Page0 actual status */
 510:controller/eeprom/eeprom.c ****   PageStatus0 = (*(__IO uint16_t*)PAGE0_BASE_ADDRESS);
  96              		.loc 1 510 3 view .LVU22
  97              		.loc 1 510 15 is_stmt 0 view .LVU23
  98 0000 114B     		ldr	r3, .L17
  99 0002 1B88     		ldrh	r3, [r3]
 100 0004 9BB2     		uxth	r3, r3
 101              	.LVL8:
 511:controller/eeprom/eeprom.c **** 
 512:controller/eeprom/eeprom.c ****   /* Get Page1 actual status */
 513:controller/eeprom/eeprom.c ****   PageStatus1 = (*(__IO uint16_t*)PAGE1_BASE_ADDRESS);
 102              		.loc 1 513 3 is_stmt 1 view .LVU24
 103              		.loc 1 513 15 is_stmt 0 view .LVU25
 104 0006 114A     		ldr	r2, .L17+4
 105 0008 1288     		ldrh	r2, [r2]
 106 000a 92B2     		uxth	r2, r2
 107              	.LVL9:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 12


 514:controller/eeprom/eeprom.c **** 
 515:controller/eeprom/eeprom.c ****   /* Write or read operation */
 516:controller/eeprom/eeprom.c ****   switch (Operation)
 108              		.loc 1 516 3 is_stmt 1 view .LVU26
 109 000c 88B1     		cbz	r0, .L9
 110 000e 0128     		cmp	r0, #1
 111 0010 13D1     		bne	.L12
 517:controller/eeprom/eeprom.c ****   {
 518:controller/eeprom/eeprom.c ****     case WRITE_IN_VALID_PAGE:   /* ---- Write operation ---- */
 519:controller/eeprom/eeprom.c ****       if (PageStatus1 == VALID_PAGE)
 112              		.loc 1 519 7 view .LVU27
 113              		.loc 1 519 10 is_stmt 0 view .LVU28
 114 0012 3AB9     		cbnz	r2, .L11
 520:controller/eeprom/eeprom.c ****       {
 521:controller/eeprom/eeprom.c ****         /* Page0 receiving data */
 522:controller/eeprom/eeprom.c ****         if (PageStatus0 == RECEIVE_DATA)
 115              		.loc 1 522 9 is_stmt 1 view .LVU29
 116              		.loc 1 522 12 is_stmt 0 view .LVU30
 117 0014 4EF6EE61 		movw	r1, #61166
 118 0018 8B42     		cmp	r3, r1
 119 001a 01D0     		beq	.L16
 523:controller/eeprom/eeprom.c ****         {
 524:controller/eeprom/eeprom.c ****           return PAGE0;         /* Page0 valid */
 525:controller/eeprom/eeprom.c ****         }
 526:controller/eeprom/eeprom.c ****         else
 527:controller/eeprom/eeprom.c ****         {
 528:controller/eeprom/eeprom.c ****           return PAGE1;         /* Page1 valid */
 120              		.loc 1 528 18 view .LVU31
 121 001c 0123     		movs	r3, #1
 122              	.LVL10:
 123              		.loc 1 528 18 view .LVU32
 124 001e 0DE0     		b	.L10
 125              	.LVL11:
 126              	.L16:
 524:controller/eeprom/eeprom.c ****         }
 127              		.loc 1 524 18 view .LVU33
 128 0020 1346     		mov	r3, r2
 129              	.LVL12:
 524:controller/eeprom/eeprom.c ****         }
 130              		.loc 1 524 18 view .LVU34
 131 0022 0BE0     		b	.L10
 132              	.LVL13:
 133              	.L11:
 529:controller/eeprom/eeprom.c ****         }
 530:controller/eeprom/eeprom.c ****       }
 531:controller/eeprom/eeprom.c ****       else if (PageStatus0 == VALID_PAGE)
 134              		.loc 1 531 12 is_stmt 1 view .LVU35
 135              		.loc 1 531 15 is_stmt 0 view .LVU36
 136 0024 63B9     		cbnz	r3, .L14
 532:controller/eeprom/eeprom.c ****       {
 533:controller/eeprom/eeprom.c ****         /* Page1 receiving data */
 534:controller/eeprom/eeprom.c ****         if (PageStatus1 == RECEIVE_DATA)
 137              		.loc 1 534 9 is_stmt 1 view .LVU37
 138              		.loc 1 534 12 is_stmt 0 view .LVU38
 139 0026 4EF6EE61 		movw	r1, #61166
 140 002a 8A42     		cmp	r2, r1
 141 002c 06D1     		bne	.L10
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 13


 535:controller/eeprom/eeprom.c ****         {
 536:controller/eeprom/eeprom.c ****           return PAGE1;         /* Page1 valid */
 142              		.loc 1 536 18 view .LVU39
 143 002e 0123     		movs	r3, #1
 144              	.LVL14:
 145              		.loc 1 536 18 view .LVU40
 146 0030 04E0     		b	.L10
 147              	.LVL15:
 148              	.L9:
 537:controller/eeprom/eeprom.c ****         }
 538:controller/eeprom/eeprom.c ****         else
 539:controller/eeprom/eeprom.c ****         {
 540:controller/eeprom/eeprom.c ****           return PAGE0;         /* Page0 valid */
 541:controller/eeprom/eeprom.c ****         }
 542:controller/eeprom/eeprom.c ****       }
 543:controller/eeprom/eeprom.c ****       else
 544:controller/eeprom/eeprom.c ****       {
 545:controller/eeprom/eeprom.c ****         return NO_VALID_PAGE;   /* No valid Page */
 546:controller/eeprom/eeprom.c ****       }
 547:controller/eeprom/eeprom.c **** 
 548:controller/eeprom/eeprom.c ****     case READ_FROM_VALID_PAGE:  /* ---- Read operation ---- */
 549:controller/eeprom/eeprom.c ****       if (PageStatus0 == VALID_PAGE)
 149              		.loc 1 549 7 is_stmt 1 view .LVU41
 150              		.loc 1 549 10 is_stmt 0 view .LVU42
 151 0032 1BB1     		cbz	r3, .L10
 550:controller/eeprom/eeprom.c ****       {
 551:controller/eeprom/eeprom.c ****         return PAGE0;           /* Page0 valid */
 552:controller/eeprom/eeprom.c ****       }
 553:controller/eeprom/eeprom.c ****       else if (PageStatus1 == VALID_PAGE)
 152              		.loc 1 553 12 is_stmt 1 view .LVU43
 153              		.loc 1 553 15 is_stmt 0 view .LVU44
 154 0034 32B9     		cbnz	r2, .L15
 554:controller/eeprom/eeprom.c ****       {
 555:controller/eeprom/eeprom.c ****         return PAGE1;           /* Page1 valid */
 155              		.loc 1 555 16 view .LVU45
 156 0036 0123     		movs	r3, #1
 157              	.LVL16:
 158              		.loc 1 555 16 view .LVU46
 159 0038 00E0     		b	.L10
 160              	.LVL17:
 161              	.L12:
 516:controller/eeprom/eeprom.c ****   {
 162              		.loc 1 516 3 view .LVU47
 163 003a 0023     		movs	r3, #0
 164              	.LVL18:
 165              	.L10:
 556:controller/eeprom/eeprom.c ****       }
 557:controller/eeprom/eeprom.c ****       else
 558:controller/eeprom/eeprom.c ****       {
 559:controller/eeprom/eeprom.c ****         return NO_VALID_PAGE ;  /* No valid Page */
 560:controller/eeprom/eeprom.c ****       }
 561:controller/eeprom/eeprom.c **** 
 562:controller/eeprom/eeprom.c ****     default:
 563:controller/eeprom/eeprom.c ****       return PAGE0;             /* Page0 valid */
 564:controller/eeprom/eeprom.c ****   }
 565:controller/eeprom/eeprom.c **** }
 166              		.loc 1 565 1 view .LVU48
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 14


 167 003c 1846     		mov	r0, r3
 168              	.LVL19:
 169              		.loc 1 565 1 view .LVU49
 170 003e 7047     		bx	lr
 171              	.LVL20:
 172              	.L14:
 545:controller/eeprom/eeprom.c ****       }
 173              		.loc 1 545 16 view .LVU50
 174 0040 AB23     		movs	r3, #171
 175              	.LVL21:
 545:controller/eeprom/eeprom.c ****       }
 176              		.loc 1 545 16 view .LVU51
 177 0042 FBE7     		b	.L10
 178              	.LVL22:
 179              	.L15:
 559:controller/eeprom/eeprom.c ****       }
 180              		.loc 1 559 16 view .LVU52
 181 0044 AB23     		movs	r3, #171
 182              	.LVL23:
 559:controller/eeprom/eeprom.c ****       }
 183              		.loc 1 559 16 view .LVU53
 184 0046 F9E7     		b	.L10
 185              	.L18:
 186              		.align	2
 187              	.L17:
 188 0048 00800008 		.word	134250496
 189 004c 00C00008 		.word	134266880
 190              		.cfi_endproc
 191              	.LFE225:
 193              		.section	.text.EE_VerifyPageFullWriteVariable,"ax",%progbits
 194              		.align	1
 195              		.syntax unified
 196              		.thumb
 197              		.thumb_func
 199              	EE_VerifyPageFullWriteVariable:
 200              	.LVL24:
 201              	.LFB226:
 566:controller/eeprom/eeprom.c **** 
 567:controller/eeprom/eeprom.c **** /**
 568:controller/eeprom/eeprom.c ****   * @brief  Verify if active page is full and Writes variable in EEPROM.
 569:controller/eeprom/eeprom.c ****   * @param  VirtAddress: 16 bit virtual address of the variable
 570:controller/eeprom/eeprom.c ****   * @param  Data: 16 bit data to be written as variable value
 571:controller/eeprom/eeprom.c ****   * @retval Success or error status:
 572:controller/eeprom/eeprom.c ****   *           - FLASH_COMPLETE: on success
 573:controller/eeprom/eeprom.c ****   *           - PAGE_FULL: if valid page is full
 574:controller/eeprom/eeprom.c ****   *           - NO_VALID_PAGE: if no valid page was found
 575:controller/eeprom/eeprom.c ****   *           - Flash error code: on write Flash error
 576:controller/eeprom/eeprom.c ****   */
 577:controller/eeprom/eeprom.c **** static uint16_t EE_VerifyPageFullWriteVariable(uint16_t VirtAddress, uint16_t Data)
 578:controller/eeprom/eeprom.c **** {
 202              		.loc 1 578 1 is_stmt 1 view -0
 203              		.cfi_startproc
 204              		@ args = 0, pretend = 0, frame = 0
 205              		@ frame_needed = 0, uses_anonymous_args = 0
 206              		.loc 1 578 1 is_stmt 0 view .LVU55
 207 0000 70B5     		push	{r4, r5, r6, lr}
 208              		.cfi_def_cfa_offset 16
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 15


 209              		.cfi_offset 4, -16
 210              		.cfi_offset 5, -12
 211              		.cfi_offset 6, -8
 212              		.cfi_offset 14, -4
 213 0002 0646     		mov	r6, r0
 214 0004 0D46     		mov	r5, r1
 579:controller/eeprom/eeprom.c ****   HAL_StatusTypeDef FlashStatus = HAL_OK;
 215              		.loc 1 579 3 is_stmt 1 view .LVU56
 216              	.LVL25:
 580:controller/eeprom/eeprom.c ****   uint16_t ValidPage = PAGE0;
 217              		.loc 1 580 3 view .LVU57
 581:controller/eeprom/eeprom.c ****   uint32_t Address = EEPROM_START_ADDRESS, PageEndAddress = EEPROM_START_ADDRESS+PAGE_SIZE;
 218              		.loc 1 581 3 view .LVU58
 582:controller/eeprom/eeprom.c **** 
 583:controller/eeprom/eeprom.c ****   /* Get valid Page for write operation */
 584:controller/eeprom/eeprom.c ****   ValidPage = EE_FindValidPage(WRITE_IN_VALID_PAGE);
 219              		.loc 1 584 3 view .LVU59
 220              		.loc 1 584 15 is_stmt 0 view .LVU60
 221 0006 0120     		movs	r0, #1
 222              	.LVL26:
 223              		.loc 1 584 15 view .LVU61
 224 0008 FFF7FEFF 		bl	EE_FindValidPage
 225              	.LVL27:
 585:controller/eeprom/eeprom.c ****   
 586:controller/eeprom/eeprom.c ****   /* Check if there is no valid page */
 587:controller/eeprom/eeprom.c ****   if (ValidPage == NO_VALID_PAGE)
 226              		.loc 1 587 3 is_stmt 1 view .LVU62
 227              		.loc 1 587 6 is_stmt 0 view .LVU63
 228 000c AB28     		cmp	r0, #171
 229 000e 1ED0     		beq	.L20
 588:controller/eeprom/eeprom.c ****   {
 589:controller/eeprom/eeprom.c ****     return  NO_VALID_PAGE;
 590:controller/eeprom/eeprom.c ****   }
 591:controller/eeprom/eeprom.c **** 
 592:controller/eeprom/eeprom.c ****   /* Get the valid Page start Address */
 593:controller/eeprom/eeprom.c ****   Address = (uint32_t)(EEPROM_START_ADDRESS + (uint32_t)(ValidPage * PAGE_SIZE));
 230              		.loc 1 593 3 is_stmt 1 view .LVU64
 231              		.loc 1 593 13 is_stmt 0 view .LVU65
 232 0010 00F50054 		add	r4, r0, #8192
 233 0014 0234     		adds	r4, r4, #2
 234              		.loc 1 593 11 view .LVU66
 235 0016 A403     		lsls	r4, r4, #14
 236              	.LVL28:
 594:controller/eeprom/eeprom.c **** 
 595:controller/eeprom/eeprom.c ****   /* Get the valid Page end Address */
 596:controller/eeprom/eeprom.c ****   PageEndAddress = (uint32_t)((EEPROM_START_ADDRESS - 1) + (uint32_t)((ValidPage + 1) * PAGE_SIZE))
 237              		.loc 1 596 3 is_stmt 1 view .LVU67
 238              		.loc 1 596 82 is_stmt 0 view .LVU68
 239 0018 0130     		adds	r0, r0, #1
 240              	.LVL29:
 241              		.loc 1 596 18 view .LVU69
 242 001a 0D4B     		ldr	r3, .L28
 243 001c 03EB803C 		add	ip, r3, r0, lsl #14
 244              	.LVL30:
 597:controller/eeprom/eeprom.c **** 
 598:controller/eeprom/eeprom.c ****   /* Check each active page address starting from begining */
 599:controller/eeprom/eeprom.c ****   while (Address < PageEndAddress)
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 16


 245              		.loc 1 599 3 is_stmt 1 view .LVU70
 246              	.L21:
 247              		.loc 1 599 18 view .LVU71
 248 0020 6445     		cmp	r4, ip
 249 0022 13D2     		bcs	.L26
 600:controller/eeprom/eeprom.c ****   {
 601:controller/eeprom/eeprom.c ****     /* Verify if Address and Address+2 contents are 0xFFFFFFFF */
 602:controller/eeprom/eeprom.c ****     if ((*(__IO uint32_t*)Address) == 0xFFFFFFFF)
 250              		.loc 1 602 5 view .LVU72
 251              		.loc 1 602 10 is_stmt 0 view .LVU73
 252 0024 2368     		ldr	r3, [r4]
 253              		.loc 1 602 8 view .LVU74
 254 0026 B3F1FF3F 		cmp	r3, #-1
 255 002a 01D0     		beq	.L27
 603:controller/eeprom/eeprom.c ****     {
 604:controller/eeprom/eeprom.c ****       /* Set variable data */
 605:controller/eeprom/eeprom.c ****       FlashStatus = HAL_FLASH_Program(TYPEPROGRAM_HALFWORD, Address, Data);       
 606:controller/eeprom/eeprom.c ****       /* If program operation was failed, a Flash error code is returned */
 607:controller/eeprom/eeprom.c ****       if (FlashStatus != HAL_OK)
 608:controller/eeprom/eeprom.c ****       {
 609:controller/eeprom/eeprom.c ****         return FlashStatus;
 610:controller/eeprom/eeprom.c ****       }
 611:controller/eeprom/eeprom.c ****       /* Set variable virtual address */
 612:controller/eeprom/eeprom.c ****       FlashStatus = HAL_FLASH_Program(TYPEPROGRAM_HALFWORD, Address + 2, VirtAddress);       
 613:controller/eeprom/eeprom.c ****       /* Return program operation status */
 614:controller/eeprom/eeprom.c ****       return FlashStatus;
 615:controller/eeprom/eeprom.c ****     }
 616:controller/eeprom/eeprom.c ****     else
 617:controller/eeprom/eeprom.c ****     {
 618:controller/eeprom/eeprom.c ****       /* Next address location */
 619:controller/eeprom/eeprom.c ****       Address = Address + 4;
 256              		.loc 1 619 7 is_stmt 1 view .LVU75
 257              		.loc 1 619 15 is_stmt 0 view .LVU76
 258 002c 0434     		adds	r4, r4, #4
 259              	.LVL31:
 260              		.loc 1 619 15 view .LVU77
 261 002e F7E7     		b	.L21
 262              	.LVL32:
 263              	.L27:
 605:controller/eeprom/eeprom.c ****       /* If program operation was failed, a Flash error code is returned */
 264              		.loc 1 605 7 is_stmt 1 view .LVU78
 605:controller/eeprom/eeprom.c ****       /* If program operation was failed, a Flash error code is returned */
 265              		.loc 1 605 21 is_stmt 0 view .LVU79
 266 0030 2A46     		mov	r2, r5
 267 0032 0023     		movs	r3, #0
 268 0034 2146     		mov	r1, r4
 269 0036 0120     		movs	r0, #1
 270              	.LVL33:
 605:controller/eeprom/eeprom.c ****       /* If program operation was failed, a Flash error code is returned */
 271              		.loc 1 605 21 view .LVU80
 272 0038 FFF7FEFF 		bl	HAL_FLASH_Program
 273              	.LVL34:
 607:controller/eeprom/eeprom.c ****       {
 274              		.loc 1 607 7 is_stmt 1 view .LVU81
 607:controller/eeprom/eeprom.c ****       {
 275              		.loc 1 607 10 is_stmt 0 view .LVU82
 276 003c 38B9     		cbnz	r0, .L20
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 17


 612:controller/eeprom/eeprom.c ****       /* Return program operation status */
 277              		.loc 1 612 7 is_stmt 1 view .LVU83
 612:controller/eeprom/eeprom.c ****       /* Return program operation status */
 278              		.loc 1 612 21 is_stmt 0 view .LVU84
 279 003e 3246     		mov	r2, r6
 280 0040 0023     		movs	r3, #0
 281 0042 A11C     		adds	r1, r4, #2
 282 0044 0120     		movs	r0, #1
 283              	.LVL35:
 612:controller/eeprom/eeprom.c ****       /* Return program operation status */
 284              		.loc 1 612 21 view .LVU85
 285 0046 FFF7FEFF 		bl	HAL_FLASH_Program
 286              	.LVL36:
 614:controller/eeprom/eeprom.c ****     }
 287              		.loc 1 614 7 is_stmt 1 view .LVU86
 614:controller/eeprom/eeprom.c ****     }
 288              		.loc 1 614 14 is_stmt 0 view .LVU87
 289 004a 00E0     		b	.L20
 290              	.LVL37:
 291              	.L26:
 620:controller/eeprom/eeprom.c ****     }
 621:controller/eeprom/eeprom.c ****   }
 622:controller/eeprom/eeprom.c **** 
 623:controller/eeprom/eeprom.c ****   /* Return PAGE_FULL in case the valid page is full */
 624:controller/eeprom/eeprom.c ****   return PAGE_FULL;
 292              		.loc 1 624 10 view .LVU88
 293 004c 8020     		movs	r0, #128
 294              	.LVL38:
 295              	.L20:
 625:controller/eeprom/eeprom.c **** }
 296              		.loc 1 625 1 view .LVU89
 297 004e 70BD     		pop	{r4, r5, r6, pc}
 298              	.LVL39:
 299              	.L29:
 300              		.loc 1 625 1 view .LVU90
 301              		.align	2
 302              	.L28:
 303 0050 FF7F0008 		.word	134250495
 304              		.cfi_endproc
 305              	.LFE226:
 307              		.section	.text.EE_Format,"ax",%progbits
 308              		.align	1
 309              		.syntax unified
 310              		.thumb
 311              		.thumb_func
 313              	EE_Format:
 314              	.LFB224:
 454:controller/eeprom/eeprom.c ****   HAL_StatusTypeDef FlashStatus = HAL_OK;
 315              		.loc 1 454 1 is_stmt 1 view -0
 316              		.cfi_startproc
 317              		@ args = 0, pretend = 0, frame = 24
 318              		@ frame_needed = 0, uses_anonymous_args = 0
 319 0000 10B5     		push	{r4, lr}
 320              		.cfi_def_cfa_offset 8
 321              		.cfi_offset 4, -8
 322              		.cfi_offset 14, -4
 323 0002 86B0     		sub	sp, sp, #24
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 18


 324              		.cfi_def_cfa_offset 32
 455:controller/eeprom/eeprom.c ****   uint32_t SectorError = 0;
 325              		.loc 1 455 3 view .LVU92
 326              	.LVL40:
 456:controller/eeprom/eeprom.c ****   FLASH_EraseInitTypeDef pEraseInit;
 327              		.loc 1 456 3 view .LVU93
 456:controller/eeprom/eeprom.c ****   FLASH_EraseInitTypeDef pEraseInit;
 328              		.loc 1 456 12 is_stmt 0 view .LVU94
 329 0004 0023     		movs	r3, #0
 330 0006 0593     		str	r3, [sp, #20]
 457:controller/eeprom/eeprom.c **** 
 331              		.loc 1 457 3 is_stmt 1 view .LVU95
 459:controller/eeprom/eeprom.c ****   pEraseInit.Sector = PAGE0_ID;
 332              		.loc 1 459 3 view .LVU96
 459:controller/eeprom/eeprom.c ****   pEraseInit.Sector = PAGE0_ID;
 333              		.loc 1 459 24 is_stmt 0 view .LVU97
 334 0008 0093     		str	r3, [sp]
 460:controller/eeprom/eeprom.c ****   pEraseInit.NbSectors = 1;
 335              		.loc 1 460 3 is_stmt 1 view .LVU98
 460:controller/eeprom/eeprom.c ****   pEraseInit.NbSectors = 1;
 336              		.loc 1 460 21 is_stmt 0 view .LVU99
 337 000a 0223     		movs	r3, #2
 338 000c 0293     		str	r3, [sp, #8]
 461:controller/eeprom/eeprom.c ****   pEraseInit.VoltageRange = VOLTAGE_RANGE;
 339              		.loc 1 461 3 is_stmt 1 view .LVU100
 461:controller/eeprom/eeprom.c ****   pEraseInit.VoltageRange = VOLTAGE_RANGE;
 340              		.loc 1 461 24 is_stmt 0 view .LVU101
 341 000e 0122     		movs	r2, #1
 342 0010 0392     		str	r2, [sp, #12]
 462:controller/eeprom/eeprom.c ****   /* Erase Page0 */
 343              		.loc 1 462 3 is_stmt 1 view .LVU102
 462:controller/eeprom/eeprom.c ****   /* Erase Page0 */
 344              		.loc 1 462 27 is_stmt 0 view .LVU103
 345 0012 0493     		str	r3, [sp, #16]
 464:controller/eeprom/eeprom.c ****   {
 346              		.loc 1 464 3 is_stmt 1 view .LVU104
 464:controller/eeprom/eeprom.c ****   {
 347              		.loc 1 464 7 is_stmt 0 view .LVU105
 348 0014 1048     		ldr	r0, .L35
 349 0016 FFF7FEFF 		bl	EE_VerifyPageFullyErased
 350              	.LVL41:
 464:controller/eeprom/eeprom.c ****   {
 351              		.loc 1 464 5 discriminator 1 view .LVU106
 352 001a 28B9     		cbnz	r0, .L31
 466:controller/eeprom/eeprom.c ****     /* If erase operation was failed, a Flash error code is returned */
 353              		.loc 1 466 5 is_stmt 1 view .LVU107
 466:controller/eeprom/eeprom.c ****     /* If erase operation was failed, a Flash error code is returned */
 354              		.loc 1 466 19 is_stmt 0 view .LVU108
 355 001c 05A9     		add	r1, sp, #20
 356 001e 6846     		mov	r0, sp
 357 0020 FFF7FEFF 		bl	HAL_FLASHEx_Erase
 358              	.LVL42:
 468:controller/eeprom/eeprom.c ****     {
 359              		.loc 1 468 5 is_stmt 1 view .LVU109
 468:controller/eeprom/eeprom.c ****     {
 360              		.loc 1 468 8 is_stmt 0 view .LVU110
 361 0024 0446     		mov	r4, r0
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 19


 362 0026 38B9     		cbnz	r0, .L32
 363              	.LVL43:
 364              	.L31:
 474:controller/eeprom/eeprom.c ****   /* If program operation was failed, a Flash error code is returned */
 365              		.loc 1 474 3 is_stmt 1 view .LVU111
 474:controller/eeprom/eeprom.c ****   /* If program operation was failed, a Flash error code is returned */
 366              		.loc 1 474 17 is_stmt 0 view .LVU112
 367 0028 0022     		movs	r2, #0
 368 002a 0023     		movs	r3, #0
 369 002c 0A49     		ldr	r1, .L35
 370 002e 0120     		movs	r0, #1
 371 0030 FFF7FEFF 		bl	HAL_FLASH_Program
 372              	.LVL44:
 476:controller/eeprom/eeprom.c ****   {
 373              		.loc 1 476 3 is_stmt 1 view .LVU113
 476:controller/eeprom/eeprom.c ****   {
 374              		.loc 1 476 6 is_stmt 0 view .LVU114
 375 0034 0446     		mov	r4, r0
 376 0036 10B1     		cbz	r0, .L34
 377              	.LVL45:
 378              	.L32:
 494:controller/eeprom/eeprom.c **** 
 379              		.loc 1 494 1 view .LVU115
 380 0038 2046     		mov	r0, r4
 381 003a 06B0     		add	sp, sp, #24
 382              		.cfi_remember_state
 383              		.cfi_def_cfa_offset 8
 384              		@ sp needed
 385 003c 10BD     		pop	{r4, pc}
 386              	.LVL46:
 387              	.L34:
 388              		.cfi_restore_state
 481:controller/eeprom/eeprom.c ****   /* Erase Page1 */
 389              		.loc 1 481 3 is_stmt 1 view .LVU116
 481:controller/eeprom/eeprom.c ****   /* Erase Page1 */
 390              		.loc 1 481 21 is_stmt 0 view .LVU117
 391 003e 0323     		movs	r3, #3
 392 0040 0293     		str	r3, [sp, #8]
 483:controller/eeprom/eeprom.c ****   {  
 393              		.loc 1 483 3 is_stmt 1 view .LVU118
 483:controller/eeprom/eeprom.c ****   {  
 394              		.loc 1 483 7 is_stmt 0 view .LVU119
 395 0042 0648     		ldr	r0, .L35+4
 396              	.LVL47:
 483:controller/eeprom/eeprom.c ****   {  
 397              		.loc 1 483 7 view .LVU120
 398 0044 FFF7FEFF 		bl	EE_VerifyPageFullyErased
 399              	.LVL48:
 483:controller/eeprom/eeprom.c ****   {  
 400              		.loc 1 483 5 discriminator 1 view .LVU121
 401 0048 0028     		cmp	r0, #0
 402 004a F5D1     		bne	.L32
 485:controller/eeprom/eeprom.c ****     /* If erase operation was failed, a Flash error code is returned */
 403              		.loc 1 485 5 is_stmt 1 view .LVU122
 485:controller/eeprom/eeprom.c ****     /* If erase operation was failed, a Flash error code is returned */
 404              		.loc 1 485 19 is_stmt 0 view .LVU123
 405 004c 05A9     		add	r1, sp, #20
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 20


 406 004e 6846     		mov	r0, sp
 407 0050 FFF7FEFF 		bl	HAL_FLASHEx_Erase
 408              	.LVL49:
 409 0054 0446     		mov	r4, r0
 410              	.LVL50:
 487:controller/eeprom/eeprom.c ****     {
 411              		.loc 1 487 5 is_stmt 1 view .LVU124
 412 0056 EFE7     		b	.L32
 413              	.L36:
 414              		.align	2
 415              	.L35:
 416 0058 00800008 		.word	134250496
 417 005c 00C00008 		.word	134266880
 418              		.cfi_endproc
 419              	.LFE224:
 421              		.section	.text.EE_ReadVariable,"ax",%progbits
 422              		.align	1
 423              		.global	EE_ReadVariable
 424              		.syntax unified
 425              		.thumb
 426              		.thumb_func
 428              	EE_ReadVariable:
 429              	.LVL51:
 430              	.LFB222:
 371:controller/eeprom/eeprom.c ****   uint16_t ValidPage = PAGE0;
 431              		.loc 1 371 1 view -0
 432              		.cfi_startproc
 433              		@ args = 0, pretend = 0, frame = 0
 434              		@ frame_needed = 0, uses_anonymous_args = 0
 371:controller/eeprom/eeprom.c ****   uint16_t ValidPage = PAGE0;
 435              		.loc 1 371 1 is_stmt 0 view .LVU126
 436 0000 38B5     		push	{r3, r4, r5, lr}
 437              		.cfi_def_cfa_offset 16
 438              		.cfi_offset 3, -16
 439              		.cfi_offset 4, -12
 440              		.cfi_offset 5, -8
 441              		.cfi_offset 14, -4
 442 0002 0446     		mov	r4, r0
 443 0004 0D46     		mov	r5, r1
 372:controller/eeprom/eeprom.c ****   uint16_t AddressValue = 0x5555, ReadStatus = 1;
 444              		.loc 1 372 3 is_stmt 1 view .LVU127
 445              	.LVL52:
 373:controller/eeprom/eeprom.c ****   uint32_t Address = EEPROM_START_ADDRESS, PageStartAddress = EEPROM_START_ADDRESS;
 446              		.loc 1 373 3 view .LVU128
 374:controller/eeprom/eeprom.c **** 
 447              		.loc 1 374 3 view .LVU129
 377:controller/eeprom/eeprom.c **** 
 448              		.loc 1 377 3 view .LVU130
 377:controller/eeprom/eeprom.c **** 
 449              		.loc 1 377 15 is_stmt 0 view .LVU131
 450 0006 0020     		movs	r0, #0
 451              	.LVL53:
 377:controller/eeprom/eeprom.c **** 
 452              		.loc 1 377 15 view .LVU132
 453 0008 FFF7FEFF 		bl	EE_FindValidPage
 454              	.LVL54:
 380:controller/eeprom/eeprom.c ****   {
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 21


 455              		.loc 1 380 3 is_stmt 1 view .LVU133
 380:controller/eeprom/eeprom.c ****   {
 456              		.loc 1 380 6 is_stmt 0 view .LVU134
 457 000c AB28     		cmp	r0, #171
 458 000e 13D0     		beq	.L38
 386:controller/eeprom/eeprom.c **** 
 459              		.loc 1 386 3 is_stmt 1 view .LVU135
 386:controller/eeprom/eeprom.c **** 
 460              		.loc 1 386 22 is_stmt 0 view .LVU136
 461 0010 0146     		mov	r1, r0
 462              	.LVL55:
 389:controller/eeprom/eeprom.c **** 
 463              		.loc 1 389 3 is_stmt 1 view .LVU137
 389:controller/eeprom/eeprom.c **** 
 464              		.loc 1 389 67 is_stmt 0 view .LVU138
 465 0012 0130     		adds	r0, r0, #1
 466              	.LVL56:
 389:controller/eeprom/eeprom.c **** 
 467              		.loc 1 389 11 view .LVU139
 468 0014 0A4B     		ldr	r3, .L45
 469 0016 03EB8033 		add	r3, r3, r0, lsl #14
 470              	.LVL57:
 392:controller/eeprom/eeprom.c ****   {
 471              		.loc 1 392 3 is_stmt 1 view .LVU140
 472              	.L39:
 392:controller/eeprom/eeprom.c ****   {
 473              		.loc 1 392 18 view .LVU141
 392:controller/eeprom/eeprom.c ****   {
 474              		.loc 1 392 38 is_stmt 0 view .LVU142
 475 001a 0A4A     		ldr	r2, .L45+4
 476 001c 02EB8132 		add	r2, r2, r1, lsl #14
 392:controller/eeprom/eeprom.c ****   {
 477              		.loc 1 392 18 view .LVU143
 478 0020 9A42     		cmp	r2, r3
 479 0022 0AD2     		bcs	.L43
 395:controller/eeprom/eeprom.c **** 
 480              		.loc 1 395 5 is_stmt 1 view .LVU144
 395:controller/eeprom/eeprom.c **** 
 481              		.loc 1 395 18 is_stmt 0 view .LVU145
 482 0024 1A88     		ldrh	r2, [r3]
 483 0026 92B2     		uxth	r2, r2
 484              	.LVL58:
 398:controller/eeprom/eeprom.c ****     {
 485              		.loc 1 398 5 is_stmt 1 view .LVU146
 398:controller/eeprom/eeprom.c ****     {
 486              		.loc 1 398 8 is_stmt 0 view .LVU147
 487 0028 A242     		cmp	r2, r4
 488 002a 01D0     		beq	.L44
 411:controller/eeprom/eeprom.c ****     }
 489              		.loc 1 411 7 is_stmt 1 view .LVU148
 411:controller/eeprom/eeprom.c ****     }
 490              		.loc 1 411 15 is_stmt 0 view .LVU149
 491 002c 043B     		subs	r3, r3, #4
 492              	.LVL59:
 411:controller/eeprom/eeprom.c ****     }
 493              		.loc 1 411 15 view .LVU150
 494 002e F4E7     		b	.L39
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 22


 495              	.LVL60:
 496              	.L44:
 401:controller/eeprom/eeprom.c **** 
 497              		.loc 1 401 7 is_stmt 1 view .LVU151
 401:controller/eeprom/eeprom.c **** 
 498              		.loc 1 401 16 is_stmt 0 view .LVU152
 499 0030 33F8023C 		ldrh	r3, [r3, #-2]
 500              	.LVL61:
 401:controller/eeprom/eeprom.c **** 
 501              		.loc 1 401 13 view .LVU153
 502 0034 2B80     		strh	r3, [r5]	@ movhi
 404:controller/eeprom/eeprom.c **** 
 503              		.loc 1 404 7 is_stmt 1 view .LVU154
 504              	.LVL62:
 406:controller/eeprom/eeprom.c ****     }
 505              		.loc 1 406 7 view .LVU155
 404:controller/eeprom/eeprom.c **** 
 506              		.loc 1 404 18 is_stmt 0 view .LVU156
 507 0036 0020     		movs	r0, #0
 508              	.LVL63:
 509              	.L38:
 417:controller/eeprom/eeprom.c **** 
 510              		.loc 1 417 1 view .LVU157
 511 0038 38BD     		pop	{r3, r4, r5, pc}
 512              	.LVL64:
 513              	.L43:
 373:controller/eeprom/eeprom.c ****   uint32_t Address = EEPROM_START_ADDRESS, PageStartAddress = EEPROM_START_ADDRESS;
 514              		.loc 1 373 35 view .LVU158
 515 003a 0120     		movs	r0, #1
 516 003c FCE7     		b	.L38
 517              	.L46:
 518 003e 00BF     		.align	2
 519              	.L45:
 520 0040 FE7F0008 		.word	134250494
 521 0044 02800008 		.word	134250498
 522              		.cfi_endproc
 523              	.LFE222:
 525              		.section	.text.EE_Init,"ax",%progbits
 526              		.align	1
 527              		.global	EE_Init
 528              		.syntax unified
 529              		.thumb
 530              		.thumb_func
 532              	EE_Init:
 533              	.LFB220:
  79:controller/eeprom/eeprom.c ****   uint16_t PageStatus0 = 6, PageStatus1 = 6;
 534              		.loc 1 79 1 is_stmt 1 view -0
 535              		.cfi_startproc
 536              		@ args = 0, pretend = 0, frame = 24
 537              		@ frame_needed = 0, uses_anonymous_args = 0
 538 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 539              		.cfi_def_cfa_offset 20
 540              		.cfi_offset 4, -20
 541              		.cfi_offset 5, -16
 542              		.cfi_offset 6, -12
 543              		.cfi_offset 7, -8
 544              		.cfi_offset 14, -4
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 23


 545 0002 87B0     		sub	sp, sp, #28
 546              		.cfi_def_cfa_offset 48
  80:controller/eeprom/eeprom.c ****   uint16_t VarIdx = 0;
 547              		.loc 1 80 3 view .LVU160
 548              	.LVL65:
  81:controller/eeprom/eeprom.c ****   uint16_t EepromStatus = 0, ReadStatus = 0;
 549              		.loc 1 81 3 view .LVU161
  82:controller/eeprom/eeprom.c ****   int16_t x = -1;
 550              		.loc 1 82 3 view .LVU162
  83:controller/eeprom/eeprom.c ****   HAL_StatusTypeDef  FlashStatus;
 551              		.loc 1 83 3 view .LVU163
  84:controller/eeprom/eeprom.c ****   uint32_t SectorError = 0;
 552              		.loc 1 84 3 view .LVU164
  85:controller/eeprom/eeprom.c ****   FLASH_EraseInitTypeDef pEraseInit;
 553              		.loc 1 85 3 view .LVU165
  85:controller/eeprom/eeprom.c ****   FLASH_EraseInitTypeDef pEraseInit;
 554              		.loc 1 85 12 is_stmt 0 view .LVU166
 555 0004 0023     		movs	r3, #0
 556 0006 0593     		str	r3, [sp, #20]
  86:controller/eeprom/eeprom.c **** 
 557              		.loc 1 86 3 is_stmt 1 view .LVU167
  90:controller/eeprom/eeprom.c ****   /* Get Page1 status */
 558              		.loc 1 90 3 view .LVU168
  90:controller/eeprom/eeprom.c ****   /* Get Page1 status */
 559              		.loc 1 90 15 is_stmt 0 view .LVU169
 560 0008 8E4A     		ldr	r2, .L96
 561 000a 1688     		ldrh	r6, [r2]
 562 000c B6B2     		uxth	r6, r6
 563              	.LVL66:
  92:controller/eeprom/eeprom.c **** 
 564              		.loc 1 92 3 is_stmt 1 view .LVU170
  92:controller/eeprom/eeprom.c **** 
 565              		.loc 1 92 15 is_stmt 0 view .LVU171
 566 000e 02F58042 		add	r2, r2, #16384
 567 0012 1588     		ldrh	r5, [r2]
 568 0014 ADB2     		uxth	r5, r5
 569              	.LVL67:
  94:controller/eeprom/eeprom.c ****   pEraseInit.Sector = PAGE0_ID;
 570              		.loc 1 94 3 is_stmt 1 view .LVU172
  94:controller/eeprom/eeprom.c ****   pEraseInit.Sector = PAGE0_ID;
 571              		.loc 1 94 24 is_stmt 0 view .LVU173
 572 0016 0093     		str	r3, [sp]
  95:controller/eeprom/eeprom.c ****   pEraseInit.NbSectors = 1;
 573              		.loc 1 95 3 is_stmt 1 view .LVU174
  95:controller/eeprom/eeprom.c ****   pEraseInit.NbSectors = 1;
 574              		.loc 1 95 21 is_stmt 0 view .LVU175
 575 0018 0223     		movs	r3, #2
 576 001a 0293     		str	r3, [sp, #8]
  96:controller/eeprom/eeprom.c ****   pEraseInit.VoltageRange = VOLTAGE_RANGE;
 577              		.loc 1 96 3 is_stmt 1 view .LVU176
  96:controller/eeprom/eeprom.c ****   pEraseInit.VoltageRange = VOLTAGE_RANGE;
 578              		.loc 1 96 24 is_stmt 0 view .LVU177
 579 001c 0122     		movs	r2, #1
 580 001e 0392     		str	r2, [sp, #12]
  97:controller/eeprom/eeprom.c ****   
 581              		.loc 1 97 3 is_stmt 1 view .LVU178
  97:controller/eeprom/eeprom.c ****   
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 24


 582              		.loc 1 97 27 is_stmt 0 view .LVU179
 583 0020 0493     		str	r3, [sp, #16]
 100:controller/eeprom/eeprom.c ****   {
 584              		.loc 1 100 3 is_stmt 1 view .LVU180
 585 0022 4EF6EE63 		movw	r3, #61166
 586 0026 9E42     		cmp	r6, r3
 587 0028 3FD0     		beq	.L48
 588 002a 4FF6FF73 		movw	r3, #65535
 589 002e 9E42     		cmp	r6, r3
 590 0030 0AD0     		beq	.L49
 591 0032 002E     		cmp	r6, #0
 592 0034 00F0A380 		beq	.L50
 309:controller/eeprom/eeprom.c ****       /* If erase/program operation was failed, a Flash error code is returned */
 593              		.loc 1 309 7 view .LVU181
 309:controller/eeprom/eeprom.c ****       /* If erase/program operation was failed, a Flash error code is returned */
 594              		.loc 1 309 21 is_stmt 0 view .LVU182
 595 0038 FFF7FEFF 		bl	EE_Format
 596              	.LVL68:
 311:controller/eeprom/eeprom.c ****       {
 597              		.loc 1 311 7 is_stmt 1 view .LVU183
 311:controller/eeprom/eeprom.c ****       {
 598              		.loc 1 311 10 is_stmt 0 view .LVU184
 599 003c 0546     		mov	r5, r0
 600              	.LVL69:
 311:controller/eeprom/eeprom.c ****       {
 601              		.loc 1 311 10 view .LVU185
 602 003e 00B9     		cbnz	r0, .L53
 318:controller/eeprom/eeprom.c **** }
 603              		.loc 1 318 10 view .LVU186
 604 0040 0025     		movs	r5, #0
 605              	.LVL70:
 606              	.L53:
 319:controller/eeprom/eeprom.c **** 
 607              		.loc 1 319 1 view .LVU187
 608 0042 2846     		mov	r0, r5
 609 0044 07B0     		add	sp, sp, #28
 610              		.cfi_remember_state
 611              		.cfi_def_cfa_offset 20
 612              		@ sp needed
 613 0046 F0BD     		pop	{r4, r5, r6, r7, pc}
 614              	.LVL71:
 615              	.L49:
 616              		.cfi_restore_state
 103:controller/eeprom/eeprom.c ****       {
 617              		.loc 1 103 7 is_stmt 1 view .LVU188
 103:controller/eeprom/eeprom.c ****       {
 618              		.loc 1 103 10 is_stmt 0 view .LVU189
 619 0048 55B1     		cbz	r5, .L85
 116:controller/eeprom/eeprom.c ****       {
 620              		.loc 1 116 12 is_stmt 1 view .LVU190
 116:controller/eeprom/eeprom.c ****       {
 621              		.loc 1 116 15 is_stmt 0 view .LVU191
 622 004a 4EF6EE63 		movw	r3, #61166
 623 004e 9D42     		cmp	r5, r3
 624 0050 15D0     		beq	.L86
 139:controller/eeprom/eeprom.c ****         /* If erase/program operation was failed, a Flash error code is returned */
 625              		.loc 1 139 9 is_stmt 1 view .LVU192
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 25


 139:controller/eeprom/eeprom.c ****         /* If erase/program operation was failed, a Flash error code is returned */
 626              		.loc 1 139 23 is_stmt 0 view .LVU193
 627 0052 FFF7FEFF 		bl	EE_Format
 628              	.LVL72:
 141:controller/eeprom/eeprom.c ****         {
 629              		.loc 1 141 9 is_stmt 1 view .LVU194
 141:controller/eeprom/eeprom.c ****         {
 630              		.loc 1 141 12 is_stmt 0 view .LVU195
 631 0056 0546     		mov	r5, r0
 632              	.LVL73:
 141:controller/eeprom/eeprom.c ****         {
 633              		.loc 1 141 12 view .LVU196
 634 0058 0028     		cmp	r0, #0
 635 005a F2D1     		bne	.L53
 318:controller/eeprom/eeprom.c **** }
 636              		.loc 1 318 10 view .LVU197
 637 005c 0025     		movs	r5, #0
 638 005e F0E7     		b	.L53
 639              	.LVL74:
 640              	.L85:
 106:controller/eeprom/eeprom.c ****         {
 641              		.loc 1 106 9 is_stmt 1 view .LVU198
 106:controller/eeprom/eeprom.c ****         {
 642              		.loc 1 106 13 is_stmt 0 view .LVU199
 643 0060 7848     		ldr	r0, .L96
 644 0062 FFF7FEFF 		bl	EE_VerifyPageFullyErased
 645              	.LVL75:
 106:controller/eeprom/eeprom.c ****         {
 646              		.loc 1 106 11 discriminator 1 view .LVU200
 647 0066 0446     		mov	r4, r0
 648 0068 0028     		cmp	r0, #0
 649 006a EAD1     		bne	.L53
 108:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 650              		.loc 1 108 11 is_stmt 1 view .LVU201
 108:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 651              		.loc 1 108 25 is_stmt 0 view .LVU202
 652 006c 05A9     		add	r1, sp, #20
 653 006e 6846     		mov	r0, sp
 654 0070 FFF7FEFF 		bl	HAL_FLASHEx_Erase
 655              	.LVL76:
 110:controller/eeprom/eeprom.c ****           {
 656              		.loc 1 110 11 is_stmt 1 view .LVU203
 110:controller/eeprom/eeprom.c ****           {
 657              		.loc 1 110 14 is_stmt 0 view .LVU204
 658 0074 0546     		mov	r5, r0
 659              	.LVL77:
 110:controller/eeprom/eeprom.c ****           {
 660              		.loc 1 110 14 view .LVU205
 661 0076 0028     		cmp	r0, #0
 662 0078 E3D1     		bne	.L53
 318:controller/eeprom/eeprom.c **** }
 663              		.loc 1 318 10 view .LVU206
 664 007a 2546     		mov	r5, r4
 665 007c E1E7     		b	.L53
 666              	.LVL78:
 667              	.L86:
 119:controller/eeprom/eeprom.c ****         { 
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 26


 668              		.loc 1 119 9 is_stmt 1 view .LVU207
 119:controller/eeprom/eeprom.c ****         { 
 669              		.loc 1 119 13 is_stmt 0 view .LVU208
 670 007e 7148     		ldr	r0, .L96
 671 0080 FFF7FEFF 		bl	EE_VerifyPageFullyErased
 672              	.LVL79:
 119:controller/eeprom/eeprom.c ****         { 
 673              		.loc 1 119 11 discriminator 1 view .LVU209
 674 0084 30B9     		cbnz	r0, .L55
 121:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 675              		.loc 1 121 11 is_stmt 1 view .LVU210
 121:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 676              		.loc 1 121 25 is_stmt 0 view .LVU211
 677 0086 05A9     		add	r1, sp, #20
 678 0088 6846     		mov	r0, sp
 679 008a FFF7FEFF 		bl	HAL_FLASHEx_Erase
 680              	.LVL80:
 123:controller/eeprom/eeprom.c ****           {
 681              		.loc 1 123 11 is_stmt 1 view .LVU212
 123:controller/eeprom/eeprom.c ****           {
 682              		.loc 1 123 14 is_stmt 0 view .LVU213
 683 008e 0546     		mov	r5, r0
 684              	.LVL81:
 123:controller/eeprom/eeprom.c ****           {
 685              		.loc 1 123 14 view .LVU214
 686 0090 0028     		cmp	r0, #0
 687 0092 D6D1     		bne	.L53
 688              	.LVL82:
 689              	.L55:
 129:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 690              		.loc 1 129 9 is_stmt 1 view .LVU215
 129:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 691              		.loc 1 129 23 is_stmt 0 view .LVU216
 692 0094 0022     		movs	r2, #0
 693 0096 0023     		movs	r3, #0
 694 0098 6B49     		ldr	r1, .L96+4
 695 009a 0120     		movs	r0, #1
 696 009c FFF7FEFF 		bl	HAL_FLASH_Program
 697              	.LVL83:
 131:controller/eeprom/eeprom.c ****         {
 698              		.loc 1 131 9 is_stmt 1 view .LVU217
 131:controller/eeprom/eeprom.c ****         {
 699              		.loc 1 131 12 is_stmt 0 view .LVU218
 700 00a0 0546     		mov	r5, r0
 701 00a2 0028     		cmp	r0, #0
 702 00a4 CDD1     		bne	.L53
 318:controller/eeprom/eeprom.c **** }
 703              		.loc 1 318 10 view .LVU219
 704 00a6 0025     		movs	r5, #0
 705 00a8 CBE7     		b	.L53
 706              	.LVL84:
 707              	.L48:
 149:controller/eeprom/eeprom.c ****       {
 708              		.loc 1 149 7 is_stmt 1 view .LVU220
 149:controller/eeprom/eeprom.c ****       {
 709              		.loc 1 149 10 is_stmt 0 view .LVU221
 710 00aa 5DB3     		cbz	r5, .L73
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 27


 196:controller/eeprom/eeprom.c ****       {
 711              		.loc 1 196 12 is_stmt 1 view .LVU222
 196:controller/eeprom/eeprom.c ****       {
 712              		.loc 1 196 15 is_stmt 0 view .LVU223
 713 00ac 4FF6FF73 		movw	r3, #65535
 714 00b0 9D42     		cmp	r5, r3
 715 00b2 4AD0     		beq	.L87
 222:controller/eeprom/eeprom.c ****         /* If erase/program operation was failed, a Flash error code is returned */
 716              		.loc 1 222 9 is_stmt 1 view .LVU224
 222:controller/eeprom/eeprom.c ****         /* If erase/program operation was failed, a Flash error code is returned */
 717              		.loc 1 222 23 is_stmt 0 view .LVU225
 718 00b4 FFF7FEFF 		bl	EE_Format
 719              	.LVL85:
 224:controller/eeprom/eeprom.c ****         {
 720              		.loc 1 224 9 is_stmt 1 view .LVU226
 224:controller/eeprom/eeprom.c ****         {
 721              		.loc 1 224 12 is_stmt 0 view .LVU227
 722 00b8 0546     		mov	r5, r0
 723              	.LVL86:
 224:controller/eeprom/eeprom.c ****         {
 724              		.loc 1 224 12 view .LVU228
 725 00ba 0028     		cmp	r0, #0
 726 00bc C1D1     		bne	.L53
 318:controller/eeprom/eeprom.c **** }
 727              		.loc 1 318 10 view .LVU229
 728 00be 0025     		movs	r5, #0
 729 00c0 BFE7     		b	.L53
 730              	.LVL87:
 731              	.L89:
 156:controller/eeprom/eeprom.c ****           }
 732              		.loc 1 156 13 is_stmt 1 view .LVU230
 156:controller/eeprom/eeprom.c ****           }
 733              		.loc 1 156 15 is_stmt 0 view .LVU231
 734 00c2 27B2     		sxth	r7, r4
 735              	.LVL88:
 156:controller/eeprom/eeprom.c ****           }
 736              		.loc 1 156 15 view .LVU232
 737 00c4 0CE0     		b	.L58
 738              	.LVL89:
 739              	.L59:
 152:controller/eeprom/eeprom.c ****         {
 740              		.loc 1 152 52 is_stmt 1 discriminator 2 view .LVU233
 741 00c6 0134     		adds	r4, r4, #1
 742              	.LVL90:
 152:controller/eeprom/eeprom.c ****         {
 743              		.loc 1 152 52 is_stmt 0 discriminator 2 view .LVU234
 744 00c8 A4B2     		uxth	r4, r4
 745              	.LVL91:
 746              	.L56:
 152:controller/eeprom/eeprom.c ****         {
 747              		.loc 1 152 33 is_stmt 1 discriminator 1 view .LVU235
 748 00ca 1A2C     		cmp	r4, #26
 749 00cc 1ED8     		bhi	.L88
 154:controller/eeprom/eeprom.c ****           {
 750              		.loc 1 154 11 view .LVU236
 154:controller/eeprom/eeprom.c ****           {
 751              		.loc 1 154 17 is_stmt 0 view .LVU237
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 28


 752 00ce 5D4B     		ldr	r3, .L96
 753 00d0 DB88     		ldrh	r3, [r3, #6]
 754 00d2 9BB2     		uxth	r3, r3
 154:controller/eeprom/eeprom.c ****           {
 755              		.loc 1 154 60 view .LVU238
 756 00d4 2646     		mov	r6, r4
 154:controller/eeprom/eeprom.c ****           {
 757              		.loc 1 154 76 view .LVU239
 758 00d6 5D4A     		ldr	r2, .L96+8
 759 00d8 32F81400 		ldrh	r0, [r2, r4, lsl #1]
 154:controller/eeprom/eeprom.c ****           {
 760              		.loc 1 154 14 view .LVU240
 761 00dc 8342     		cmp	r3, r0
 762 00de F0D0     		beq	.L89
 763              	.LVL92:
 764              	.L58:
 158:controller/eeprom/eeprom.c ****           {
 765              		.loc 1 158 11 is_stmt 1 view .LVU241
 158:controller/eeprom/eeprom.c ****           {
 766              		.loc 1 158 14 is_stmt 0 view .LVU242
 767 00e0 BE42     		cmp	r6, r7
 768 00e2 F0D0     		beq	.L59
 161:controller/eeprom/eeprom.c ****             /* In case variable corresponding to the virtual address was found */
 769              		.loc 1 161 13 is_stmt 1 view .LVU243
 161:controller/eeprom/eeprom.c ****             /* In case variable corresponding to the virtual address was found */
 770              		.loc 1 161 26 is_stmt 0 view .LVU244
 771 00e4 5A49     		ldr	r1, .L96+12
 772 00e6 FFF7FEFF 		bl	EE_ReadVariable
 773              	.LVL93:
 163:controller/eeprom/eeprom.c ****             {
 774              		.loc 1 163 13 is_stmt 1 view .LVU245
 163:controller/eeprom/eeprom.c ****             {
 775              		.loc 1 163 16 is_stmt 0 view .LVU246
 776 00ea 0128     		cmp	r0, #1
 777 00ec EBD0     		beq	.L59
 166:controller/eeprom/eeprom.c ****               /* If program operation was failed, a Flash error code is returned */
 778              		.loc 1 166 15 is_stmt 1 view .LVU247
 166:controller/eeprom/eeprom.c ****               /* If program operation was failed, a Flash error code is returned */
 779              		.loc 1 166 30 is_stmt 0 view .LVU248
 780 00ee 584B     		ldr	r3, .L96+12
 781 00f0 1988     		ldrh	r1, [r3]
 782 00f2 564B     		ldr	r3, .L96+8
 783 00f4 33F81600 		ldrh	r0, [r3, r6, lsl #1]
 784              	.LVL94:
 166:controller/eeprom/eeprom.c ****               /* If program operation was failed, a Flash error code is returned */
 785              		.loc 1 166 30 view .LVU249
 786 00f8 FFF7FEFF 		bl	EE_VerifyPageFullWriteVariable
 787              	.LVL95:
 168:controller/eeprom/eeprom.c ****               {
 788              		.loc 1 168 15 is_stmt 1 view .LVU250
 168:controller/eeprom/eeprom.c ****               {
 789              		.loc 1 168 18 is_stmt 0 view .LVU251
 790 00fc 0028     		cmp	r0, #0
 791 00fe E2D0     		beq	.L59
 170:controller/eeprom/eeprom.c ****               }
 792              		.loc 1 170 24 view .LVU252
 793 0100 0546     		mov	r5, r0
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 29


 794              	.LVL96:
 170:controller/eeprom/eeprom.c ****               }
 795              		.loc 1 170 24 view .LVU253
 796 0102 9EE7     		b	.L53
 797              	.LVL97:
 798              	.L73:
 152:controller/eeprom/eeprom.c ****         {
 799              		.loc 1 152 21 view .LVU254
 800 0104 2C46     		mov	r4, r5
  83:controller/eeprom/eeprom.c ****   HAL_StatusTypeDef  FlashStatus;
 801              		.loc 1 83 11 view .LVU255
 802 0106 4FF0FF37 		mov	r7, #-1
 803 010a DEE7     		b	.L56
 804              	.LVL98:
 805              	.L88:
 176:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 806              		.loc 1 176 9 is_stmt 1 view .LVU256
 176:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 807              		.loc 1 176 23 is_stmt 0 view .LVU257
 808 010c 0022     		movs	r2, #0
 809 010e 0023     		movs	r3, #0
 810 0110 4C49     		ldr	r1, .L96
 811 0112 0120     		movs	r0, #1
 812 0114 FFF7FEFF 		bl	HAL_FLASH_Program
 813              	.LVL99:
 178:controller/eeprom/eeprom.c ****         {
 814              		.loc 1 178 9 is_stmt 1 view .LVU258
 178:controller/eeprom/eeprom.c ****         {
 815              		.loc 1 178 12 is_stmt 0 view .LVU259
 816 0118 08B1     		cbz	r0, .L61
 180:controller/eeprom/eeprom.c ****         }
 817              		.loc 1 180 11 is_stmt 1 view .LVU260
 180:controller/eeprom/eeprom.c ****         }
 818              		.loc 1 180 18 is_stmt 0 view .LVU261
 819 011a 0546     		mov	r5, r0
 820              	.LVL100:
 180:controller/eeprom/eeprom.c ****         }
 821              		.loc 1 180 18 view .LVU262
 822 011c 91E7     		b	.L53
 823              	.LVL101:
 824              	.L61:
 182:controller/eeprom/eeprom.c ****         pEraseInit.NbSectors = 1;
 825              		.loc 1 182 9 is_stmt 1 view .LVU263
 182:controller/eeprom/eeprom.c ****         pEraseInit.NbSectors = 1;
 826              		.loc 1 182 27 is_stmt 0 view .LVU264
 827 011e 0323     		movs	r3, #3
 828 0120 0293     		str	r3, [sp, #8]
 183:controller/eeprom/eeprom.c ****         pEraseInit.VoltageRange = VOLTAGE_RANGE;
 829              		.loc 1 183 9 is_stmt 1 view .LVU265
 183:controller/eeprom/eeprom.c ****         pEraseInit.VoltageRange = VOLTAGE_RANGE;
 830              		.loc 1 183 30 is_stmt 0 view .LVU266
 831 0122 0123     		movs	r3, #1
 832 0124 0393     		str	r3, [sp, #12]
 184:controller/eeprom/eeprom.c ****         /* Erase Page1 */
 833              		.loc 1 184 9 is_stmt 1 view .LVU267
 184:controller/eeprom/eeprom.c ****         /* Erase Page1 */
 834              		.loc 1 184 33 is_stmt 0 view .LVU268
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 30


 835 0126 0223     		movs	r3, #2
 836 0128 0493     		str	r3, [sp, #16]
 186:controller/eeprom/eeprom.c ****         { 
 837              		.loc 1 186 9 is_stmt 1 view .LVU269
 186:controller/eeprom/eeprom.c ****         { 
 838              		.loc 1 186 13 is_stmt 0 view .LVU270
 839 012a 4748     		ldr	r0, .L96+4
 840              	.LVL102:
 186:controller/eeprom/eeprom.c ****         { 
 841              		.loc 1 186 13 view .LVU271
 842 012c FFF7FEFF 		bl	EE_VerifyPageFullyErased
 843              	.LVL103:
 186:controller/eeprom/eeprom.c ****         { 
 844              		.loc 1 186 11 discriminator 1 view .LVU272
 845 0130 0446     		mov	r4, r0
 846              	.LVL104:
 186:controller/eeprom/eeprom.c ****         { 
 847              		.loc 1 186 11 discriminator 1 view .LVU273
 848 0132 0028     		cmp	r0, #0
 849 0134 85D1     		bne	.L53
 188:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 850              		.loc 1 188 11 is_stmt 1 view .LVU274
 188:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 851              		.loc 1 188 25 is_stmt 0 view .LVU275
 852 0136 05A9     		add	r1, sp, #20
 853 0138 6846     		mov	r0, sp
 854 013a FFF7FEFF 		bl	HAL_FLASHEx_Erase
 855              	.LVL105:
 190:controller/eeprom/eeprom.c ****           {
 856              		.loc 1 190 11 is_stmt 1 view .LVU276
 190:controller/eeprom/eeprom.c ****           {
 857              		.loc 1 190 14 is_stmt 0 view .LVU277
 858 013e 0546     		mov	r5, r0
 859              	.LVL106:
 190:controller/eeprom/eeprom.c ****           {
 860              		.loc 1 190 14 view .LVU278
 861 0140 0028     		cmp	r0, #0
 862 0142 7FF47EAF 		bne	.L53
 318:controller/eeprom/eeprom.c **** }
 863              		.loc 1 318 10 view .LVU279
 864 0146 2546     		mov	r5, r4
 865 0148 7BE7     		b	.L53
 866              	.LVL107:
 867              	.L87:
 198:controller/eeprom/eeprom.c ****         pEraseInit.NbSectors = 1;
 868              		.loc 1 198 9 is_stmt 1 view .LVU280
 198:controller/eeprom/eeprom.c ****         pEraseInit.NbSectors = 1;
 869              		.loc 1 198 27 is_stmt 0 view .LVU281
 870 014a 0323     		movs	r3, #3
 871 014c 0293     		str	r3, [sp, #8]
 199:controller/eeprom/eeprom.c ****         pEraseInit.VoltageRange = VOLTAGE_RANGE;
 872              		.loc 1 199 9 is_stmt 1 view .LVU282
 200:controller/eeprom/eeprom.c ****         /* Erase Page1 */
 873              		.loc 1 200 9 view .LVU283
 202:controller/eeprom/eeprom.c ****         { 
 874              		.loc 1 202 9 view .LVU284
 202:controller/eeprom/eeprom.c ****         { 
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 31


 875              		.loc 1 202 13 is_stmt 0 view .LVU285
 876 014e 3E48     		ldr	r0, .L96+4
 877 0150 FFF7FEFF 		bl	EE_VerifyPageFullyErased
 878              	.LVL108:
 202:controller/eeprom/eeprom.c ****         { 
 879              		.loc 1 202 11 discriminator 1 view .LVU286
 880 0154 38B9     		cbnz	r0, .L63
 204:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 881              		.loc 1 204 11 is_stmt 1 view .LVU287
 204:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 882              		.loc 1 204 25 is_stmt 0 view .LVU288
 883 0156 05A9     		add	r1, sp, #20
 884 0158 6846     		mov	r0, sp
 885 015a FFF7FEFF 		bl	HAL_FLASHEx_Erase
 886              	.LVL109:
 206:controller/eeprom/eeprom.c ****           {
 887              		.loc 1 206 11 is_stmt 1 view .LVU289
 206:controller/eeprom/eeprom.c ****           {
 888              		.loc 1 206 14 is_stmt 0 view .LVU290
 889 015e 0546     		mov	r5, r0
 890              	.LVL110:
 206:controller/eeprom/eeprom.c ****           {
 891              		.loc 1 206 14 view .LVU291
 892 0160 0028     		cmp	r0, #0
 893 0162 7FF46EAF 		bne	.L53
 894              	.LVL111:
 895              	.L63:
 212:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 896              		.loc 1 212 9 is_stmt 1 view .LVU292
 212:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 897              		.loc 1 212 23 is_stmt 0 view .LVU293
 898 0166 0022     		movs	r2, #0
 899 0168 0023     		movs	r3, #0
 900 016a 3649     		ldr	r1, .L96
 901 016c 0120     		movs	r0, #1
 902 016e FFF7FEFF 		bl	HAL_FLASH_Program
 903              	.LVL112:
 214:controller/eeprom/eeprom.c ****         {
 904              		.loc 1 214 9 is_stmt 1 view .LVU294
 214:controller/eeprom/eeprom.c ****         {
 905              		.loc 1 214 12 is_stmt 0 view .LVU295
 906 0172 0546     		mov	r5, r0
 907 0174 0028     		cmp	r0, #0
 908 0176 7FF464AF 		bne	.L53
 318:controller/eeprom/eeprom.c **** }
 909              		.loc 1 318 10 view .LVU296
 910 017a 0025     		movs	r5, #0
 911 017c 61E7     		b	.L53
 912              	.LVL113:
 913              	.L50:
 232:controller/eeprom/eeprom.c ****       {
 914              		.loc 1 232 7 is_stmt 1 view .LVU297
 232:controller/eeprom/eeprom.c ****       {
 915              		.loc 1 232 10 is_stmt 0 view .LVU298
 916 017e 3DB1     		cbz	r5, .L90
 242:controller/eeprom/eeprom.c ****       {
 917              		.loc 1 242 12 is_stmt 1 view .LVU299
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 32


 242:controller/eeprom/eeprom.c ****       {
 918              		.loc 1 242 15 is_stmt 0 view .LVU300
 919 0180 4FF6FF73 		movw	r3, #65535
 920 0184 9D42     		cmp	r5, r3
 921 0186 0AD0     		beq	.L91
 261:controller/eeprom/eeprom.c ****         {
 922              		.loc 1 261 21 view .LVU301
 923 0188 3446     		mov	r4, r6
  83:controller/eeprom/eeprom.c ****   HAL_StatusTypeDef  FlashStatus;
 924              		.loc 1 83 11 view .LVU302
 925 018a 4FF0FF37 		mov	r7, #-1
 926 018e 1CE0     		b	.L65
 927              	.L90:
 235:controller/eeprom/eeprom.c ****         /* If erase/program operation was failed, a Flash error code is returned */
 928              		.loc 1 235 9 is_stmt 1 view .LVU303
 235:controller/eeprom/eeprom.c ****         /* If erase/program operation was failed, a Flash error code is returned */
 929              		.loc 1 235 23 is_stmt 0 view .LVU304
 930 0190 FFF7FEFF 		bl	EE_Format
 931              	.LVL114:
 237:controller/eeprom/eeprom.c ****         {
 932              		.loc 1 237 9 is_stmt 1 view .LVU305
 237:controller/eeprom/eeprom.c ****         {
 933              		.loc 1 237 12 is_stmt 0 view .LVU306
 934 0194 0028     		cmp	r0, #0
 935 0196 3FF454AF 		beq	.L53
 239:controller/eeprom/eeprom.c ****         }
 936              		.loc 1 239 11 is_stmt 1 view .LVU307
 239:controller/eeprom/eeprom.c ****         }
 937              		.loc 1 239 18 is_stmt 0 view .LVU308
 938 019a 0546     		mov	r5, r0
 939              	.LVL115:
 239:controller/eeprom/eeprom.c ****         }
 940              		.loc 1 239 18 view .LVU309
 941 019c 51E7     		b	.L53
 942              	.LVL116:
 943              	.L91:
 244:controller/eeprom/eeprom.c ****         pEraseInit.NbSectors = 1;
 944              		.loc 1 244 9 is_stmt 1 view .LVU310
 244:controller/eeprom/eeprom.c ****         pEraseInit.NbSectors = 1;
 945              		.loc 1 244 27 is_stmt 0 view .LVU311
 946 019e 0323     		movs	r3, #3
 947 01a0 0293     		str	r3, [sp, #8]
 245:controller/eeprom/eeprom.c ****         pEraseInit.VoltageRange = VOLTAGE_RANGE;
 948              		.loc 1 245 9 is_stmt 1 view .LVU312
 246:controller/eeprom/eeprom.c ****         /* Erase Page1 */
 949              		.loc 1 246 9 view .LVU313
 248:controller/eeprom/eeprom.c ****         { 
 950              		.loc 1 248 9 view .LVU314
 248:controller/eeprom/eeprom.c ****         { 
 951              		.loc 1 248 13 is_stmt 0 view .LVU315
 952 01a2 2948     		ldr	r0, .L96+4
 953 01a4 FFF7FEFF 		bl	EE_VerifyPageFullyErased
 954              	.LVL117:
 248:controller/eeprom/eeprom.c ****         { 
 955              		.loc 1 248 11 discriminator 1 view .LVU316
 956 01a8 0546     		mov	r5, r0
 957              	.LVL118:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 33


 248:controller/eeprom/eeprom.c ****         { 
 958              		.loc 1 248 11 discriminator 1 view .LVU317
 959 01aa 08B1     		cbz	r0, .L92
 318:controller/eeprom/eeprom.c **** }
 960              		.loc 1 318 10 view .LVU318
 961 01ac 3546     		mov	r5, r6
 962 01ae 48E7     		b	.L53
 963              	.L92:
 250:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 964              		.loc 1 250 11 is_stmt 1 view .LVU319
 250:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 965              		.loc 1 250 25 is_stmt 0 view .LVU320
 966 01b0 05A9     		add	r1, sp, #20
 967 01b2 6846     		mov	r0, sp
 968 01b4 FFF7FEFF 		bl	HAL_FLASHEx_Erase
 969              	.LVL119:
 252:controller/eeprom/eeprom.c ****           {
 970              		.loc 1 252 11 is_stmt 1 view .LVU321
 252:controller/eeprom/eeprom.c ****           {
 971              		.loc 1 252 14 is_stmt 0 view .LVU322
 972 01b8 0028     		cmp	r0, #0
 973 01ba 3FF442AF 		beq	.L53
 254:controller/eeprom/eeprom.c ****           }
 974              		.loc 1 254 13 is_stmt 1 view .LVU323
 254:controller/eeprom/eeprom.c ****           }
 975              		.loc 1 254 20 is_stmt 0 view .LVU324
 976 01be 0546     		mov	r5, r0
 977 01c0 3FE7     		b	.L53
 978              	.LVL120:
 979              	.L94:
 265:controller/eeprom/eeprom.c ****           }
 980              		.loc 1 265 13 is_stmt 1 view .LVU325
 265:controller/eeprom/eeprom.c ****           }
 981              		.loc 1 265 15 is_stmt 0 view .LVU326
 982 01c2 27B2     		sxth	r7, r4
 983              	.LVL121:
 265:controller/eeprom/eeprom.c ****           }
 984              		.loc 1 265 15 view .LVU327
 985 01c4 0CE0     		b	.L66
 986              	.LVL122:
 987              	.L67:
 261:controller/eeprom/eeprom.c ****         {
 988              		.loc 1 261 52 is_stmt 1 discriminator 2 view .LVU328
 989 01c6 0134     		adds	r4, r4, #1
 990              	.LVL123:
 261:controller/eeprom/eeprom.c ****         {
 991              		.loc 1 261 52 is_stmt 0 discriminator 2 view .LVU329
 992 01c8 A4B2     		uxth	r4, r4
 993              	.LVL124:
 994              	.L65:
 261:controller/eeprom/eeprom.c ****         {
 995              		.loc 1 261 33 is_stmt 1 discriminator 1 view .LVU330
 996 01ca 1A2C     		cmp	r4, #26
 997 01cc 1AD8     		bhi	.L93
 263:controller/eeprom/eeprom.c ****           {
 998              		.loc 1 263 11 view .LVU331
 263:controller/eeprom/eeprom.c ****           {
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 34


 999              		.loc 1 263 16 is_stmt 0 view .LVU332
 1000 01ce 1E4B     		ldr	r3, .L96+4
 1001 01d0 DB88     		ldrh	r3, [r3, #6]
 1002 01d2 9BB2     		uxth	r3, r3
 263:controller/eeprom/eeprom.c ****           {
 1003              		.loc 1 263 59 view .LVU333
 1004 01d4 2546     		mov	r5, r4
 263:controller/eeprom/eeprom.c ****           {
 1005              		.loc 1 263 75 view .LVU334
 1006 01d6 1D4A     		ldr	r2, .L96+8
 1007 01d8 32F81400 		ldrh	r0, [r2, r4, lsl #1]
 263:controller/eeprom/eeprom.c ****           {
 1008              		.loc 1 263 14 view .LVU335
 1009 01dc 8342     		cmp	r3, r0
 1010 01de F0D0     		beq	.L94
 1011              	.LVL125:
 1012              	.L66:
 267:controller/eeprom/eeprom.c ****           {
 1013              		.loc 1 267 11 is_stmt 1 view .LVU336
 267:controller/eeprom/eeprom.c ****           {
 1014              		.loc 1 267 14 is_stmt 0 view .LVU337
 1015 01e0 BD42     		cmp	r5, r7
 1016 01e2 F0D0     		beq	.L67
 270:controller/eeprom/eeprom.c ****             /* In case variable corresponding to the virtual address was found */
 1017              		.loc 1 270 13 is_stmt 1 view .LVU338
 270:controller/eeprom/eeprom.c ****             /* In case variable corresponding to the virtual address was found */
 1018              		.loc 1 270 26 is_stmt 0 view .LVU339
 1019 01e4 1A49     		ldr	r1, .L96+12
 1020 01e6 FFF7FEFF 		bl	EE_ReadVariable
 1021              	.LVL126:
 272:controller/eeprom/eeprom.c ****             {
 1022              		.loc 1 272 13 is_stmt 1 view .LVU340
 272:controller/eeprom/eeprom.c ****             {
 1023              		.loc 1 272 16 is_stmt 0 view .LVU341
 1024 01ea 0128     		cmp	r0, #1
 1025 01ec EBD0     		beq	.L67
 275:controller/eeprom/eeprom.c ****               /* If program operation was failed, a Flash error code is returned */
 1026              		.loc 1 275 15 is_stmt 1 view .LVU342
 275:controller/eeprom/eeprom.c ****               /* If program operation was failed, a Flash error code is returned */
 1027              		.loc 1 275 30 is_stmt 0 view .LVU343
 1028 01ee 184B     		ldr	r3, .L96+12
 1029 01f0 1988     		ldrh	r1, [r3]
 1030 01f2 164B     		ldr	r3, .L96+8
 1031 01f4 33F81500 		ldrh	r0, [r3, r5, lsl #1]
 1032              	.LVL127:
 275:controller/eeprom/eeprom.c ****               /* If program operation was failed, a Flash error code is returned */
 1033              		.loc 1 275 30 view .LVU344
 1034 01f8 FFF7FEFF 		bl	EE_VerifyPageFullWriteVariable
 1035              	.LVL128:
 277:controller/eeprom/eeprom.c ****               {
 1036              		.loc 1 277 15 is_stmt 1 view .LVU345
 277:controller/eeprom/eeprom.c ****               {
 1037              		.loc 1 277 18 is_stmt 0 view .LVU346
 1038 01fc 0546     		mov	r5, r0
 1039 01fe 0028     		cmp	r0, #0
 1040 0200 E1D0     		beq	.L67
 1041 0202 1EE7     		b	.L53
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 35


 1042              	.LVL129:
 1043              	.L93:
 285:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 1044              		.loc 1 285 9 is_stmt 1 view .LVU347
 285:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 1045              		.loc 1 285 23 is_stmt 0 view .LVU348
 1046 0204 0022     		movs	r2, #0
 1047 0206 0023     		movs	r3, #0
 1048 0208 0F49     		ldr	r1, .L96+4
 1049 020a 0120     		movs	r0, #1
 1050 020c FFF7FEFF 		bl	HAL_FLASH_Program
 1051              	.LVL130:
 287:controller/eeprom/eeprom.c ****         {
 1052              		.loc 1 287 9 is_stmt 1 view .LVU349
 287:controller/eeprom/eeprom.c ****         {
 1053              		.loc 1 287 12 is_stmt 0 view .LVU350
 1054 0210 0546     		mov	r5, r0
 1055 0212 0028     		cmp	r0, #0
 1056 0214 7FF415AF 		bne	.L53
 291:controller/eeprom/eeprom.c ****         pEraseInit.NbSectors = 1;
 1057              		.loc 1 291 9 is_stmt 1 view .LVU351
 291:controller/eeprom/eeprom.c ****         pEraseInit.NbSectors = 1;
 1058              		.loc 1 291 27 is_stmt 0 view .LVU352
 1059 0218 0223     		movs	r3, #2
 1060 021a 0293     		str	r3, [sp, #8]
 292:controller/eeprom/eeprom.c ****         pEraseInit.VoltageRange = VOLTAGE_RANGE;
 1061              		.loc 1 292 9 is_stmt 1 view .LVU353
 292:controller/eeprom/eeprom.c ****         pEraseInit.VoltageRange = VOLTAGE_RANGE;
 1062              		.loc 1 292 30 is_stmt 0 view .LVU354
 1063 021c 0122     		movs	r2, #1
 1064 021e 0392     		str	r2, [sp, #12]
 293:controller/eeprom/eeprom.c ****         /* Erase Page0 */
 1065              		.loc 1 293 9 is_stmt 1 view .LVU355
 293:controller/eeprom/eeprom.c ****         /* Erase Page0 */
 1066              		.loc 1 293 33 is_stmt 0 view .LVU356
 1067 0220 0493     		str	r3, [sp, #16]
 295:controller/eeprom/eeprom.c ****         { 
 1068              		.loc 1 295 9 is_stmt 1 view .LVU357
 295:controller/eeprom/eeprom.c ****         { 
 1069              		.loc 1 295 13 is_stmt 0 view .LVU358
 1070 0222 0848     		ldr	r0, .L96
 1071              	.LVL131:
 295:controller/eeprom/eeprom.c ****         { 
 1072              		.loc 1 295 13 view .LVU359
 1073 0224 FFF7FEFF 		bl	EE_VerifyPageFullyErased
 1074              	.LVL132:
 295:controller/eeprom/eeprom.c ****         { 
 1075              		.loc 1 295 11 discriminator 1 view .LVU360
 1076 0228 0546     		mov	r5, r0
 1077              	.LVL133:
 295:controller/eeprom/eeprom.c ****         { 
 1078              		.loc 1 295 11 discriminator 1 view .LVU361
 1079 022a 08B1     		cbz	r0, .L95
 318:controller/eeprom/eeprom.c **** }
 1080              		.loc 1 318 10 view .LVU362
 1081 022c 3546     		mov	r5, r6
 1082 022e 08E7     		b	.L53
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 36


 1083              	.L95:
 297:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 1084              		.loc 1 297 11 is_stmt 1 view .LVU363
 297:controller/eeprom/eeprom.c ****           /* If erase operation was failed, a Flash error code is returned */
 1085              		.loc 1 297 25 is_stmt 0 view .LVU364
 1086 0230 05A9     		add	r1, sp, #20
 1087 0232 6846     		mov	r0, sp
 1088 0234 FFF7FEFF 		bl	HAL_FLASHEx_Erase
 1089              	.LVL134:
 299:controller/eeprom/eeprom.c ****           {
 1090              		.loc 1 299 11 is_stmt 1 view .LVU365
 299:controller/eeprom/eeprom.c ****           {
 1091              		.loc 1 299 14 is_stmt 0 view .LVU366
 1092 0238 0028     		cmp	r0, #0
 1093 023a 3FF402AF 		beq	.L53
 301:controller/eeprom/eeprom.c ****           }
 1094              		.loc 1 301 13 is_stmt 1 view .LVU367
 301:controller/eeprom/eeprom.c ****           }
 1095              		.loc 1 301 20 is_stmt 0 view .LVU368
 1096 023e 0546     		mov	r5, r0
 1097 0240 FFE6     		b	.L53
 1098              	.L97:
 1099 0242 00BF     		.align	2
 1100              	.L96:
 1101 0244 00800008 		.word	134250496
 1102 0248 00C00008 		.word	134266880
 1103 024c 00000000 		.word	VirtAddVarTab
 1104 0250 00000000 		.word	DataVar
 1105              		.cfi_endproc
 1106              	.LFE220:
 1108              		.section	.text.EE_PageTransfer,"ax",%progbits
 1109              		.align	1
 1110              		.syntax unified
 1111              		.thumb
 1112              		.thumb_func
 1114              	EE_PageTransfer:
 1115              	.LVL135:
 1116              	.LFB227:
 626:controller/eeprom/eeprom.c **** 
 627:controller/eeprom/eeprom.c **** /**
 628:controller/eeprom/eeprom.c ****   * @brief  Transfers last updated variables data from the full Page to
 629:controller/eeprom/eeprom.c ****   *   an empty one.
 630:controller/eeprom/eeprom.c ****   * @param  VirtAddress: 16 bit virtual address of the variable
 631:controller/eeprom/eeprom.c ****   * @param  Data: 16 bit data to be written as variable value
 632:controller/eeprom/eeprom.c ****   * @retval Success or error status:
 633:controller/eeprom/eeprom.c ****   *           - FLASH_COMPLETE: on success
 634:controller/eeprom/eeprom.c ****   *           - PAGE_FULL: if valid page is full
 635:controller/eeprom/eeprom.c ****   *           - NO_VALID_PAGE: if no valid page was found
 636:controller/eeprom/eeprom.c ****   *           - Flash error code: on write Flash error
 637:controller/eeprom/eeprom.c ****   */
 638:controller/eeprom/eeprom.c **** static uint16_t EE_PageTransfer(uint16_t VirtAddress, uint16_t Data)
 639:controller/eeprom/eeprom.c **** {
 1117              		.loc 1 639 1 is_stmt 1 view -0
 1118              		.cfi_startproc
 1119              		@ args = 0, pretend = 0, frame = 24
 1120              		@ frame_needed = 0, uses_anonymous_args = 0
 1121              		.loc 1 639 1 is_stmt 0 view .LVU370
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 37


 1122 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1123              		.cfi_def_cfa_offset 24
 1124              		.cfi_offset 4, -24
 1125              		.cfi_offset 5, -20
 1126              		.cfi_offset 6, -16
 1127              		.cfi_offset 7, -12
 1128              		.cfi_offset 8, -8
 1129              		.cfi_offset 14, -4
 1130 0004 86B0     		sub	sp, sp, #24
 1131              		.cfi_def_cfa_offset 48
 1132 0006 0546     		mov	r5, r0
 1133 0008 8846     		mov	r8, r1
 640:controller/eeprom/eeprom.c ****   HAL_StatusTypeDef FlashStatus = HAL_OK;
 1134              		.loc 1 640 3 is_stmt 1 view .LVU371
 1135              	.LVL136:
 641:controller/eeprom/eeprom.c ****   uint32_t NewPageAddress = EEPROM_START_ADDRESS;
 1136              		.loc 1 641 3 view .LVU372
 642:controller/eeprom/eeprom.c ****   uint16_t OldPageId=0;
 1137              		.loc 1 642 3 view .LVU373
 643:controller/eeprom/eeprom.c ****   uint16_t ValidPage = PAGE0, VarIdx = 0;
 1138              		.loc 1 643 3 view .LVU374
 644:controller/eeprom/eeprom.c ****   uint16_t EepromStatus = 0, ReadStatus = 0;
 1139              		.loc 1 644 3 view .LVU375
 645:controller/eeprom/eeprom.c ****   uint32_t SectorError = 0;
 1140              		.loc 1 645 3 view .LVU376
 1141              		.loc 1 645 12 is_stmt 0 view .LVU377
 1142 000a 0020     		movs	r0, #0
 1143              	.LVL137:
 1144              		.loc 1 645 12 view .LVU378
 1145 000c 0590     		str	r0, [sp, #20]
 646:controller/eeprom/eeprom.c ****   FLASH_EraseInitTypeDef pEraseInit;
 1146              		.loc 1 646 3 is_stmt 1 view .LVU379
 647:controller/eeprom/eeprom.c **** 
 648:controller/eeprom/eeprom.c ****   /* Get active Page for read operation */
 649:controller/eeprom/eeprom.c ****   ValidPage = EE_FindValidPage(READ_FROM_VALID_PAGE);
 1147              		.loc 1 649 3 view .LVU380
 1148              		.loc 1 649 15 is_stmt 0 view .LVU381
 1149 000e FFF7FEFF 		bl	EE_FindValidPage
 1150              	.LVL138:
 650:controller/eeprom/eeprom.c **** 
 651:controller/eeprom/eeprom.c ****   if (ValidPage == PAGE1)       /* Page1 valid */
 1151              		.loc 1 651 3 is_stmt 1 view .LVU382
 1152              		.loc 1 651 6 is_stmt 0 view .LVU383
 1153 0012 0128     		cmp	r0, #1
 1154 0014 10D0     		beq	.L107
 652:controller/eeprom/eeprom.c ****   {
 653:controller/eeprom/eeprom.c ****     /* New page address where variable will be moved to */
 654:controller/eeprom/eeprom.c ****     NewPageAddress = PAGE0_BASE_ADDRESS;
 655:controller/eeprom/eeprom.c **** 
 656:controller/eeprom/eeprom.c ****     /* Old page ID where variable will be taken from */
 657:controller/eeprom/eeprom.c ****     OldPageId = PAGE1_ID;
 658:controller/eeprom/eeprom.c ****   }
 659:controller/eeprom/eeprom.c ****   else if (ValidPage == PAGE0)  /* Page0 valid */
 1155              		.loc 1 659 8 is_stmt 1 view .LVU384
 1156              		.loc 1 659 11 is_stmt 0 view .LVU385
 1157 0016 0028     		cmp	r0, #0
 1158 0018 47D1     		bne	.L108
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 38


 660:controller/eeprom/eeprom.c ****   {
 661:controller/eeprom/eeprom.c ****     /* New page address  where variable will be moved to */
 662:controller/eeprom/eeprom.c ****     NewPageAddress = PAGE1_BASE_ADDRESS;
 663:controller/eeprom/eeprom.c **** 
 664:controller/eeprom/eeprom.c ****     /* Old page ID where variable will be taken from */
 665:controller/eeprom/eeprom.c ****     OldPageId = PAGE0_ID;
 1159              		.loc 1 665 15 view .LVU386
 1160 001a 0227     		movs	r7, #2
 662:controller/eeprom/eeprom.c **** 
 1161              		.loc 1 662 20 view .LVU387
 1162 001c 244E     		ldr	r6, .L113
 1163              	.L99:
 1164              	.LVL139:
 666:controller/eeprom/eeprom.c ****   }
 667:controller/eeprom/eeprom.c ****   else
 668:controller/eeprom/eeprom.c ****   {
 669:controller/eeprom/eeprom.c ****     return NO_VALID_PAGE;       /* No valid Page */
 670:controller/eeprom/eeprom.c ****   }
 671:controller/eeprom/eeprom.c **** 
 672:controller/eeprom/eeprom.c ****   /* Set the new Page status to RECEIVE_DATA status */
 673:controller/eeprom/eeprom.c ****   FlashStatus = HAL_FLASH_Program(TYPEPROGRAM_HALFWORD, NewPageAddress, RECEIVE_DATA);  
 1165              		.loc 1 673 3 is_stmt 1 view .LVU388
 1166              		.loc 1 673 17 is_stmt 0 view .LVU389
 1167 001e 4EF6EE62 		movw	r2, #61166
 1168 0022 0023     		movs	r3, #0
 1169 0024 3146     		mov	r1, r6
 1170 0026 0120     		movs	r0, #1
 1171              	.LVL140:
 1172              		.loc 1 673 17 view .LVU390
 1173 0028 FFF7FEFF 		bl	HAL_FLASH_Program
 1174              	.LVL141:
 674:controller/eeprom/eeprom.c ****   /* If program operation was failed, a Flash error code is returned */
 675:controller/eeprom/eeprom.c ****   if (FlashStatus != HAL_OK)
 1175              		.loc 1 675 3 is_stmt 1 view .LVU391
 1176              		.loc 1 675 6 is_stmt 0 view .LVU392
 1177 002c 0446     		mov	r4, r0
 1178 002e 30B1     		cbz	r0, .L111
 1179              	.LVL142:
 1180              	.L100:
 676:controller/eeprom/eeprom.c ****   {
 677:controller/eeprom/eeprom.c ****     return FlashStatus;
 678:controller/eeprom/eeprom.c ****   }
 679:controller/eeprom/eeprom.c ****   
 680:controller/eeprom/eeprom.c ****   /* Write the variable passed as parameter in the new active page */
 681:controller/eeprom/eeprom.c ****   EepromStatus = EE_VerifyPageFullWriteVariable(VirtAddress, Data);
 682:controller/eeprom/eeprom.c ****   /* If program operation was failed, a Flash error code is returned */
 683:controller/eeprom/eeprom.c ****   if (EepromStatus != HAL_OK)
 684:controller/eeprom/eeprom.c ****   {
 685:controller/eeprom/eeprom.c ****     return EepromStatus;
 686:controller/eeprom/eeprom.c ****   }
 687:controller/eeprom/eeprom.c **** 
 688:controller/eeprom/eeprom.c ****   /* Transfer process: transfer variables from old to the new active page */
 689:controller/eeprom/eeprom.c ****   for (VarIdx = 0; VarIdx < NB_OF_VAR; VarIdx++)
 690:controller/eeprom/eeprom.c ****   {
 691:controller/eeprom/eeprom.c ****     if (VirtAddVarTab[VarIdx] != VirtAddress)  /* Check each variable except the one passed as para
 692:controller/eeprom/eeprom.c ****     {
 693:controller/eeprom/eeprom.c ****       /* Read the other last variable updates */
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 39


 694:controller/eeprom/eeprom.c ****       ReadStatus = EE_ReadVariable(VirtAddVarTab[VarIdx], &DataVar);
 695:controller/eeprom/eeprom.c ****       /* In case variable corresponding to the virtual address was found */
 696:controller/eeprom/eeprom.c ****       if (ReadStatus != 0x1)
 697:controller/eeprom/eeprom.c ****       {
 698:controller/eeprom/eeprom.c ****         /* Transfer the variable to the new active page */
 699:controller/eeprom/eeprom.c ****         EepromStatus = EE_VerifyPageFullWriteVariable(VirtAddVarTab[VarIdx], DataVar);
 700:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 701:controller/eeprom/eeprom.c ****         if (EepromStatus != HAL_OK)
 702:controller/eeprom/eeprom.c ****         {
 703:controller/eeprom/eeprom.c ****           return EepromStatus;
 704:controller/eeprom/eeprom.c ****         }
 705:controller/eeprom/eeprom.c ****       }
 706:controller/eeprom/eeprom.c ****     }
 707:controller/eeprom/eeprom.c ****   }
 708:controller/eeprom/eeprom.c **** 
 709:controller/eeprom/eeprom.c ****   pEraseInit.TypeErase = TYPEERASE_SECTORS;
 710:controller/eeprom/eeprom.c ****   pEraseInit.Sector = OldPageId;
 711:controller/eeprom/eeprom.c ****   pEraseInit.NbSectors = 1;
 712:controller/eeprom/eeprom.c ****   pEraseInit.VoltageRange = VOLTAGE_RANGE;
 713:controller/eeprom/eeprom.c ****   
 714:controller/eeprom/eeprom.c ****   /* Erase the old Page: Set old Page status to ERASED status */
 715:controller/eeprom/eeprom.c ****   FlashStatus = HAL_FLASHEx_Erase(&pEraseInit, &SectorError);  
 716:controller/eeprom/eeprom.c ****   /* If erase operation was failed, a Flash error code is returned */
 717:controller/eeprom/eeprom.c ****   if (FlashStatus != HAL_OK)
 718:controller/eeprom/eeprom.c ****   {
 719:controller/eeprom/eeprom.c ****     return FlashStatus;
 720:controller/eeprom/eeprom.c ****   }
 721:controller/eeprom/eeprom.c **** 
 722:controller/eeprom/eeprom.c ****   /* Set new Page status to VALID_PAGE status */
 723:controller/eeprom/eeprom.c ****   FlashStatus = HAL_FLASH_Program(TYPEPROGRAM_HALFWORD, NewPageAddress, VALID_PAGE);   
 724:controller/eeprom/eeprom.c ****   /* If program operation was failed, a Flash error code is returned */
 725:controller/eeprom/eeprom.c ****   if (FlashStatus != HAL_OK)
 726:controller/eeprom/eeprom.c ****   {
 727:controller/eeprom/eeprom.c ****     return FlashStatus;
 728:controller/eeprom/eeprom.c ****   }
 729:controller/eeprom/eeprom.c **** 
 730:controller/eeprom/eeprom.c ****   /* Return last operation flash status */
 731:controller/eeprom/eeprom.c ****   return FlashStatus;
 732:controller/eeprom/eeprom.c **** }
 1181              		.loc 1 732 1 view .LVU393
 1182 0030 2046     		mov	r0, r4
 1183 0032 06B0     		add	sp, sp, #24
 1184              		.cfi_remember_state
 1185              		.cfi_def_cfa_offset 24
 1186              		@ sp needed
 1187 0034 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1188              	.LVL143:
 1189              	.L107:
 1190              		.cfi_restore_state
 657:controller/eeprom/eeprom.c ****   }
 1191              		.loc 1 657 15 view .LVU394
 1192 0038 0327     		movs	r7, #3
 654:controller/eeprom/eeprom.c **** 
 1193              		.loc 1 654 20 view .LVU395
 1194 003a 1E4E     		ldr	r6, .L113+4
 1195 003c EFE7     		b	.L99
 1196              	.LVL144:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 40


 1197              	.L111:
 681:controller/eeprom/eeprom.c ****   /* If program operation was failed, a Flash error code is returned */
 1198              		.loc 1 681 3 is_stmt 1 view .LVU396
 681:controller/eeprom/eeprom.c ****   /* If program operation was failed, a Flash error code is returned */
 1199              		.loc 1 681 18 is_stmt 0 view .LVU397
 1200 003e 4146     		mov	r1, r8
 1201 0040 2846     		mov	r0, r5
 1202              	.LVL145:
 681:controller/eeprom/eeprom.c ****   /* If program operation was failed, a Flash error code is returned */
 1203              		.loc 1 681 18 view .LVU398
 1204 0042 FFF7FEFF 		bl	EE_VerifyPageFullWriteVariable
 1205              	.LVL146:
 683:controller/eeprom/eeprom.c ****   {
 1206              		.loc 1 683 3 is_stmt 1 view .LVU399
 683:controller/eeprom/eeprom.c ****   {
 1207              		.loc 1 683 6 is_stmt 0 view .LVU400
 1208 0046 0446     		mov	r4, r0
 1209              	.LVL147:
 683:controller/eeprom/eeprom.c ****   {
 1210              		.loc 1 683 6 view .LVU401
 1211 0048 10B1     		cbz	r0, .L102
 1212 004a F1E7     		b	.L100
 1213              	.LVL148:
 1214              	.L103:
 689:controller/eeprom/eeprom.c ****   {
 1215              		.loc 1 689 46 is_stmt 1 discriminator 2 view .LVU402
 1216 004c 0134     		adds	r4, r4, #1
 1217              	.LVL149:
 689:controller/eeprom/eeprom.c ****   {
 1218              		.loc 1 689 46 is_stmt 0 discriminator 2 view .LVU403
 1219 004e A4B2     		uxth	r4, r4
 1220              	.LVL150:
 1221              	.L102:
 689:controller/eeprom/eeprom.c ****   {
 1222              		.loc 1 689 27 is_stmt 1 discriminator 1 view .LVU404
 1223 0050 1A2C     		cmp	r4, #26
 1224 0052 14D8     		bhi	.L112
 691:controller/eeprom/eeprom.c ****     {
 1225              		.loc 1 691 5 view .LVU405
 691:controller/eeprom/eeprom.c ****     {
 1226              		.loc 1 691 22 is_stmt 0 view .LVU406
 1227 0054 184B     		ldr	r3, .L113+8
 1228 0056 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 691:controller/eeprom/eeprom.c ****     {
 1229              		.loc 1 691 8 view .LVU407
 1230 005a A842     		cmp	r0, r5
 1231 005c F6D0     		beq	.L103
 694:controller/eeprom/eeprom.c ****       /* In case variable corresponding to the virtual address was found */
 1232              		.loc 1 694 7 is_stmt 1 view .LVU408
 694:controller/eeprom/eeprom.c ****       /* In case variable corresponding to the virtual address was found */
 1233              		.loc 1 694 20 is_stmt 0 view .LVU409
 1234 005e 1749     		ldr	r1, .L113+12
 1235 0060 FFF7FEFF 		bl	EE_ReadVariable
 1236              	.LVL151:
 696:controller/eeprom/eeprom.c ****       {
 1237              		.loc 1 696 7 is_stmt 1 view .LVU410
 696:controller/eeprom/eeprom.c ****       {
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 41


 1238              		.loc 1 696 10 is_stmt 0 view .LVU411
 1239 0064 0128     		cmp	r0, #1
 1240 0066 F1D0     		beq	.L103
 699:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 1241              		.loc 1 699 9 is_stmt 1 view .LVU412
 699:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 1242              		.loc 1 699 24 is_stmt 0 view .LVU413
 1243 0068 144B     		ldr	r3, .L113+12
 1244 006a 1988     		ldrh	r1, [r3]
 1245 006c 124B     		ldr	r3, .L113+8
 1246 006e 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 1247              	.LVL152:
 699:controller/eeprom/eeprom.c ****         /* If program operation was failed, a Flash error code is returned */
 1248              		.loc 1 699 24 view .LVU414
 1249 0072 FFF7FEFF 		bl	EE_VerifyPageFullWriteVariable
 1250              	.LVL153:
 701:controller/eeprom/eeprom.c ****         {
 1251              		.loc 1 701 9 is_stmt 1 view .LVU415
 701:controller/eeprom/eeprom.c ****         {
 1252              		.loc 1 701 12 is_stmt 0 view .LVU416
 1253 0076 0028     		cmp	r0, #0
 1254 0078 E8D0     		beq	.L103
 703:controller/eeprom/eeprom.c ****         }
 1255              		.loc 1 703 18 view .LVU417
 1256 007a 0446     		mov	r4, r0
 1257              	.LVL154:
 703:controller/eeprom/eeprom.c ****         }
 1258              		.loc 1 703 18 view .LVU418
 1259 007c D8E7     		b	.L100
 1260              	.LVL155:
 1261              	.L112:
 709:controller/eeprom/eeprom.c ****   pEraseInit.Sector = OldPageId;
 1262              		.loc 1 709 3 is_stmt 1 view .LVU419
 709:controller/eeprom/eeprom.c ****   pEraseInit.Sector = OldPageId;
 1263              		.loc 1 709 24 is_stmt 0 view .LVU420
 1264 007e 0023     		movs	r3, #0
 1265 0080 0093     		str	r3, [sp]
 710:controller/eeprom/eeprom.c ****   pEraseInit.NbSectors = 1;
 1266              		.loc 1 710 3 is_stmt 1 view .LVU421
 710:controller/eeprom/eeprom.c ****   pEraseInit.NbSectors = 1;
 1267              		.loc 1 710 21 is_stmt 0 view .LVU422
 1268 0082 0297     		str	r7, [sp, #8]
 711:controller/eeprom/eeprom.c ****   pEraseInit.VoltageRange = VOLTAGE_RANGE;
 1269              		.loc 1 711 3 is_stmt 1 view .LVU423
 711:controller/eeprom/eeprom.c ****   pEraseInit.VoltageRange = VOLTAGE_RANGE;
 1270              		.loc 1 711 24 is_stmt 0 view .LVU424
 1271 0084 0123     		movs	r3, #1
 1272 0086 0393     		str	r3, [sp, #12]
 712:controller/eeprom/eeprom.c ****   
 1273              		.loc 1 712 3 is_stmt 1 view .LVU425
 712:controller/eeprom/eeprom.c ****   
 1274              		.loc 1 712 27 is_stmt 0 view .LVU426
 1275 0088 0223     		movs	r3, #2
 1276 008a 0493     		str	r3, [sp, #16]
 715:controller/eeprom/eeprom.c ****   /* If erase operation was failed, a Flash error code is returned */
 1277              		.loc 1 715 3 is_stmt 1 view .LVU427
 715:controller/eeprom/eeprom.c ****   /* If erase operation was failed, a Flash error code is returned */
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 42


 1278              		.loc 1 715 17 is_stmt 0 view .LVU428
 1279 008c 05A9     		add	r1, sp, #20
 1280 008e 6846     		mov	r0, sp
 1281 0090 FFF7FEFF 		bl	HAL_FLASHEx_Erase
 1282              	.LVL156:
 717:controller/eeprom/eeprom.c ****   {
 1283              		.loc 1 717 3 is_stmt 1 view .LVU429
 717:controller/eeprom/eeprom.c ****   {
 1284              		.loc 1 717 6 is_stmt 0 view .LVU430
 1285 0094 0446     		mov	r4, r0
 1286              	.LVL157:
 717:controller/eeprom/eeprom.c ****   {
 1287              		.loc 1 717 6 view .LVU431
 1288 0096 0028     		cmp	r0, #0
 1289 0098 CAD1     		bne	.L100
 723:controller/eeprom/eeprom.c ****   /* If program operation was failed, a Flash error code is returned */
 1290              		.loc 1 723 3 is_stmt 1 view .LVU432
 723:controller/eeprom/eeprom.c ****   /* If program operation was failed, a Flash error code is returned */
 1291              		.loc 1 723 17 is_stmt 0 view .LVU433
 1292 009a 0022     		movs	r2, #0
 1293 009c 0023     		movs	r3, #0
 1294 009e 3146     		mov	r1, r6
 1295 00a0 0120     		movs	r0, #1
 1296              	.LVL158:
 723:controller/eeprom/eeprom.c ****   /* If program operation was failed, a Flash error code is returned */
 1297              		.loc 1 723 17 view .LVU434
 1298 00a2 FFF7FEFF 		bl	HAL_FLASH_Program
 1299              	.LVL159:
 725:controller/eeprom/eeprom.c ****   {
 1300              		.loc 1 725 3 is_stmt 1 view .LVU435
 725:controller/eeprom/eeprom.c ****   {
 1301              		.loc 1 725 6 is_stmt 0 view .LVU436
 1302 00a6 0446     		mov	r4, r0
 1303 00a8 C2E7     		b	.L100
 1304              	.LVL160:
 1305              	.L108:
 669:controller/eeprom/eeprom.c ****   }
 1306              		.loc 1 669 12 view .LVU437
 1307 00aa AB24     		movs	r4, #171
 1308 00ac C0E7     		b	.L100
 1309              	.L114:
 1310 00ae 00BF     		.align	2
 1311              	.L113:
 1312 00b0 00C00008 		.word	134266880
 1313 00b4 00800008 		.word	134250496
 1314 00b8 00000000 		.word	VirtAddVarTab
 1315 00bc 00000000 		.word	DataVar
 1316              		.cfi_endproc
 1317              	.LFE227:
 1319              		.section	.text.EE_WriteVariable,"ax",%progbits
 1320              		.align	1
 1321              		.global	EE_WriteVariable
 1322              		.syntax unified
 1323              		.thumb
 1324              		.thumb_func
 1326              	EE_WriteVariable:
 1327              	.LVL161:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 43


 1328              	.LFB223:
 430:controller/eeprom/eeprom.c ****   uint16_t Status = 0;
 1329              		.loc 1 430 1 is_stmt 1 view -0
 1330              		.cfi_startproc
 1331              		@ args = 0, pretend = 0, frame = 0
 1332              		@ frame_needed = 0, uses_anonymous_args = 0
 430:controller/eeprom/eeprom.c ****   uint16_t Status = 0;
 1333              		.loc 1 430 1 is_stmt 0 view .LVU439
 1334 0000 38B5     		push	{r3, r4, r5, lr}
 1335              		.cfi_def_cfa_offset 16
 1336              		.cfi_offset 3, -16
 1337              		.cfi_offset 4, -12
 1338              		.cfi_offset 5, -8
 1339              		.cfi_offset 14, -4
 1340 0002 0446     		mov	r4, r0
 1341 0004 0D46     		mov	r5, r1
 431:controller/eeprom/eeprom.c **** 
 1342              		.loc 1 431 3 is_stmt 1 view .LVU440
 1343              	.LVL162:
 434:controller/eeprom/eeprom.c **** 
 1344              		.loc 1 434 3 view .LVU441
 434:controller/eeprom/eeprom.c **** 
 1345              		.loc 1 434 12 is_stmt 0 view .LVU442
 1346 0006 FFF7FEFF 		bl	EE_VerifyPageFullWriteVariable
 1347              	.LVL163:
 437:controller/eeprom/eeprom.c ****   {
 1348              		.loc 1 437 3 is_stmt 1 view .LVU443
 437:controller/eeprom/eeprom.c ****   {
 1349              		.loc 1 437 6 is_stmt 0 view .LVU444
 1350 000a 8028     		cmp	r0, #128
 1351 000c 00D0     		beq	.L118
 1352              	.LVL164:
 1353              	.L116:
 444:controller/eeprom/eeprom.c **** }
 1354              		.loc 1 444 3 is_stmt 1 view .LVU445
 445:controller/eeprom/eeprom.c **** 
 1355              		.loc 1 445 1 is_stmt 0 view .LVU446
 1356 000e 38BD     		pop	{r3, r4, r5, pc}
 1357              	.LVL165:
 1358              	.L118:
 440:controller/eeprom/eeprom.c ****   }
 1359              		.loc 1 440 5 is_stmt 1 view .LVU447
 440:controller/eeprom/eeprom.c ****   }
 1360              		.loc 1 440 14 is_stmt 0 view .LVU448
 1361 0010 2946     		mov	r1, r5
 1362 0012 2046     		mov	r0, r4
 1363              	.LVL166:
 440:controller/eeprom/eeprom.c ****   }
 1364              		.loc 1 440 14 view .LVU449
 1365 0014 FFF7FEFF 		bl	EE_PageTransfer
 1366              	.LVL167:
 1367 0018 F9E7     		b	.L116
 1368              		.cfi_endproc
 1369              	.LFE223:
 1371              		.global	DataVar
 1372              		.section	.bss.DataVar,"aw",%nobits
 1373              		.align	1
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 44


 1376              	DataVar:
 1377 0000 0000     		.space	2
 1378              		.text
 1379              	.Letext0:
 1380              		.file 2 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 1381              		.file 3 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 1382              		.file 4 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1383              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_flash_ex.h"
 1384              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_flash.h"
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s 			page 45


DEFINED SYMBOLS
                            *ABS*:00000000 eeprom.c
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:21     .text.EE_VerifyPageFullyErased:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:26     .text.EE_VerifyPageFullyErased:00000000 EE_VerifyPageFullyErased
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:82     .text.EE_FindValidPage:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:87     .text.EE_FindValidPage:00000000 EE_FindValidPage
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:188    .text.EE_FindValidPage:00000048 $d
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:194    .text.EE_VerifyPageFullWriteVariable:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:199    .text.EE_VerifyPageFullWriteVariable:00000000 EE_VerifyPageFullWriteVariable
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:303    .text.EE_VerifyPageFullWriteVariable:00000050 $d
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:308    .text.EE_Format:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:313    .text.EE_Format:00000000 EE_Format
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:416    .text.EE_Format:00000058 $d
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:422    .text.EE_ReadVariable:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:428    .text.EE_ReadVariable:00000000 EE_ReadVariable
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:520    .text.EE_ReadVariable:00000040 $d
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:526    .text.EE_Init:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:532    .text.EE_Init:00000000 EE_Init
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:1101   .text.EE_Init:00000244 $d
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:1376   .bss.DataVar:00000000 DataVar
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:1109   .text.EE_PageTransfer:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:1114   .text.EE_PageTransfer:00000000 EE_PageTransfer
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:1312   .text.EE_PageTransfer:000000b0 $d
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:1320   .text.EE_WriteVariable:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:1326   .text.EE_WriteVariable:00000000 EE_WriteVariable
C:\Users\alireza\AppData\Local\Temp\ccfaKtrL.s:1373   .bss.DataVar:00000000 $d

UNDEFINED SYMBOLS
HAL_FLASH_Program
HAL_FLASHEx_Erase
VirtAddVarTab
