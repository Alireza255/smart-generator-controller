ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccEAXQnI.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"fan_control.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "controller/actuators/fan_control.c"
  20              		.section	.text.fan_control_update,"ax",%progbits
  21              		.align	1
  22              		.global	fan_control_update
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	fan_control_update:
  28              	.LFB233:
   1:controller/actuators/fan_control.c **** #include "fan_control.h"
   2:controller/actuators/fan_control.c **** 
   3:controller/actuators/fan_control.c **** static bool thermostat(temperature_t temp, temperature_t on_temp, temperature_t off_temp)
   4:controller/actuators/fan_control.c **** {
   5:controller/actuators/fan_control.c ****     if (temp > on_temp)
   6:controller/actuators/fan_control.c ****     {
   7:controller/actuators/fan_control.c ****         return true;
   8:controller/actuators/fan_control.c ****     }
   9:controller/actuators/fan_control.c ****     else if (temp < off_temp)
  10:controller/actuators/fan_control.c ****     {
  11:controller/actuators/fan_control.c ****         return false;
  12:controller/actuators/fan_control.c ****     }
  13:controller/actuators/fan_control.c **** }
  14:controller/actuators/fan_control.c **** void fan_control_update()
  15:controller/actuators/fan_control.c **** {
  29              		.loc 1 15 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 38B5     		push	{r3, r4, r5, lr}
  34              		.cfi_def_cfa_offset 16
  35              		.cfi_offset 3, -16
  36              		.cfi_offset 4, -12
  37              		.cfi_offset 5, -8
  38              		.cfi_offset 14, -4
  16:controller/actuators/fan_control.c ****     temperature_t current_temp = sensor_clt_get();
  39              		.loc 1 16 5 view .LVU1
  40              		.loc 1 16 34 is_stmt 0 view .LVU2
  41 0002 FFF7FEFF 		bl	sensor_clt_get
  42              	.LVL0:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccEAXQnI.s 			page 2


  17:controller/actuators/fan_control.c **** 
  18:controller/actuators/fan_control.c ****     bool fan1_command = false;
  43              		.loc 1 18 5 is_stmt 1 view .LVU3
  19:controller/actuators/fan_control.c ****     bool fan2_command = false;
  44              		.loc 1 19 5 view .LVU4
  20:controller/actuators/fan_control.c ****     
  21:controller/actuators/fan_control.c ****     if (config.fan1_enabled)
  45              		.loc 1 21 5 view .LVU5
  46              		.loc 1 21 15 is_stmt 0 view .LVU6
  47 0006 234B     		ldr	r3, .L19
  48 0008 93F8B132 		ldrb	r3, [r3, #689]	@ zero_extendqisi2
  49              		.loc 1 21 8 view .LVU7
  50 000c 4BB1     		cbz	r3, .L10
  22:controller/actuators/fan_control.c ****     {
  23:controller/actuators/fan_control.c ****         if (current_temp > config.fan1_on_temp)
  51              		.loc 1 23 9 is_stmt 1 view .LVU8
  52              		.loc 1 23 34 is_stmt 0 view .LVU9
  53 000e 214B     		ldr	r3, .L19
  54 0010 D3ED9F7A 		vldr.32	s15, [r3, #636]
  55              		.loc 1 23 12 view .LVU10
  56 0014 F4EEC07A 		vcmpe.f32	s15, s0
  57 0018 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  58 001c 10D5     		bpl	.L16
  24:controller/actuators/fan_control.c ****         {
  25:controller/actuators/fan_control.c ****             fan1_command = true;
  59              		.loc 1 25 26 view .LVU11
  60 001e 0125     		movs	r5, #1
  61 0020 00E0     		b	.L2
  62              	.L10:
  26:controller/actuators/fan_control.c ****         }
  27:controller/actuators/fan_control.c ****         else if (current_temp < config.fan1_off_temp)
  28:controller/actuators/fan_control.c ****         {
  29:controller/actuators/fan_control.c ****             fan1_command = false;
  30:controller/actuators/fan_control.c ****         }
  31:controller/actuators/fan_control.c ****     }
  32:controller/actuators/fan_control.c ****     else
  33:controller/actuators/fan_control.c ****     {
  34:controller/actuators/fan_control.c ****         fan1_command = false;
  63              		.loc 1 34 22 view .LVU12
  64 0022 0025     		movs	r5, #0
  65              	.L2:
  66              	.LVL1:
  35:controller/actuators/fan_control.c ****     }
  36:controller/actuators/fan_control.c ****     
  37:controller/actuators/fan_control.c ****     if (config.fan2_enabled)
  67              		.loc 1 37 5 is_stmt 1 view .LVU13
  68              		.loc 1 37 15 is_stmt 0 view .LVU14
  69 0024 1B4B     		ldr	r3, .L19
  70 0026 93F8B232 		ldrb	r3, [r3, #690]	@ zero_extendqisi2
  71              		.loc 1 37 8 view .LVU15
  72 002a 5BB1     		cbz	r3, .L12
  38:controller/actuators/fan_control.c ****     {
  39:controller/actuators/fan_control.c ****         if (current_temp > config.fan2_on_temp)
  73              		.loc 1 39 9 is_stmt 1 view .LVU16
  74              		.loc 1 39 34 is_stmt 0 view .LVU17
  75 002c 194B     		ldr	r3, .L19
  76 002e D3EDA17A 		vldr.32	s15, [r3, #644]
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccEAXQnI.s 			page 3


  77              		.loc 1 39 12 view .LVU18
  78 0032 F4EEC07A 		vcmpe.f32	s15, s0
  79 0036 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
  80 003a 1CD5     		bpl	.L17
  40:controller/actuators/fan_control.c ****         {
  41:controller/actuators/fan_control.c ****             fan2_command = true;
  81              		.loc 1 41 26 view .LVU19
  82 003c 0124     		movs	r4, #1
  83 003e 02E0     		b	.L4
  84              	.LVL2:
  85              	.L16:
  18:controller/actuators/fan_control.c ****     bool fan2_command = false;
  86              		.loc 1 18 10 view .LVU20
  87 0040 0025     		movs	r5, #0
  88 0042 EFE7     		b	.L2
  89              	.LVL3:
  90              	.L12:
  42:controller/actuators/fan_control.c ****         }
  43:controller/actuators/fan_control.c ****         else if (current_temp < config.fan2_off_temp)
  44:controller/actuators/fan_control.c ****         {
  45:controller/actuators/fan_control.c ****             fan2_command = false;
  46:controller/actuators/fan_control.c ****         }
  47:controller/actuators/fan_control.c ****     }
  48:controller/actuators/fan_control.c ****     else
  49:controller/actuators/fan_control.c ****     {
  50:controller/actuators/fan_control.c ****        fan2_command = false;
  91              		.loc 1 50 21 view .LVU21
  92 0044 0024     		movs	r4, #0
  93              	.L4:
  94              	.LVL4:
  51:controller/actuators/fan_control.c ****     }
  52:controller/actuators/fan_control.c ****     
  53:controller/actuators/fan_control.c ****     HAL_GPIO_WritePin(FAN_1_GPIO_Port, FAN_1_Pin, fan1_command);
  95              		.loc 1 53 5 is_stmt 1 view .LVU22
  96 0046 2A46     		mov	r2, r5
  97 0048 0421     		movs	r1, #4
  98 004a 1348     		ldr	r0, .L19+4
  99 004c FFF7FEFF 		bl	HAL_GPIO_WritePin
 100              	.LVL5:
  54:controller/actuators/fan_control.c ****     change_bit(&runtime.status, STATUS_FAN1_ON, fan1_command);
 101              		.loc 1 54 5 view .LVU23
 102              	.LBB6:
 103              	.LBI6:
 104              		.file 2 "controller/utils/utils.h"
   1:controller/utils/utils.h **** /**
   2:controller/utils/utils.h ****  * @file utils.h
   3:controller/utils/utils.h ****  * @brief Header file containing utility functions and definitions for the smart generator controll
   4:controller/utils/utils.h ****  *
   5:controller/utils/utils.h ****  * This file provides declarations for utility functions and macros that are
   6:controller/utils/utils.h ****  * used throughout the firmware to support various functionalities.
   7:controller/utils/utils.h ****  *
   8:controller/utils/utils.h ****  * @note Ensure that this file is included wherever utility functions are required.
   9:controller/utils/utils.h ****  */
  10:controller/utils/utils.h **** #ifndef UTILS_H
  11:controller/utils/utils.h **** #define UTILS_H
  12:controller/utils/utils.h **** 
  13:controller/utils/utils.h **** #include "types.h"
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccEAXQnI.s 			page 4


  14:controller/utils/utils.h **** #include "math.h"
  15:controller/utils/utils.h **** #define IS_IN_RANGE(value, min, max) ((value) >= (min) && (value) <= (max))
  16:controller/utils/utils.h **** #define ABS(value) ((value) < 0 ? -(value) : (value))
  17:controller/utils/utils.h **** #define CLAMP(value, min, max) ((value) < (min) ? (min) : ((value) > (max) ? (max) : (value)))
  18:controller/utils/utils.h **** 
  19:controller/utils/utils.h **** static inline void change_bit(uint32_t *var, uint8_t bit, bool state)
 105              		.loc 2 19 20 view .LVU24
 106              	.LBB7:
  20:controller/utils/utils.h **** {
  21:controller/utils/utils.h ****     if (bit > 31)
 107              		.loc 2 21 5 view .LVU25
  22:controller/utils/utils.h ****     {
  23:controller/utils/utils.h ****         return;
  24:controller/utils/utils.h ****     }
  25:controller/utils/utils.h ****     if (state)
 108              		.loc 2 25 5 view .LVU26
 109              		.loc 2 25 8 is_stmt 0 view .LVU27
 110 0050 9DB1     		cbz	r5, .L6
  26:controller/utils/utils.h ****     {
  27:controller/utils/utils.h ****         *var |= (1u << bit);
 111              		.loc 2 27 9 is_stmt 1 view .LVU28
 112 0052 124A     		ldr	r2, .L19+8
 113 0054 1368     		ldr	r3, [r2]
 114              		.loc 2 27 14 is_stmt 0 view .LVU29
 115 0056 43F04003 		orr	r3, r3, #64
 116 005a 1360     		str	r3, [r2]
 117              	.L7:
 118              	.LVL6:
 119              		.loc 2 27 14 view .LVU30
 120              	.LBE7:
 121              	.LBE6:
  55:controller/actuators/fan_control.c ****     
  56:controller/actuators/fan_control.c ****     HAL_GPIO_WritePin(FAN_2_GPIO_Port, FAN_2_Pin, fan2_command);
 122              		.loc 1 56 5 is_stmt 1 view .LVU31
 123 005c 2246     		mov	r2, r4
 124 005e 4FF48061 		mov	r1, #1024
 125 0062 0D48     		ldr	r0, .L19+4
 126 0064 FFF7FEFF 		bl	HAL_GPIO_WritePin
 127              	.LVL7:
  57:controller/actuators/fan_control.c ****     change_bit(&runtime.status, STATUS_FAN2_ON, fan2_command);
 128              		.loc 1 57 5 view .LVU32
 129              	.LBB9:
 130              	.LBI9:
  19:controller/utils/utils.h **** {
 131              		.loc 2 19 20 view .LVU33
 132              	.LBB10:
  21:controller/utils/utils.h ****     {
 133              		.loc 2 21 5 view .LVU34
  25:controller/utils/utils.h ****     {
 134              		.loc 2 25 5 view .LVU35
  25:controller/utils/utils.h ****     {
 135              		.loc 2 25 8 is_stmt 0 view .LVU36
 136 0068 6CB1     		cbz	r4, .L8
 137              		.loc 2 27 9 is_stmt 1 view .LVU37
 138 006a 0C4A     		ldr	r2, .L19+8
 139 006c 1368     		ldr	r3, [r2]
 140              		.loc 2 27 14 is_stmt 0 view .LVU38
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccEAXQnI.s 			page 5


 141 006e 43F08003 		orr	r3, r3, #128
 142 0072 1360     		str	r3, [r2]
 143              	.LVL8:
 144              	.L1:
 145              		.loc 2 27 14 view .LVU39
 146              	.LBE10:
 147              	.LBE9:
  58:controller/actuators/fan_control.c **** 
  59:controller/actuators/fan_control.c **** }...
 148              		.loc 1 59 1 view .LVU40
 149 0074 38BD     		pop	{r3, r4, r5, pc}
 150              	.LVL9:
 151              	.L17:
  19:controller/actuators/fan_control.c ****     bool fan2_command = false;
 152              		.loc 1 19 10 view .LVU41
 153 0076 0024     		movs	r4, #0
 154 0078 E5E7     		b	.L4
 155              	.LVL10:
 156              	.L6:
 157              	.LBB12:
 158              	.LBB8:
  28:controller/utils/utils.h ****     }
  29:controller/utils/utils.h ****     else
  30:controller/utils/utils.h ****     {
  31:controller/utils/utils.h ****         *var &= ~(1u << bit);
 159              		.loc 2 31 9 is_stmt 1 view .LVU42
 160 007a 084A     		ldr	r2, .L19+8
 161 007c 1368     		ldr	r3, [r2]
 162              		.loc 2 31 14 is_stmt 0 view .LVU43
 163 007e 23F04003 		bic	r3, r3, #64
 164 0082 1360     		str	r3, [r2]
 165 0084 EAE7     		b	.L7
 166              	.LVL11:
 167              	.L8:
 168              		.loc 2 31 14 view .LVU44
 169              	.LBE8:
 170              	.LBE12:
 171              	.LBB13:
 172              	.LBB11:
 173              		.loc 2 31 9 is_stmt 1 view .LVU45
 174 0086 054A     		ldr	r2, .L19+8
 175 0088 1368     		ldr	r3, [r2]
 176              		.loc 2 31 14 is_stmt 0 view .LVU46
 177 008a 23F08003 		bic	r3, r3, #128
 178 008e 1360     		str	r3, [r2]
 179              	.LVL12:
 180              		.loc 2 31 14 view .LVU47
 181              	.LBE11:
 182              	.LBE13:
 183              		.loc 1 59 1 view .LVU48
 184 0090 F0E7     		b	.L1
 185              	.L20:
 186 0092 00BF     		.align	2
 187              	.L19:
 188 0094 00100000 		.word	config+4096
 189 0098 00040240 		.word	1073873920
 190 009c 00000000 		.word	runtime
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccEAXQnI.s 			page 6


 191              		.cfi_endproc
 192              	.LFE233:
 194              		.text
 195              	.Letext0:
 196              		.file 3 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 197              		.file 4 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 198              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xc.h"
 199              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 200              		.file 7 "controller/types.h"
 201              		.file 8 "controller/tables.h"
 202              		.file 9 "controller/config_and_runtime.h"
 203              		.file 10 "controller/IO/sensors.h"
ARM GAS  C:\Users\alireza\AppData\Local\Temp\ccEAXQnI.s 			page 7


DEFINED SYMBOLS
                            *ABS*:00000000 fan_control.c
C:\Users\alireza\AppData\Local\Temp\ccEAXQnI.s:21     .text.fan_control_update:00000000 $t
C:\Users\alireza\AppData\Local\Temp\ccEAXQnI.s:27     .text.fan_control_update:00000000 fan_control_update
C:\Users\alireza\AppData\Local\Temp\ccEAXQnI.s:188    .text.fan_control_update:00000094 $d

UNDEFINED SYMBOLS
sensor_clt_get
HAL_GPIO_WritePin
config
runtime
