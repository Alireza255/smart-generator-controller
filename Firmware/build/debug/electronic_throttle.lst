ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"electronic_throttle.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "controller/actuators/electronic_throttle.c"
  20              		.section	.rodata.electronic_throttle_init.str1.4,"aMS",%progbits,1
  21              		.align	2
  22              	.LC0:
  23 0000 456C6563 		.ascii	"Electronic throttle init failed\000"
  23      74726F6E 
  23      69632074 
  23      68726F74 
  23      746C6520 
  24              		.section	.text.electronic_throttle_init,"ax",%progbits
  25              		.align	1
  26              		.global	electronic_throttle_init
  27              		.syntax unified
  28              		.thumb
  29              		.thumb_func
  31              	electronic_throttle_init:
  32              	.LVL0:
  33              	.LFB232:
   1:controller/actuators/electronic_throttle.c **** #include "electronic_throttle.h"
   2:controller/actuators/electronic_throttle.c **** 
   3:controller/actuators/electronic_throttle.c **** void electronic_throttle_tone_fail(electronic_throttle_t *etb);
   4:controller/actuators/electronic_throttle.c **** void electronic_throttle_tone_success(electronic_throttle_t *etb);
   5:controller/actuators/electronic_throttle.c **** 
   6:controller/actuators/electronic_throttle.c **** void electronic_throttle_init(electronic_throttle_t *etb, pid_t *pid, sensor_tps_t *sensor, dc_moto
   7:controller/actuators/electronic_throttle.c **** {
  34              		.loc 1 7 1 view -0
  35              		.cfi_startproc
  36              		@ args = 0, pretend = 0, frame = 0
  37              		@ frame_needed = 0, uses_anonymous_args = 0
  38              		.loc 1 7 1 is_stmt 0 view .LVU1
  39 0000 08B5     		push	{r3, lr}
  40              		.cfi_def_cfa_offset 8
  41              		.cfi_offset 3, -8
  42              		.cfi_offset 14, -4
   8:controller/actuators/electronic_throttle.c ****     if (etb == NULL || sensor == NULL || motor == NULL)
  43              		.loc 1 8 5 is_stmt 1 view .LVU2
  44              		.loc 1 8 8 is_stmt 0 view .LVU3
  45 0002 A0B1     		cbz	r0, .L2
  46              		.loc 1 8 21 discriminator 1 view .LVU4
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 2


  47 0004 9AB1     		cbz	r2, .L2
  48              		.loc 1 8 39 discriminator 2 view .LVU5
  49 0006 93B1     		cbz	r3, .L2
   9:controller/actuators/electronic_throttle.c ****     {
  10:controller/actuators/electronic_throttle.c ****         log_error("Electronic throttle init failed");
  11:controller/actuators/electronic_throttle.c ****         return;
  12:controller/actuators/electronic_throttle.c ****     }
  13:controller/actuators/electronic_throttle.c ****     
  14:controller/actuators/electronic_throttle.c ****     etb->pid = pid;
  50              		.loc 1 14 5 is_stmt 1 view .LVU6
  51              		.loc 1 14 14 is_stmt 0 view .LVU7
  52 0008 8160     		str	r1, [r0, #8]
  15:controller/actuators/electronic_throttle.c ****     etb->sensor = sensor;
  53              		.loc 1 15 5 is_stmt 1 view .LVU8
  54              		.loc 1 15 17 is_stmt 0 view .LVU9
  55 000a C260     		str	r2, [r0, #12]
  16:controller/actuators/electronic_throttle.c ****     etb->motor = motor;
  56              		.loc 1 16 5 is_stmt 1 view .LVU10
  57              		.loc 1 16 16 is_stmt 0 view .LVU11
  58 000c 4360     		str	r3, [r0, #4]
  17:controller/actuators/electronic_throttle.c ****     etb->target_position = ELECTRONIC_THROTTLE_FAIL_SAFE_POSITION;
  59              		.loc 1 17 5 is_stmt 1 view .LVU12
  60              		.loc 1 17 26 is_stmt 0 view .LVU13
  61 000e 0023     		movs	r3, #0
  62              	.LVL1:
  63              		.loc 1 17 26 view .LVU14
  64 0010 0361     		str	r3, [r0, #16]	@ float
  18:controller/actuators/electronic_throttle.c **** 
  19:controller/actuators/electronic_throttle.c ****     etb->pid->limit_output_max = (float)255;
  65              		.loc 1 19 5 is_stmt 1 view .LVU15
  66              		.loc 1 19 32 is_stmt 0 view .LVU16
  67 0012 094B     		ldr	r3, .L6
  68 0014 4B61     		str	r3, [r1, #20]	@ float
  69              	.LVL2:
  20:controller/actuators/electronic_throttle.c ****     etb->pid->limit_output_min = (float)-255;
  70              		.loc 1 20 5 is_stmt 1 view .LVU17
  71              		.loc 1 20 8 is_stmt 0 view .LVU18
  72 0016 8368     		ldr	r3, [r0, #8]
  73              		.loc 1 20 32 view .LVU19
  74 0018 084A     		ldr	r2, .L6+4
  75              	.LVL3:
  76              		.loc 1 20 32 view .LVU20
  77 001a 1A61     		str	r2, [r3, #16]	@ float
  21:controller/actuators/electronic_throttle.c ****     etb->pid->limit_integrator_max = (float)250;
  78              		.loc 1 21 5 is_stmt 1 view .LVU21
  79              		.loc 1 21 8 is_stmt 0 view .LVU22
  80 001c 8368     		ldr	r3, [r0, #8]
  81              		.loc 1 21 36 view .LVU23
  82 001e 084A     		ldr	r2, .L6+8
  83 0020 DA61     		str	r2, [r3, #28]	@ float
  22:controller/actuators/electronic_throttle.c ****     etb->pid->limit_integrator_min = (float)-250;
  84              		.loc 1 22 5 is_stmt 1 view .LVU24
  85              		.loc 1 22 8 is_stmt 0 view .LVU25
  86 0022 8368     		ldr	r3, [r0, #8]
  87              		.loc 1 22 36 view .LVU26
  88 0024 074A     		ldr	r2, .L6+12
  89 0026 9A61     		str	r2, [r3, #24]	@ float
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 3


  23:controller/actuators/electronic_throttle.c ****     
  24:controller/actuators/electronic_throttle.c ****     //electronic_throttle_auto_tune(etb);
  25:controller/actuators/electronic_throttle.c **** 
  26:controller/actuators/electronic_throttle.c ****     //electronic_throttle_update(etb);
  27:controller/actuators/electronic_throttle.c **** 
  28:controller/actuators/electronic_throttle.c ****     etb->state = ETB_STATE_NORMAL;
  90              		.loc 1 28 5 is_stmt 1 view .LVU27
  91              		.loc 1 28 16 is_stmt 0 view .LVU28
  92 0028 0123     		movs	r3, #1
  93 002a 0370     		strb	r3, [r0]
  94              	.LVL4:
  95              	.L1:
  29:controller/actuators/electronic_throttle.c **** 
  30:controller/actuators/electronic_throttle.c **** }
  96              		.loc 1 30 1 view .LVU29
  97 002c 08BD     		pop	{r3, pc}
  98              	.LVL5:
  99              	.L2:
  10:controller/actuators/electronic_throttle.c ****         return;
 100              		.loc 1 10 9 is_stmt 1 view .LVU30
 101 002e 0648     		ldr	r0, .L6+16
 102              	.LVL6:
  10:controller/actuators/electronic_throttle.c ****         return;
 103              		.loc 1 10 9 is_stmt 0 view .LVU31
 104 0030 FFF7FEFF 		bl	log_error
 105              	.LVL7:
  11:controller/actuators/electronic_throttle.c ****     }
 106              		.loc 1 11 9 is_stmt 1 view .LVU32
 107 0034 FAE7     		b	.L1
 108              	.L7:
 109 0036 00BF     		.align	2
 110              	.L6:
 111 0038 00007F43 		.word	1132396544
 112 003c 00007FC3 		.word	-1015087104
 113 0040 00007A43 		.word	1132068864
 114 0044 00007AC3 		.word	-1015414784
 115 0048 00000000 		.word	.LC0
 116              		.cfi_endproc
 117              	.LFE232:
 119              		.section	.text.electronic_throttle_set,"ax",%progbits
 120              		.align	1
 121              		.global	electronic_throttle_set
 122              		.syntax unified
 123              		.thumb
 124              		.thumb_func
 126              	electronic_throttle_set:
 127              	.LVL8:
 128              	.LFB233:
  31:controller/actuators/electronic_throttle.c **** 
  32:controller/actuators/electronic_throttle.c **** void electronic_throttle_set(electronic_throttle_t *etb, percent_t position)
  33:controller/actuators/electronic_throttle.c **** {
 129              		.loc 1 33 1 view -0
 130              		.cfi_startproc
 131              		@ args = 0, pretend = 0, frame = 0
 132              		@ frame_needed = 0, uses_anonymous_args = 0
 133              		@ link register save eliminated.
  34:controller/actuators/electronic_throttle.c ****     if (!IS_IN_RANGE(position, (percent_t)0, (percent_t)100))
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 4


 134              		.loc 1 34 5 view .LVU34
 135              		.loc 1 34 8 is_stmt 0 view .LVU35
 136 0000 B5EEC00A 		vcmpe.f32	s0, #0
 137 0004 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 138 0008 06DB     		blt	.L9
 139              		.loc 1 34 9 discriminator 1 view .LVU36
 140 000a DFED067A 		vldr.32	s15, .L13
 141 000e B4EEE70A 		vcmpe.f32	s0, s15
 142 0012 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 143 0016 01D9     		bls	.L11
 144              	.L9:
  35:controller/actuators/electronic_throttle.c ****     {
  36:controller/actuators/electronic_throttle.c ****         etb->target_position = ELECTRONIC_THROTTLE_FAIL_SAFE_POSITION;
 145              		.loc 1 36 9 is_stmt 1 view .LVU37
 146              		.loc 1 36 30 is_stmt 0 view .LVU38
 147 0018 0023     		movs	r3, #0
 148 001a 0361     		str	r3, [r0, #16]	@ float
 149              	.L11:
  37:controller/actuators/electronic_throttle.c ****     }
  38:controller/actuators/electronic_throttle.c ****     etb->target_position = position;
 150              		.loc 1 38 5 is_stmt 1 view .LVU39
 151              		.loc 1 38 26 is_stmt 0 view .LVU40
 152 001c 80ED040A 		vstr.32	s0, [r0, #16]
  39:controller/actuators/electronic_throttle.c **** }
 153              		.loc 1 39 1 view .LVU41
 154 0020 7047     		bx	lr
 155              	.L14:
 156 0022 00BF     		.align	2
 157              	.L13:
 158 0024 0000C842 		.word	1120403456
 159              		.cfi_endproc
 160              	.LFE233:
 162              		.section	.rodata.electronic_throttle_update.str1.4,"aMS",%progbits,1
 163              		.align	2
 164              	.LC1:
 165 0000 456C6563 		.ascii	"Electronic throttle not initialized\000"
 165      74726F6E 
 165      69632074 
 165      68726F74 
 165      746C6520 
 166              		.section	.text.electronic_throttle_update,"ax",%progbits
 167              		.align	1
 168              		.global	electronic_throttle_update
 169              		.syntax unified
 170              		.thumb
 171              		.thumb_func
 173              	electronic_throttle_update:
 174              	.LVL9:
 175              	.LFB234:
  40:controller/actuators/electronic_throttle.c **** 
  41:controller/actuators/electronic_throttle.c **** void electronic_throttle_update(void *arg)
  42:controller/actuators/electronic_throttle.c **** {
 176              		.loc 1 42 1 is_stmt 1 view -0
 177              		.cfi_startproc
 178              		@ args = 0, pretend = 0, frame = 8
 179              		@ frame_needed = 0, uses_anonymous_args = 0
 180              		.loc 1 42 1 is_stmt 0 view .LVU43
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 5


 181 0000 30B5     		push	{r4, r5, lr}
 182              		.cfi_def_cfa_offset 12
 183              		.cfi_offset 4, -12
 184              		.cfi_offset 5, -8
 185              		.cfi_offset 14, -4
 186 0002 2DED028B 		vpush.64	{d8}
 187              		.cfi_def_cfa_offset 20
 188              		.cfi_offset 80, -20
 189              		.cfi_offset 81, -16
 190 0006 83B0     		sub	sp, sp, #12
 191              		.cfi_def_cfa_offset 32
  43:controller/actuators/electronic_throttle.c ****     
  44:controller/actuators/electronic_throttle.c ****     electronic_throttle_t *etb = (electronic_throttle_t *)arg;
 192              		.loc 1 44 5 is_stmt 1 view .LVU44
 193              	.LVL10:
  45:controller/actuators/electronic_throttle.c ****     if (etb == NULL || etb->pid == NULL || etb->sensor == NULL || etb->motor == NULL)
 194              		.loc 1 45 5 view .LVU45
 195              		.loc 1 45 8 is_stmt 0 view .LVU46
 196 0008 0028     		cmp	r0, #0
 197 000a 4AD0     		beq	.L16
 198 000c 0446     		mov	r4, r0
 199              		.loc 1 45 27 discriminator 1 view .LVU47
 200 000e 8368     		ldr	r3, [r0, #8]
 201              		.loc 1 45 21 discriminator 1 view .LVU48
 202 0010 002B     		cmp	r3, #0
 203 0012 46D0     		beq	.L16
 204              		.loc 1 45 47 discriminator 2 view .LVU49
 205 0014 C068     		ldr	r0, [r0, #12]
 206              	.LVL11:
 207              		.loc 1 45 41 discriminator 2 view .LVU50
 208 0016 0028     		cmp	r0, #0
 209 0018 43D0     		beq	.L16
 210              		.loc 1 45 70 discriminator 3 view .LVU51
 211 001a 6368     		ldr	r3, [r4, #4]
 212              		.loc 1 45 64 discriminator 3 view .LVU52
 213 001c 002B     		cmp	r3, #0
 214 001e 40D0     		beq	.L16
  46:controller/actuators/electronic_throttle.c ****     {
  47:controller/actuators/electronic_throttle.c ****         log_error("Electronic throttle not initialized");
  48:controller/actuators/electronic_throttle.c ****         return;
  49:controller/actuators/electronic_throttle.c ****     }
  50:controller/actuators/electronic_throttle.c ****     percent_t position = sensor_tps_get(etb->sensor);
 215              		.loc 1 50 5 is_stmt 1 view .LVU53
 216              		.loc 1 50 26 is_stmt 0 view .LVU54
 217 0020 FFF7FEFF 		bl	sensor_tps_get
 218              	.LVL12:
 219 0024 B0EE408A 		vmov.f32	s16, s0
 220              	.LVL13:
  51:controller/actuators/electronic_throttle.c ****     etb->current_position = position;
 221              		.loc 1 51 5 is_stmt 1 view .LVU55
 222              		.loc 1 51 27 is_stmt 0 view .LVU56
 223 0028 84ED050A 		vstr.32	s0, [r4, #20]
  52:controller/actuators/electronic_throttle.c ****     pid_set_setpoint(etb->pid, etb->target_position);
 224              		.loc 1 52 5 is_stmt 1 view .LVU57
 225 002c 94ED040A 		vldr.32	s0, [r4, #16]
 226              	.LVL14:
 227              		.loc 1 52 5 is_stmt 0 view .LVU58
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 6


 228 0030 A068     		ldr	r0, [r4, #8]
 229 0032 FFF7FEFF 		bl	pid_set_setpoint
 230              	.LVL15:
  53:controller/actuators/electronic_throttle.c ****     percent_t motor_effort = pid_compute(etb->pid, get_time_us(), position);
 231              		.loc 1 53 5 is_stmt 1 view .LVU59
 232              		.loc 1 53 30 is_stmt 0 view .LVU60
 233 0036 A568     		ldr	r5, [r4, #8]
 234 0038 FFF7FEFF 		bl	get_time_us
 235              	.LVL16:
 236 003c 0146     		mov	r1, r0
 237              		.loc 1 53 30 discriminator 1 view .LVU61
 238 003e B0EE480A 		vmov.f32	s0, s16
 239 0042 2846     		mov	r0, r5
 240 0044 FFF7FEFF 		bl	pid_compute
 241              	.LVL17:
  54:controller/actuators/electronic_throttle.c ****     dc_motor_direction_t dir = motor_effort > 0 ? MOTOR_DIRECTION_FORWARD : MOTOR_DIRECTION_REVERSE
 242              		.loc 1 54 5 is_stmt 1 view .LVU62
 243              		.loc 1 54 45 is_stmt 0 view .LVU63
 244 0048 B5EEC00A 		vcmpe.f32	s0, #0
 245 004c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 246              		.loc 1 54 75 view .LVU64
 247 0050 D4BF     		ite	le
 248 0052 0121     		movle	r1, #1
 249 0054 0021     		movgt	r1, #0
 250              	.LVL18:
  55:controller/actuators/electronic_throttle.c ****     /* Limiting the end of travel duty cycle for protection */
  56:controller/actuators/electronic_throttle.c ****     if (etb->is_duty_cycle_limiting_enabled)
 251              		.loc 1 56 5 is_stmt 1 view .LVU65
 252              		.loc 1 56 12 is_stmt 0 view .LVU66
 253 0056 94F82030 		ldrb	r3, [r4, #32]	@ zero_extendqisi2
 254              		.loc 1 56 8 view .LVU67
 255 005a 002B     		cmp	r3, #0
 256 005c 51D0     		beq	.L19
  57:controller/actuators/electronic_throttle.c ****     {
  58:controller/actuators/electronic_throttle.c ****         if (ABS(position - 100.0f) < ELECTRONIC_THROTTLE_NEAR_END_OF_TRAVEL_THRESHOLD)
 257              		.loc 1 58 9 is_stmt 1 view .LVU68
 258              		.loc 1 58 13 is_stmt 0 view .LVU69
 259 005e DFED3C7A 		vldr.32	s15, .L47
 260 0062 78EE677A 		vsub.f32	s15, s16, s15
 261              		.loc 1 58 36 view .LVU70
 262 0066 F5EEC07A 		vcmpe.f32	s15, #0
 263 006a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 264 006e 1FD4     		bmi	.L43
 265              		.loc 1 58 36 discriminator 2 view .LVU71
 266 0070 B6EE007A 		vmov.f32	s14, #5.0e-1
 267 0074 F4EEC77A 		vcmpe.f32	s15, s14
 268 0078 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 269 007c 4CBF     		ite	mi
 270 007e 0123     		movmi	r3, #1
 271 0080 0023     		movpl	r3, #0
 272              	.L22:
 273              		.loc 1 58 12 discriminator 4 view .LVU72
 274 0082 0BB3     		cbz	r3, .L23
  59:controller/actuators/electronic_throttle.c ****         {
  60:controller/actuators/electronic_throttle.c ****             motor_effort = CLAMP(motor_effort, 0, etb->duty_cycle_limiting_upper);
 275              		.loc 1 60 13 is_stmt 1 view .LVU73
 276              		.loc 1 60 28 is_stmt 0 view .LVU74
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 7


 277 0084 B5EEC00A 		vcmpe.f32	s0, #0
 278 0088 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 279 008c 1AD4     		bmi	.L32
 280              		.loc 1 60 28 discriminator 2 view .LVU75
 281 008e D4ED077A 		vldr.32	s15, [r4, #28]
 282 0092 F4EEC07A 		vcmpe.f32	s15, s0
 283 0096 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 284 009a 15D5     		bpl	.L23
 285              		.loc 1 60 28 discriminator 4 view .LVU76
 286 009c B0EE670A 		vmov.f32	s0, s15
 287              	.LVL19:
 288              		.loc 1 60 28 discriminator 4 view .LVU77
 289 00a0 12E0     		b	.L23
 290              	.LVL20:
 291              	.L16:
  47:controller/actuators/electronic_throttle.c ****         return;
 292              		.loc 1 47 9 is_stmt 1 view .LVU78
 293 00a2 2C48     		ldr	r0, .L47+4
 294 00a4 FFF7FEFF 		bl	log_error
 295              	.LVL21:
  48:controller/actuators/electronic_throttle.c ****     }
 296              		.loc 1 48 9 view .LVU79
 297              	.L15:
  61:controller/actuators/electronic_throttle.c ****         }
  62:controller/actuators/electronic_throttle.c ****         if (ABS(position - 0.0f) < ELECTRONIC_THROTTLE_NEAR_END_OF_TRAVEL_THRESHOLD)
  63:controller/actuators/electronic_throttle.c ****         {
  64:controller/actuators/electronic_throttle.c ****             motor_effort = CLAMP(motor_effort, 0, etb->duty_cycle_limiting_lower);
  65:controller/actuators/electronic_throttle.c ****         }
  66:controller/actuators/electronic_throttle.c ****     }
  67:controller/actuators/electronic_throttle.c ****     dc_motor_set(etb->motor, dir ,  (uint8_t)ABS(motor_effort));
  68:controller/actuators/electronic_throttle.c **** }
 298              		.loc 1 68 1 is_stmt 0 view .LVU80
 299 00a8 03B0     		add	sp, sp, #12
 300              		.cfi_remember_state
 301              		.cfi_def_cfa_offset 20
 302              		@ sp needed
 303 00aa BDEC028B 		vldm	sp!, {d8}
 304              		.cfi_restore 80
 305              		.cfi_restore 81
 306              		.cfi_def_cfa_offset 12
 307 00ae 30BD     		pop	{r4, r5, pc}
 308              	.LVL22:
 309              	.L43:
 310              		.cfi_restore_state
  58:controller/actuators/electronic_throttle.c ****         {
 311              		.loc 1 58 36 discriminator 1 view .LVU81
 312 00b0 BEEE007A 		vmov.f32	s14, #-5.0e-1
 313 00b4 F4EEC77A 		vcmpe.f32	s15, s14
 314 00b8 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 315 00bc CCBF     		ite	gt
 316 00be 0123     		movgt	r3, #1
 317 00c0 0023     		movle	r3, #0
 318 00c2 DEE7     		b	.L22
 319              	.L32:
  60:controller/actuators/electronic_throttle.c ****         }
 320              		.loc 1 60 28 discriminator 1 view .LVU82
 321 00c4 9FED240A 		vldr.32	s0, .L47+8
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 8


 322              	.LVL23:
 323              	.L23:
  62:controller/actuators/electronic_throttle.c ****         {
 324              		.loc 1 62 9 is_stmt 1 view .LVU83
  62:controller/actuators/electronic_throttle.c ****         {
 325              		.loc 1 62 34 is_stmt 0 view .LVU84
 326 00c8 B5EEC08A 		vcmpe.f32	s16, #0
 327 00cc F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 328 00d0 26D4     		bmi	.L44
  62:controller/actuators/electronic_throttle.c ****         {
 329              		.loc 1 62 34 discriminator 2 view .LVU85
 330 00d2 F6EE007A 		vmov.f32	s15, #5.0e-1
 331 00d6 B4EEE78A 		vcmpe.f32	s16, s15
 332 00da F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 333 00de 4CBF     		ite	mi
 334 00e0 0123     		movmi	r3, #1
 335 00e2 0023     		movpl	r3, #0
 336              	.L26:
  62:controller/actuators/electronic_throttle.c ****         {
 337              		.loc 1 62 12 discriminator 4 view .LVU86
 338 00e4 6BB1     		cbz	r3, .L19
  64:controller/actuators/electronic_throttle.c ****         }
 339              		.loc 1 64 13 is_stmt 1 view .LVU87
  64:controller/actuators/electronic_throttle.c ****         }
 340              		.loc 1 64 28 is_stmt 0 view .LVU88
 341 00e6 B5EEC00A 		vcmpe.f32	s0, #0
 342 00ea F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 343 00ee 21D4     		bmi	.L45
  64:controller/actuators/electronic_throttle.c ****         }
 344              		.loc 1 64 28 discriminator 2 view .LVU89
 345 00f0 D4ED067A 		vldr.32	s15, [r4, #24]
 346 00f4 F4EEC07A 		vcmpe.f32	s15, s0
 347 00f8 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 348 00fc 01D5     		bpl	.L19
  64:controller/actuators/electronic_throttle.c ****         }
 349              		.loc 1 64 28 discriminator 4 view .LVU90
 350 00fe B0EE670A 		vmov.f32	s0, s15
 351              	.LVL24:
 352              	.L19:
  67:controller/actuators/electronic_throttle.c **** }
 353              		.loc 1 67 5 is_stmt 1 view .LVU91
 354 0102 6068     		ldr	r0, [r4, #4]
 355 0104 B5EEC00A 		vcmpe.f32	s0, #0
 356 0108 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 357 010c 16D4     		bmi	.L46
 358              	.LVL25:
 359              	.L29:
  67:controller/actuators/electronic_throttle.c **** }
 360              		.loc 1 67 5 is_stmt 0 discriminator 2 view .LVU92
 361 010e FCEEC07A 		vcvt.u32.f32	s15, s0
 362 0112 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 363 0116 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 364              	.L31:
  67:controller/actuators/electronic_throttle.c **** }
 365              		.loc 1 67 5 discriminator 4 view .LVU93
 366 011a FFF7FEFF 		bl	dc_motor_set
 367              	.LVL26:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 9


  67:controller/actuators/electronic_throttle.c **** }
 368              		.loc 1 67 5 discriminator 4 view .LVU94
 369 011e C3E7     		b	.L15
 370              	.LVL27:
 371              	.L44:
  62:controller/actuators/electronic_throttle.c ****         {
 372              		.loc 1 62 34 discriminator 1 view .LVU95
 373 0120 FEEE007A 		vmov.f32	s15, #-5.0e-1
 374 0124 B4EEE78A 		vcmpe.f32	s16, s15
 375 0128 F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 376 012c CCBF     		ite	gt
 377 012e 0123     		movgt	r3, #1
 378 0130 0023     		movle	r3, #0
 379 0132 D7E7     		b	.L26
 380              	.L45:
 381              	.LVL28:
  67:controller/actuators/electronic_throttle.c **** }
 382              		.loc 1 67 5 is_stmt 1 view .LVU96
 383 0134 6068     		ldr	r0, [r4, #4]
  64:controller/actuators/electronic_throttle.c ****         }
 384              		.loc 1 64 26 is_stmt 0 discriminator 8 view .LVU97
 385 0136 9FED080A 		vldr.32	s0, .L47+8
 386 013a E8E7     		b	.L29
 387              	.LVL29:
 388              	.L46:
  67:controller/actuators/electronic_throttle.c **** }
 389              		.loc 1 67 46 discriminator 1 view .LVU98
 390 013c B1EE400A 		vneg.f32	s0, s0
 391              	.LVL30:
  67:controller/actuators/electronic_throttle.c **** }
 392              		.loc 1 67 5 discriminator 1 view .LVU99
 393 0140 FCEEC07A 		vcvt.u32.f32	s15, s0
 394 0144 CDED017A 		vstr.32	s15, [sp, #4]	@ int
 395 0148 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
 396 014c E5E7     		b	.L31
 397              	.L48:
 398 014e 00BF     		.align	2
 399              	.L47:
 400 0150 0000C842 		.word	1120403456
 401 0154 00000000 		.word	.LC1
 402 0158 00000000 		.word	0
 403              		.cfi_endproc
 404              	.LFE234:
 406              		.section	.rodata.electronic_throttle_auto_tune.str1.4,"aMS",%progbits,1
 407              		.align	2
 408              	.LC2:
 409 0000 45544220 		.ascii	"ETB Auto-Tune failed. ETB is null!\000"
 409      4175746F 
 409      2D54756E 
 409      65206661 
 409      696C6564 
 410              		.section	.text.electronic_throttle_auto_tune,"ax",%progbits
 411              		.align	1
 412              		.global	electronic_throttle_auto_tune
 413              		.syntax unified
 414              		.thumb
 415              		.thumb_func
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 10


 417              	electronic_throttle_auto_tune:
 418              	.LVL31:
 419              	.LFB235:
  69:controller/actuators/electronic_throttle.c **** 
  70:controller/actuators/electronic_throttle.c **** 
  71:controller/actuators/electronic_throttle.c **** void electronic_throttle_auto_tune(electronic_throttle_t *etb)
  72:controller/actuators/electronic_throttle.c **** {
 420              		.loc 1 72 1 is_stmt 1 view -0
 421              		.cfi_startproc
 422              		@ args = 0, pretend = 0, frame = 0
 423              		@ frame_needed = 0, uses_anonymous_args = 0
 424              		.loc 1 72 1 is_stmt 0 view .LVU101
 425 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 426              		.cfi_def_cfa_offset 24
 427              		.cfi_offset 3, -24
 428              		.cfi_offset 4, -20
 429              		.cfi_offset 5, -16
 430              		.cfi_offset 6, -12
 431              		.cfi_offset 7, -8
 432              		.cfi_offset 14, -4
  73:controller/actuators/electronic_throttle.c ****     if (etb == NULL)
 433              		.loc 1 73 5 is_stmt 1 view .LVU102
 434              		.loc 1 73 8 is_stmt 0 view .LVU103
 435 0002 A0B1     		cbz	r0, .L57
 436 0004 0546     		mov	r5, r0
  74:controller/actuators/electronic_throttle.c ****     {
  75:controller/actuators/electronic_throttle.c ****         log_error("ETB Auto-Tune failed. ETB is null!");
  76:controller/actuators/electronic_throttle.c ****         return;
  77:controller/actuators/electronic_throttle.c ****     }
  78:controller/actuators/electronic_throttle.c ****     
  79:controller/actuators/electronic_throttle.c ****     /* First, we will try to find the end of travel for open and closed positions*/
  80:controller/actuators/electronic_throttle.c ****     uint8_t opening_duty_cycle = 180; // 0 to 255
 437              		.loc 1 80 5 is_stmt 1 view .LVU104
 438              	.LVL32:
  81:controller/actuators/electronic_throttle.c ****     uint8_t closing_duty_cycle = 180; // 0 to 255
 439              		.loc 1 81 5 view .LVU105
  82:controller/actuators/electronic_throttle.c ****     uint16_t settling_time_delay = 1000; // time it takes for the etb to move and settle
 440              		.loc 1 82 5 view .LVU106
  83:controller/actuators/electronic_throttle.c ****     uint8_t number_of_samples = 10;
 441              		.loc 1 83 5 view .LVU107
  84:controller/actuators/electronic_throttle.c **** 
  85:controller/actuators/electronic_throttle.c ****     uint16_t open_adc_value = 0;
 442              		.loc 1 85 5 view .LVU108
  86:controller/actuators/electronic_throttle.c ****     uint16_t closed_adc_value = 0;
 443              		.loc 1 86 5 view .LVU109
  87:controller/actuators/electronic_throttle.c ****     uint32_t temp = 0;
 444              		.loc 1 87 5 view .LVU110
  88:controller/actuators/electronic_throttle.c ****     
  89:controller/actuators/electronic_throttle.c ****     dc_motor_set(etb->motor, MOTOR_DIRECTION_FORWARD, opening_duty_cycle);
 445              		.loc 1 89 5 view .LVU111
 446 0006 B422     		movs	r2, #180
 447 0008 0021     		movs	r1, #0
 448 000a 4068     		ldr	r0, [r0, #4]
 449              	.LVL33:
 450              		.loc 1 89 5 is_stmt 0 view .LVU112
 451 000c FFF7FEFF 		bl	dc_motor_set
 452              	.LVL34:
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 11


  90:controller/actuators/electronic_throttle.c ****     osDelay(settling_time_delay);
 453              		.loc 1 90 5 is_stmt 1 view .LVU113
 454 0010 4FF47A70 		mov	r0, #1000
 455 0014 FFF7FEFF 		bl	osDelay
 456              	.LVL35:
  91:controller/actuators/electronic_throttle.c ****     temp = 0;
 457              		.loc 1 91 5 view .LVU114
  92:controller/actuators/electronic_throttle.c ****     for (size_t i = 0; i < number_of_samples; i++)
 458              		.loc 1 92 5 view .LVU115
 459              	.LBB2:
 460              		.loc 1 92 10 view .LVU116
 461              		.loc 1 92 17 is_stmt 0 view .LVU117
 462 0018 0024     		movs	r4, #0
 463              	.LBE2:
  91:controller/actuators/electronic_throttle.c ****     temp = 0;
 464              		.loc 1 91 10 view .LVU118
 465 001a 2646     		mov	r6, r4
 466              	.LVL36:
 467              	.L52:
 468              	.LBB4:
 469              		.loc 1 92 26 is_stmt 1 discriminator 1 view .LVU119
 470 001c 092C     		cmp	r4, #9
 471 001e 0AD8     		bhi	.L58
 472              	.LBB3:
  93:controller/actuators/electronic_throttle.c ****     {
  94:controller/actuators/electronic_throttle.c ****         uint16_t adc_value = analog_inputs_get_data(etb->sensor->analog_channel);
 473              		.loc 1 94 9 view .LVU120
 474              		.loc 1 94 56 is_stmt 0 view .LVU121
 475 0020 EB68     		ldr	r3, [r5, #12]
 476              		.loc 1 94 30 view .LVU122
 477 0022 1879     		ldrb	r0, [r3, #4]	@ zero_extendqisi2
 478 0024 FFF7FEFF 		bl	analog_inputs_get_data
 479              	.LVL37:
  95:controller/actuators/electronic_throttle.c ****         temp += adc_value;
 480              		.loc 1 95 9 is_stmt 1 view .LVU123
 481              		.loc 1 95 14 is_stmt 0 view .LVU124
 482 0028 0644     		add	r6, r6, r0
 483              	.LVL38:
 484              		.loc 1 95 14 view .LVU125
 485              	.LBE3:
  92:controller/actuators/electronic_throttle.c ****     for (size_t i = 0; i < number_of_samples; i++)
 486              		.loc 1 92 48 is_stmt 1 discriminator 3 view .LVU126
 487 002a 0134     		adds	r4, r4, #1
 488              	.LVL39:
  92:controller/actuators/electronic_throttle.c ****     for (size_t i = 0; i < number_of_samples; i++)
 489              		.loc 1 92 48 is_stmt 0 discriminator 3 view .LVU127
 490 002c F6E7     		b	.L52
 491              	.LVL40:
 492              	.L57:
  92:controller/actuators/electronic_throttle.c ****     for (size_t i = 0; i < number_of_samples; i++)
 493              		.loc 1 92 48 discriminator 3 view .LVU128
 494              	.LBE4:
  75:controller/actuators/electronic_throttle.c ****         return;
 495              		.loc 1 75 9 is_stmt 1 view .LVU129
 496 002e 1848     		ldr	r0, .L60
 497              	.LVL41:
  75:controller/actuators/electronic_throttle.c ****         return;
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 12


 498              		.loc 1 75 9 is_stmt 0 view .LVU130
 499 0030 FFF7FEFF 		bl	log_error
 500              	.LVL42:
  76:controller/actuators/electronic_throttle.c ****     }
 501              		.loc 1 76 9 is_stmt 1 view .LVU131
 502 0034 2AE0     		b	.L49
 503              	.LVL43:
 504              	.L58:
  96:controller/actuators/electronic_throttle.c ****     }
  97:controller/actuators/electronic_throttle.c ****     open_adc_value = temp / number_of_samples;
 505              		.loc 1 97 5 view .LVU132
 506              		.loc 1 97 27 is_stmt 0 view .LVU133
 507 0036 174B     		ldr	r3, .L60+4
 508 0038 A3FB0636 		umull	r3, r6, r3, r6
 509              	.LVL44:
 510              		.loc 1 97 20 view .LVU134
 511 003c C6F3CF07 		ubfx	r7, r6, #3, #16
 512              	.LVL45:
  98:controller/actuators/electronic_throttle.c **** 
  99:controller/actuators/electronic_throttle.c ****     dc_motor_set(etb->motor, MOTOR_DIRECTION_REVERSE, 50);
 513              		.loc 1 99 5 is_stmt 1 view .LVU135
 514 0040 3222     		movs	r2, #50
 515 0042 0121     		movs	r1, #1
 516 0044 6868     		ldr	r0, [r5, #4]
 517 0046 FFF7FEFF 		bl	dc_motor_set
 518              	.LVL46:
 100:controller/actuators/electronic_throttle.c ****     osDelay(settling_time_delay);
 519              		.loc 1 100 5 view .LVU136
 520 004a 4FF47A70 		mov	r0, #1000
 521 004e FFF7FEFF 		bl	osDelay
 522              	.LVL47:
 101:controller/actuators/electronic_throttle.c ****     dc_motor_set(etb->motor, MOTOR_DIRECTION_REVERSE, closing_duty_cycle);
 523              		.loc 1 101 5 view .LVU137
 524 0052 B422     		movs	r2, #180
 525 0054 0121     		movs	r1, #1
 526 0056 6868     		ldr	r0, [r5, #4]
 527 0058 FFF7FEFF 		bl	dc_motor_set
 528              	.LVL48:
 102:controller/actuators/electronic_throttle.c ****     osDelay(settling_time_delay);
 529              		.loc 1 102 5 view .LVU138
 530 005c 4FF47A70 		mov	r0, #1000
 531 0060 FFF7FEFF 		bl	osDelay
 532              	.LVL49:
 103:controller/actuators/electronic_throttle.c ****     temp = 0;
 533              		.loc 1 103 5 view .LVU139
 104:controller/actuators/electronic_throttle.c ****     for (size_t i = 0; i < number_of_samples; i++)
 534              		.loc 1 104 5 view .LVU140
 535              	.LBB5:
 536              		.loc 1 104 10 view .LVU141
 537              		.loc 1 104 17 is_stmt 0 view .LVU142
 538 0064 0024     		movs	r4, #0
 539              	.LVL50:
 540              		.loc 1 104 17 view .LVU143
 541              	.LBE5:
 103:controller/actuators/electronic_throttle.c ****     temp = 0;
 542              		.loc 1 103 10 view .LVU144
 543 0066 2646     		mov	r6, r4
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 13


 544              	.LVL51:
 545              	.L54:
 546              	.LBB7:
 547              		.loc 1 104 26 is_stmt 1 discriminator 1 view .LVU145
 548 0068 092C     		cmp	r4, #9
 549 006a 06D8     		bhi	.L59
 550              	.LBB6:
 105:controller/actuators/electronic_throttle.c ****     {
 106:controller/actuators/electronic_throttle.c ****         uint16_t adc_value = analog_inputs_get_data(etb->sensor->analog_channel);
 551              		.loc 1 106 9 view .LVU146
 552              		.loc 1 106 56 is_stmt 0 view .LVU147
 553 006c EB68     		ldr	r3, [r5, #12]
 554              		.loc 1 106 30 view .LVU148
 555 006e 1879     		ldrb	r0, [r3, #4]	@ zero_extendqisi2
 556 0070 FFF7FEFF 		bl	analog_inputs_get_data
 557              	.LVL52:
 107:controller/actuators/electronic_throttle.c ****         temp += adc_value;
 558              		.loc 1 107 9 is_stmt 1 view .LVU149
 559              		.loc 1 107 14 is_stmt 0 view .LVU150
 560 0074 0644     		add	r6, r6, r0
 561              	.LVL53:
 562              		.loc 1 107 14 view .LVU151
 563              	.LBE6:
 104:controller/actuators/electronic_throttle.c ****     for (size_t i = 0; i < number_of_samples; i++)
 564              		.loc 1 104 48 is_stmt 1 discriminator 3 view .LVU152
 565 0076 0134     		adds	r4, r4, #1
 566              	.LVL54:
 104:controller/actuators/electronic_throttle.c ****     for (size_t i = 0; i < number_of_samples; i++)
 567              		.loc 1 104 48 is_stmt 0 discriminator 3 view .LVU153
 568 0078 F6E7     		b	.L54
 569              	.LVL55:
 570              	.L59:
 104:controller/actuators/electronic_throttle.c ****     for (size_t i = 0; i < number_of_samples; i++)
 571              		.loc 1 104 48 discriminator 3 view .LVU154
 572              	.LBE7:
 108:controller/actuators/electronic_throttle.c ****     }
 109:controller/actuators/electronic_throttle.c ****     closed_adc_value = temp / number_of_samples;
 573              		.loc 1 109 5 is_stmt 1 view .LVU155
 574              		.loc 1 109 29 is_stmt 0 view .LVU156
 575 007a 064B     		ldr	r3, .L60+4
 576 007c A3FB0636 		umull	r3, r6, r3, r6
 577              	.LVL56:
 578              		.loc 1 109 22 view .LVU157
 579 0080 C6F3CF06 		ubfx	r6, r6, #3, #16
 580              	.LVL57:
 110:controller/actuators/electronic_throttle.c ****     
 111:controller/actuators/electronic_throttle.c ****     etb->sensor->closed_throttle_adc_value = closed_adc_value;
 581              		.loc 1 111 5 is_stmt 1 view .LVU158
 582              		.loc 1 111 8 is_stmt 0 view .LVU159
 583 0084 EB68     		ldr	r3, [r5, #12]
 584              		.loc 1 111 44 view .LVU160
 585 0086 5E80     		strh	r6, [r3, #2]	@ movhi
 112:controller/actuators/electronic_throttle.c ****     etb->sensor->wide_open_throttle_adc_value = open_adc_value;
 586              		.loc 1 112 5 is_stmt 1 view .LVU161
 587              		.loc 1 112 8 is_stmt 0 view .LVU162
 588 0088 EB68     		ldr	r3, [r5, #12]
 589              		.loc 1 112 47 view .LVU163
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 14


 590 008a 1F80     		strh	r7, [r3]	@ movhi
 591              	.LVL58:
 592              	.L49:
 113:controller/actuators/electronic_throttle.c **** 
 114:controller/actuators/electronic_throttle.c **** }...
 593              		.loc 1 114 1 view .LVU164
 594 008c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 595              	.L61:
 596 008e 00BF     		.align	2
 597              	.L60:
 598 0090 00000000 		.word	.LC2
 599 0094 CDCCCCCC 		.word	-858993459
 600              		.cfi_endproc
 601              	.LFE235:
 603              		.text
 604              	.Letext0:
 605              		.file 2 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 606              		.file 3 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 607              		.file 4 "C:/Users/alireza/AppData/Roaming/Code/User/globalStorage/bmd.stm32-for-vscode/@xpack-dev-
 608              		.file 5 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS_V2/cmsis_os2.h"
 609              		.file 6 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f401xc.h"
 610              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 611              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 612              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 613              		.file 10 "controller/types.h"
 614              		.file 11 "controller/actuators/dc_motors.h"
 615              		.file 12 "controller/utils/pid.h"
 616              		.file 13 "controller/IO/analog_inputs.h"
 617              		.file 14 "controller/IO/sensors.h"
 618              		.file 15 "controller/actuators/electronic_throttle.h"
 619              		.file 16 "controller/utils/error_handling.h"
 620              		.file 17 "controller/utils/timing.h"
ARM GAS  C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s 			page 15


DEFINED SYMBOLS
                            *ABS*:00000000 electronic_throttle.c
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:21     .rodata.electronic_throttle_init.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:25     .text.electronic_throttle_init:00000000 $t
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:31     .text.electronic_throttle_init:00000000 electronic_throttle_init
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:111    .text.electronic_throttle_init:00000038 $d
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:120    .text.electronic_throttle_set:00000000 $t
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:126    .text.electronic_throttle_set:00000000 electronic_throttle_set
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:158    .text.electronic_throttle_set:00000024 $d
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:163    .rodata.electronic_throttle_update.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:167    .text.electronic_throttle_update:00000000 $t
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:173    .text.electronic_throttle_update:00000000 electronic_throttle_update
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:400    .text.electronic_throttle_update:00000150 $d
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:407    .rodata.electronic_throttle_auto_tune.str1.4:00000000 $d
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:411    .text.electronic_throttle_auto_tune:00000000 $t
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:417    .text.electronic_throttle_auto_tune:00000000 electronic_throttle_auto_tune
C:\Users\alireza\AppData\Local\Temp\cckkjRzx.s:598    .text.electronic_throttle_auto_tune:00000090 $d

UNDEFINED SYMBOLS
log_error
sensor_tps_get
pid_set_setpoint
get_time_us
pid_compute
dc_motor_set
osDelay
analog_inputs_get_data
